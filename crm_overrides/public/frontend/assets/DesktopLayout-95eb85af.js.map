{"version":3,"file":"DesktopLayout-95eb85af.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/ConfirmDialog.vue","../../../../frontend/node_modules/frappe-ui/src/components/Rating/Rating.vue","../../../../frontend/node_modules/frappe-ui/src/components/Spinner/Spinner.vue","../../../../frontend/node_modules/frappe-ui/frappe/Icons/StepsIcon.vue","../../../../frontend/node_modules/frappe-ui/frappe/Icons/MinimizeIcon.vue","../../../../frontend/node_modules/frappe-ui/frappe/Icons/MaximizeIcon.vue","../../../../frontend/node_modules/frappe-ui/frappe/Icons/HelpIcon.vue","../../../../frontend/node_modules/frappe-ui/frappe/Onboarding/OnboardingSteps.vue","../../../../frontend/node_modules/frappe-ui/frappe/HelpCenter/HelpCenter.vue","../../../../frontend/node_modules/frappe-ui/frappe/Help/HelpModal.vue","../../../../frontend/node_modules/frappe-ui/frappe/Onboarding/GettingStartedBanner.vue","../../../../frontend/node_modules/frappe-ui/frappe/Onboarding/IntermediateStepModal.vue","../../../../frontend/node_modules/frappe-ui/frappe/Icons/LightningIcon.vue","../../../../frontend/node_modules/frappe-ui/frappe/Billing/TrialBanner.vue","../../../../frontend/node_modules/frappe-ui/frappe/Billing/SignupBanner.vue","../../../../frontend/src/components/Icons/InviteIcon.vue","../../../../frontend/src/components/Icons/ConvertIcon.vue","../../../../frontend/src/components/Icons/StepsIcon.vue","../../../../frontend/src/components/Icons/SquareAsterisk.vue","../../../../frontend/src/components/Icons/CollapseSidebar.vue","../../../../frontend/src/components/Icons/HelpIcon.vue","../../../../frontend/src/components/Notifications.vue","../../../../frontend/src/components/Icons/SparkleIcon.vue","../../../../frontend/src/components/Icons/ERPNextIcon.vue","../../../../frontend/src/components/Icons/HelpdeskIcon.vue","../../../../frontend/src/components/Icons/SettingsIcon2.vue","../../../../frontend/src/components/Modals/AddExistingUserModal.vue","../../../../frontend/src/components/Settings/Users.vue","../../../../frontend/src/components/Settings/InviteUserPage.vue","../../../../frontend/src/components/Settings/ProfileSettings.vue","../../../../frontend/src/components/Settings/SettingsPage.vue","../../../../frontend/src/components/Settings/WhatsAppSettings.vue","../../../../frontend/src/components/Settings/ERPNextSettings.vue","../../../../frontend/src/components/Settings/HelpdeskSettings.vue","../../../../frontend/src/components/Settings/LeadSyncing/LeadSyncSources.vue","../../../../frontend/src/components/Icons/FacebookIcon.vue","../../../../frontend/src/components/Settings/LeadSyncing/leadSyncSourceConfig.js","../../../../frontend/src/components/Settings/LeadSyncing/FailureLogs.vue","../../../../frontend/src/components/Settings/LeadSyncing/LeadSyncSourceForm.vue","../../../../frontend/src/components/Settings/LeadSyncing/LeadSyncSourcePage.vue","../../../../frontend/src/components/Controls/ImageUploader.vue","../../../../frontend/src/components/Settings/BrandSettings.vue","../../../../frontend/src/components/Settings/HomeActions.vue","../../../../frontend/src/components/Settings/ForecastingSettings.vue","../../../../frontend/src/components/Settings/CurrencySettings.vue","../../../../frontend/src/components/Settings/EmailTemplate/NewEmailTemplate.vue","../../../../frontend/src/components/Settings/EmailTemplate/EditEmailTemplate.vue","../../../../frontend/src/components/Settings/EmailTemplate/EmailTemplates.vue","../../../../frontend/src/components/Settings/EmailTemplate/EmailTemplatePage.vue","../../../../frontend/src/components/Settings/TelephonySettings.vue","../../../../frontend/src/images/gmail.png","../../../../frontend/src/images/outlook.png","../../../../frontend/src/images/sendgrid.png","../../../../frontend/src/images/sparkpost.webp","../../../../frontend/src/images/yahoo.png","../../../../frontend/src/images/yandex.png","../../../../frontend/src/images/frappe-mail.svg","../../../../frontend/src/components/Settings/emailConfig.js","../../../../frontend/src/components/Settings/EmailProviderIcon.vue","../../../../frontend/src/components/Settings/EmailAdd.vue","../../../../frontend/src/components/Settings/EmailAccountCard.vue","../../../../frontend/src/components/Settings/EmailAccountList.vue","../../../../frontend/src/components/Settings/EmailEdit.vue","../../../../frontend/src/components/Settings/EmailConfig.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRuleListItem.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRulesList.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRules.vue","../../../../frontend/src/components/ConditionsFilter/filterableFields.ts","../../../../frontend/src/components/ConditionsFilter/CFCondition.vue","../../../../frontend/src/components/ConditionsFilter/CFConditions.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRulesSection.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentScheduleItem.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentSchedule.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssigneeSearch.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssigneeRules.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRuleView.vue","../../../../frontend/src/components/Settings/AssignmentRules/AssignmentRulePage.vue","../../../../frontend/src/components/Settings/Settings.vue","../../../../frontend/src/components/Layouts/AppSidebar.vue","../../../../frontend/src/components/Layouts/AppHeader.vue","../../../../frontend/src/components/Layouts/DesktopLayout.vue"],"sourcesContent":["<template>\n  <Dialog v-model=\"showDialog\" :options=\"{ title }\" @close=\"closeDialog\">\n    <template #body-content>\n      <div class=\"space-y-4\">\n        <p class=\"text-p-base text-gray-800\" v-if=\"message\" v-html=\"message\" />\n      </div>\n    </template>\n    <template #actions>\n      <Button class=\"w-full\" v-bind=\"primaryActionProps\" />\n    </template>\n  </Dialog>\n</template>\n<script>\nimport { Button } from './Button'\nimport { Dialog } from './Dialog'\n\nexport default {\n  name: 'ConfirmDialog',\n  props: {\n    title: {\n      type: String,\n    },\n    message: {\n      type: String,\n    },\n    onConfirm: {\n      type: Function,\n      default: null,\n    },\n    onCancel: {\n      type: Function,\n      default: null,\n    },\n  },\n  expose: ['show', 'hide'],\n  components: {\n    Dialog,\n    Button,\n  },\n  data() {\n    return {\n      showDialog: true,\n      isLoading: false,\n    }\n  },\n  methods: {\n    handleConfirmation() {\n      try {\n        this.onConfirm?.({\n          hideDialog: this.hide,\n        })\n      } finally {\n        this.isLoading = false\n      }\n    },\n    show() {\n      this.showDialog = true\n    },\n    closeDialog() {\n      this.hide()\n      this.onCancel?.()\n    },\n    hide() {\n      this.showDialog = false\n    },\n  },\n  computed: {\n    primaryActionProps() {\n      return {\n        label: 'Confirm',\n        variant: 'solid',\n        loading: this.isLoading,\n        onClick: this.handleConfirmation,\n      }\n    },\n  },\n}\n</script>\n","<template>\n  <div class=\"space-y-1\">\n    <label class=\"block text-xs text-ink-gray-5\" v-if=\"label\">\n      {{ label }}\n    </label>\n    <div class=\"flex text-center\">\n      <div\n        v-for=\"index in rating_from\"\n        :key=\"index\"\n        @mouseover=\"() => !readonly && (hoveredRating = index)\"\n        @mouseleave=\"() => !readonly && (hoveredRating = 0)\"\n      >\n        <FeatherIcon\n          name=\"star\"\n          class=\"fill-gray-300 text-transparent mr-0.5\"\n          :class=\"iconClasses(index)\"\n          @click=\"markRating(index)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport FeatherIcon from '../FeatherIcon.vue'\nimport type { RatingProps } from './types'\n\nconst props = withDefaults(defineProps<RatingProps>(), {\n  modelValue: 0,\n  rating_from: 5,\n  size: 'md',\n  readonly: false,\n})\n\nconst emit = defineEmits(['update:modelValue'])\nconst rating = ref(props.modelValue)\nconst hoveredRating = ref(0)\n\nconst iconClasses = (index: number) => {\n  let classes = [\n    {\n      sm: 'size-4',\n      md: 'size-5',\n      lg: 'size-6',\n      xl: 'size-7',\n    }[props.size],\n  ]\n\n  if (index <= hoveredRating.value && index > rating.value) {\n    classes.push('!fill-yellow-200')\n  } else if (index <= rating.value) {\n    classes.push('!fill-yellow-500')\n  }\n\n  if (!props.readonly) {\n    classes.push('cursor-pointer')\n  }\n  return classes.join(' ')\n}\n\nconst emitChange = (value: number) => {\n  emit('update:modelValue', value)\n}\n\nconst markRating = (index: number) => {\n  if (props.readonly) return\n  emitChange(index)\n  rating.value = index\n}\n\nwatch(\n  () => props.modelValue,\n  (newVal) => {\n    rating.value = newVal\n  },\n)\n</script>\n","<template>\n  <svg class=\"spinner\" viewBox=\"0 0 50 50\">\n    <defs>\n      <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n        <stop offset=\"0%\" stop-color=\"rgba(0,110,219,1)\" />\n        <stop offset=\"100%\" stop-color=\"rgba(255,255,255,0)\" />\n      </linearGradient>\n    </defs>\n    <circle\n      stroke=\"url(#gradient)\"\n      class=\"spinner-path\"\n      cx=\"25\"\n      cy=\"25\"\n      r=\"20\"\n      fill=\"none\"\n      stroke-width=\"5\"\n    ></circle>\n  </svg>\n</template>\n<script lang=\"ts\" setup></script>\n<style scoped>\n.spinner {\n  animation: rotate 2s linear infinite;\n}\n.spinner-path {\n  stroke-linecap: round;\n  animation: dash 1.5s ease-in-out infinite;\n}\n\n@keyframes rotate {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes dash {\n  0% {\n    stroke-dasharray: 1, 150;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -35;\n  }\n  100% {\n    stroke-dasharray: 120, 150;\n    stroke-dashoffset: -124;\n  }\n}\n</style>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"feather feather-minimize-2\"\n  >\n    <polyline points=\"4 14 10 14 10 20\" />\n    <polyline points=\"20 10 14 10 14 4\" />\n    <line x1=\"14\" y1=\"10\" x2=\"21\" y2=\"3\" />\n    <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"feather feather-maximize-2\"\n  >\n    <polyline points=\"15 3 21 3 21 9\" />\n    <polyline points=\"9 21 3 21 3 15\" />\n    <line x1=\"21\" y1=\"3\" x2=\"14\" y2=\"10\" />\n    <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"flex flex-col justify-center items-center gap-1 mt-4 mb-7\">\n    <component :is=\"logo\" class=\"size-10 shrink-0 rounded mb-4\" />\n    <div class=\"text-base font-medium\">\n      {{ 'Welcome to ' + title }}\n    </div>\n    <div class=\"text-p-base font-normal\">\n      {{ `${stepsCompleted}/${totalSteps} steps completed` }}\n    </div>\n  </div>\n  <div class=\"flex flex-col gap-2.5 overflow-hidden\">\n    <div class=\"flex justify-between items-center py-0.5\">\n      <Badge\n        :label=\"`${completedPercentage}% completed`\"\n        :theme=\"completedPercentage == 100 ? 'green' : 'orange'\"\n        size=\"lg\"\n      />\n      <div class=\"flex\">\n        <Button\n          v-if=\"completedPercentage != 0\"\n          variant=\"ghost\"\n          :label=\"'Reset all'\"\n          @click=\"() => resetAll(afterResetAll)\"\n        />\n        <Button\n          v-if=\"completedPercentage != 100\"\n          variant=\"ghost\"\n          :label=\"'Skip all'\"\n          @click=\"() => skipAll(afterSkipAll)\"\n        />\n      </div>\n    </div>\n    <div class=\"flex flex-col gap-1.5 overflow-y-auto\">\n      <div\n        v-for=\"step in steps\"\n        :key=\"step.title\"\n        class=\"group w-full flex gap-2 justify-between items-center hover:bg-surface-gray-1 rounded px-2 py-1.5 cursor-pointer\"\n        @click.stop=\"\n          () => !step.completed && !isDependent(step) && step.onClick()\n        \"\n      >\n        <component\n          :is=\"isDependent(step) ? Tooltip : 'div'\"\n          :text=\"dependsOnTooltip(step)\"\n        >\n          <div\n            class=\"flex gap-2 items-center\"\n            :class=\"[\n              step.completed\n                ? 'text-ink-gray-5'\n                : isDependent(step)\n                  ? 'text-ink-gray-4'\n                  : 'text-ink-gray-8',\n            ]\"\n          >\n            <component :is=\"step.icon\" class=\"h-4\" />\n            <div class=\"text-base\" :class=\"{ 'line-through': step.completed }\">\n              {{ step.title }}\n            </div>\n          </div>\n        </component>\n        <Button\n          v-if=\"!step.completed && !isDependent(step)\"\n          :label=\"'Skip'\"\n          class=\"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex\"\n          @click=\"() => skip(step.name, afterSkip)\"\n        />\n        <Button\n          v-else-if=\"!isDependent(step)\"\n          :label=\"'Reset'\"\n          class=\"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex\"\n          @click.stop=\"() => reset(step.name, afterReset)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { useOnboarding } from './onboarding'\nimport Tooltip from '../../src/components/Tooltip/Tooltip.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport Badge from '../../src/components/Badge/Badge.vue'\n\nconst props = defineProps({\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n  title: {\n    type: String,\n    default: 'Frappe CRM',\n  },\n  logo: {\n    type: Object,\n    required: true,\n  },\n  afterSkip: {\n    type: Function,\n    default: () => {},\n  },\n  afterSkipAll: {\n    type: Function,\n    default: () => {},\n  },\n  afterReset: {\n    type: Function,\n    default: () => {},\n  },\n  afterResetAll: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nfunction isDependent(step) {\n  if (step.dependsOn && !step.completed) {\n    const dependsOnStep = steps.find((s) => s.name === step.dependsOn)\n    if (dependsOnStep && !dependsOnStep.completed) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction dependsOnTooltip(step) {\n  if (step.dependsOn && !step.completed) {\n    const dependsOnStep = steps.find((s) => s.name === step.dependsOn)\n    if (dependsOnStep && !dependsOnStep.completed) {\n      return `You need to complete \"${dependsOnStep.title}\" first.`\n    }\n  }\n  return ''\n}\n\nconst {\n  steps,\n  stepsCompleted,\n  totalSteps,\n  completedPercentage,\n  skip,\n  skipAll,\n  reset,\n  resetAll,\n} = useOnboarding(props.appName)\n</script>\n","<template>\n  <div class=\"flex flex-col gap-2 overflow-hidden\">\n    <div class=\"m-1\">\n      <TextInput\n        ref=\"searchInput\"\n        :placeholder=\"'Search articles...'\"\n        v-model=\"search\"\n        :debounce=\"300\"\n      >\n        <template #prefix>\n          <FeatherIcon name=\"search\" class=\"h-4 text-ink-gray-5\" />\n        </template>\n      </TextInput>\n    </div>\n    <div\n      class=\"flex justify-between items-center text-base text-ink-gray-5 mx-2\"\n    >\n      <div>All articles</div>\n      <Button variant=\"ghost\" @click=\"openDocs\">\n        <FeatherIcon name=\"arrow-up-right\" class=\"h-4 text-ink-gray-5\" />\n      </Button>\n    </div>\n    <div class=\"flex flex-col gap-1.5 overflow-y-auto\">\n      <div\n        v-for=\"a in parsedArticles\"\n        :key=\"a.title\"\n        class=\"flex flex-col gap-1.5\"\n      >\n        <div\n          class=\"flex items-center justify-between p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer\"\n          @click=\"a.opened = !a.opened\"\n        >\n          <div class=\"flex items-center gap-2\">\n            <FeatherIcon\n              :name=\"a.opened ? 'chevron-down' : 'chevron-right'\"\n              class=\"h-4 text-ink-gray-5\"\n            />\n            <div class=\"text-base text-ink-gray-8\">{{ a.title }}</div>\n          </div>\n        </div>\n        <div v-show=\"a.opened\" class=\"flex flex-col gap-1.5 ml-5\">\n          <div\n            v-for=\"subArticle in a.subArticles\"\n            :key=\"subArticle.name\"\n            class=\"group flex items-center justify-between gap-2 p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer\"\n            @click=\"() => openDoc(subArticle.name)\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <FeatherIcon name=\"file-text\" class=\"h-4 text-ink-gray-5\" />\n              <div class=\"text-base text-ink-gray-8\">\n                {{ subArticle.title }}\n              </div>\n            </div>\n            <FeatherIcon\n              name=\"arrow-up-right\"\n              class=\"h-4 hidden group-hover:flex text-ink-gray-5\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport Button from '../../src/components/Button/Button.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport TextInput from '../../src/components/TextInput/TextInput.vue'\nimport { ref, computed, onMounted } from 'vue'\n\nconst props = defineProps({\n  docsLink: {\n    type: String,\n    default: 'https://docs.frappe.io/crm',\n  },\n})\n\nconst searchInput = ref(null)\nconst search = ref('')\nconst articles = defineModel()\n\nconst parsedArticles = computed(() => {\n  if (!search.value) return articles.value\n\n  return articles.value.filter((a) => {\n    const filteredSubArticles = a.subArticles.filter((subArticle) => {\n      return subArticle.title.toLowerCase().includes(search.value.toLowerCase())\n    })\n\n    if (\n      a.title.toLowerCase().includes(search.value.toLowerCase()) ||\n      filteredSubArticles.length > 0\n    ) {\n      return {\n        ...a,\n        subArticles: filteredSubArticles,\n      }\n    }\n\n    return false\n  })\n})\n\nfunction openDocs() {\n  window.open(props.docsLink, '_blank')\n}\n\nfunction openDoc(name) {\n  window.open(`${props.docsLink}/${name}`, '_blank')\n}\n\nonMounted(() => {\n  searchInput.value?.el?.focus()\n})\n</script>\n","<template>\n  <div\n    v-show=\"show\"\n    class=\"fixed z-50 right-0 w-80 h-[calc(100%_-_80px)] text-ink-gray-9 m-5 mt-[62px] p-3 flex gap-2 flex-col justify-between rounded-lg bg-surface-modal shadow-2xl\"\n    :class=\"{ 'top-[calc(100%_-_120px)] border': minimize }\"\n    @click.stop\n  >\n    <div class=\"flex items-center justify-between px-2 py-1.5\">\n      <div class=\"text-base font-medium\">\n        {{ headingTitle }}\n      </div>\n      <div class=\"flex gap-1\">\n        <Dropdown v-if=\"options.length\" :options=\"options\">\n          <Button variant=\"ghost\" icon=\"more-horizontal\" />\n        </Dropdown>\n        <Button @click=\"minimize = !minimize\" variant=\"ghost\">\n          <component\n            :is=\"minimize ? MaximizeIcon : MinimizeIcon\"\n            class=\"h-3.5\"\n          />\n        </Button>\n        <Button variant=\"ghost\" @click=\"show = false\">\n          <FeatherIcon name=\"x\" class=\"h-3.5\" />\n        </Button>\n      </div>\n    </div>\n    <div class=\"h-full overflow-hidden flex flex-col\">\n      <OnboardingSteps\n        v-if=\"!isOnboardingStepsCompleted && !showHelpCenter\"\n        :title=\"title\"\n        :logo=\"logo\"\n        :afterSkip=\"afterSkip\"\n        :afterSkipAll=\"afterSkipAll\"\n        :afterReset=\"afterReset\"\n        :afterResetAll=\"afterResetAll\"\n        :appName=\"appName\"\n      />\n      <HelpCenter\n        v-else-if=\"showHelpCenter\"\n        v-model=\"articles\"\n        :docsLink=\"docsLink\"\n      />\n    </div>\n    <div v-for=\"item in footerItems\" class=\"flex flex-col gap-1.5\">\n      <div\n        class=\"w-full flex gap-2 items-center hover:bg-surface-gray-1 text-ink-gray-8 rounded px-2 py-1.5 cursor-pointer\"\n        @click=\"item.onClick\"\n      >\n        <component :is=\"item.icon\" class=\"h-4\" />\n        <div class=\"text-base\">{{ item.label }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport Dropdown from '../../src/components/Dropdown/Dropdown.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport StepsIcon from '../Icons/StepsIcon.vue'\nimport MinimizeIcon from '../Icons/MinimizeIcon.vue'\nimport MaximizeIcon from '../Icons/MaximizeIcon.vue'\nimport HelpIcon from '../Icons/HelpIcon.vue'\nimport OnboardingSteps from '../Onboarding/OnboardingSteps.vue'\nimport HelpCenter from '../HelpCenter/HelpCenter.vue'\nimport { useOnboarding } from '../Onboarding/onboarding'\nimport { showHelpCenter } from '../HelpCenter/helpCenter'\nimport { minimize } from '../Help/help'\nimport { onMounted, computed } from 'vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\n\nconst props = defineProps({\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n  title: {\n    type: String,\n    default: 'Frappe CRM',\n  },\n  logo: {\n    type: Object,\n    required: true,\n  },\n  afterSkip: {\n    type: Function,\n    default: () => {},\n  },\n  afterSkipAll: {\n    type: Function,\n    default: () => {},\n  },\n  afterReset: {\n    type: Function,\n    default: () => {},\n  },\n  afterResetAll: {\n    type: Function,\n    default: () => {},\n  },\n  docsLink: {\n    type: String,\n    default: 'https://docs.frappe.io/crm',\n  },\n})\n\nconst { syncStatus, resetAll, isOnboardingStepsCompleted } = useOnboarding(\n  props.appName,\n)\n\nconst show = defineModel()\nconst articles = defineModel('articles')\n\nconst headingTitle = computed(() => {\n  if (!isOnboardingStepsCompleted.value && !showHelpCenter.value) {\n    return 'Getting started'\n  } else if (showHelpCenter.value) {\n    return 'Help center'\n  }\n})\n\nconst options = computed(() => {\n  let items = [\n    {\n      icon: StepsIcon,\n      label: 'Reset onboarding steps',\n      onClick: resetOnboardingSteps,\n      condition: () => showHelpCenter.value && isOnboardingStepsCompleted.value,\n    },\n  ]\n\n  return items.filter((item) => item.condition())\n})\n\nconst footerItems = computed(() => {\n  let items = [\n    {\n      icon: HelpIcon,\n      label: 'Help centre',\n      onClick: () => {\n        syncStatus()\n        showHelpCenter.value = true\n      },\n      condition: !isOnboardingStepsCompleted.value && !showHelpCenter.value,\n    },\n    {\n      icon: StepsIcon,\n      label: 'Getting started',\n      onClick: () => (showHelpCenter.value = false),\n      condition: showHelpCenter.value && !isOnboardingStepsCompleted.value,\n    },\n  ]\n\n  return items.filter((item) => item.condition)\n})\n\nfunction resetOnboardingSteps() {\n  resetAll()\n  isOnboardingStepsCompleted.value = false\n  showHelpCenter.value = false\n}\n\nonMounted(() => {\n  if (isOnboardingStepsCompleted.value) {\n    showHelpCenter.value = true\n  }\n})\n</script>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base\"\n  >\n    <div\n      v-if=\"stepsCompleted != totalSteps\"\n      class=\"inline-flex text-ink-gray-9 gap-2\"\n    >\n      <StepsIcon class=\"h-4 my-0.5 shrink-0\" />\n      <div class=\"flex flex-col text-p-sm gap-0.5\">\n        <div class=\"font-medium\">\n          {{ 'Getting started' }}\n        </div>\n        <div class=\"text-ink-gray-7\">\n          {{ `${stepsCompleted}/${totalSteps} steps` }}\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"flex flex-col gap-1\">\n      <div class=\"flex items-center justify-between gap-1\">\n        <div class=\"flex items-center gap-2 shrink-0\">\n          <StepsIcon class=\"h-4 my-0.5\" />\n          <div class=\"text-ink-gray-9 font-medium\">\n            {{ 'You are all set' }}\n          </div>\n        </div>\n        <FeatherIcon\n          name=\"x\"\n          class=\"h-4 cursor-pointer\"\n          @click=\"\n            () => {\n              showHelpCenter = true\n              isOnboardingStepsCompleted = true\n            }\n          \"\n        />\n      </div>\n      <div class=\"text-p-sm text-ink-gray-7\">\n        {{ 'All steps are completed successfully' }}\n      </div>\n    </div>\n    <Button\n      v-if=\"stepsCompleted != totalSteps\"\n      :label=\"stepsCompleted == 0 ? 'Start now' : 'Continue'\"\n      theme=\"blue\"\n      @click=\"openOnboarding\"\n    >\n      <template #prefix>\n        <FeatherIcon name=\"chevrons-right\" class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else-if=\"stepsCompleted != totalSteps\" @click=\"openOnboarding\">\n    <StepsIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport StepsIcon from '../Icons/StepsIcon.vue'\nimport Button from '../../src/components/Button/Button.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport { useOnboarding } from './onboarding'\nimport { showHelpCenter } from '../HelpCenter/helpCenter'\nimport { showHelpModal, minimize } from '../Help/help'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  appName: {\n    type: String,\n    default: 'frappecrm',\n  },\n})\n\nconst { stepsCompleted, totalSteps, isOnboardingStepsCompleted } =\n  useOnboarding(props.appName)\n\nconst openOnboarding = () => {\n  minimize.value = false\n  showHelpModal.value = true\n}\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"options\">\n    <template #boday-header>\n      <slot name=\"body-header\"></slot>\n    </template>\n    <template #body-content>\n      <slot>\n        <div class=\"flex flex-col gap-2 text-ink-gray-9 text-base\">\n          <div v-if=\"currentStep.message\">{{ currentStep.message }}</div>\n          <video\n            v-if=\"currentStep.videoURL\"\n            class=\"w-full rounded\"\n            controls\n            autoplay\n            muted\n          >\n            <source :src=\"currentStep.videoURL\" type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n        </div>\n      </slot>\n    </template>\n    <template #actions>\n      <slot name=\"actions\"></slot>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport { Dialog } from '../../src/components/Dialog'\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  currentStep: {\n    type: Object,\n    default: {\n      title: 'Title',\n      message: 'Message',\n      videoURL: '',\n      buttonLabel: 'Button Label',\n      onClick: () => {},\n    },\n  },\n  dialogOptions: {\n    type: Object,\n    default: () => ({}),\n  },\n})\n\nconst show = defineModel()\n\nconst options = computed(() => {\n  if (props.dialogOptions && Object.keys(props.dialogOptions).length) {\n    return props.dialogOptions\n  }\n\n  return {\n    title: props.currentStep.title,\n    size: '2xl',\n    actions: [\n      {\n        label: props.currentStep.buttonLabel,\n        variant: 'solid',\n        onClick: props.currentStep.onClick,\n      },\n    ],\n  }\n})\n</script>\n","<template>\n  <svg\n    width=\"17\"\n    height=\"16\"\n    viewBox=\"0 0 17 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed && showBanner\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base\"\n  >\n    <div class=\"flex flex-col gap-1\">\n      <div class=\"inline-flex text-ink-gray-9 gap-2 items-center font-medium\">\n        <FeatherIcon class=\"h-4\" name=\"info\" />\n        {{ trialTitle }}\n      </div>\n      <div class=\"text-ink-gray-7 text-p-sm\">\n        {{ trialMessage }}\n      </div>\n    </div>\n    <Button :label=\"'Upgrade plan'\" theme=\"blue\" @click=\"upgradePlan\">\n      <template #prefix>\n        <LightningIcon class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else-if=\"isSidebarCollapsed && showBanner\" @click=\"upgradePlan\">\n    <LightningIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport LightningIcon from '../Icons/LightningIcon.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport { Button } from '../../src/components/Button'\nimport { createResource } from '../../src/resources'\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  afterUpgrade: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nconst trialEndDays = ref(0)\nconst showBanner = ref(false)\nconst baseEndpoint = ref('https://frappecloud.com')\nconst siteName = ref('')\n\nconst trialTitle = computed(() => {\n  return trialEndDays.value > 1\n    ? 'Trial ends in ' + trialEndDays.value + ' days'\n    : 'Trial ends tomorrow'\n})\n\nconst trialMessage = 'Upgrade to a paid plan for uninterrupted services'\n\ncreateResource({\n  url: 'frappe.integrations.frappe_providers.frappecloud_billing.current_site_info',\n  cache: 'current_site_info_data',\n  auto: true,\n  onSuccess: (data) => {\n    trialEndDays.value = calculateTrialEndDays(data.trial_end_date)\n    baseEndpoint.value = data.base_url\n    siteName.value = data.site_name\n    showBanner.value = data.plan.is_trial_plan && trialEndDays.value > 0\n  },\n})\n\nfunction calculateTrialEndDays(trialEndDate) {\n  if (!trialEndDate) return 0\n\n  trialEndDate = new Date(trialEndDate)\n  const today = new Date()\n  const diffTime = trialEndDate - today\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n  return diffDays\n}\n\nfunction upgradePlan() {\n  window.open(\n    `${baseEndpoint.value}/dashboard/sites/${siteName.value}`,\n    '_blank',\n  )\n  props.afterUpgrade?.()\n}\n</script>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-white text-base\"\n  >\n    <div class=\"flex flex-col gap-1\">\n      <slot>\n        <div class=\"inline-flex gap-2 items-center font-medium\">\n          <FeatherIcon class=\"h-4\" name=\"info\" />\n          Loved the demo?\n        </div>\n        <div class=\"text-ink-gray-7 text-p-sm\">\n          {{ `Try ${appName} for free with a 14-day trial.` }}\n        </div>\n      </slot>\n    </div>\n    <Button label=\"Sign up now\" theme=\"blue\" @click=\"signupNow\">\n      <template #prefix>\n        <LightningIcon class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else @click=\"signupNow\">\n    <LightningIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport LightningIcon from '../Icons/LightningIcon.vue'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  appName: {\n    type: String,\n    default: 'Frappe CRM',\n  },\n  redirectURL: {\n    type: String,\n    default: 'https://frappecloud.com/crm/signup',\n  },\n  afterSignup: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nfunction signupNow() {\n  window.open(props.redirectURL, '_blank')\n  props.afterSignup?.()\n}\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M13.5 0C13.7761 0 14 0.223858 14 0.5V2H15.5C15.7761 2 16 2.22386 16 2.5C16 2.77614 15.7761 3 15.5 3H14V4.5C14 4.77614 13.7761 5 13.5 5C13.2239 5 13 4.77614 13 4.5V3H11.5C11.2239 3 11 2.77614 11 2.5C11 2.22386 11.2239 2 11.5 2H13V0.5C13 0.223858 13.2239 0 13.5 0ZM7.9998 2C4.6862 2 2 4.6862 2 7.9998C2 9.49431 2.54643 10.8612 3.45041 11.9116C4.18218 10.8499 5.63104 9.51974 7.99595 9.50011L8.0001 9.50008C9.89267 9.50009 11.5613 10.456 12.5506 11.91C13.4537 10.8598 13.9996 9.49355 13.9996 7.9998C13.9996 7.72366 14.2235 7.4998 14.4996 7.4998C14.7757 7.4998 14.9996 7.72366 14.9996 7.9998C14.9996 11.8657 11.8657 14.9996 7.9998 14.9996C4.13392 14.9996 1 11.8657 1 7.9998C1 4.13392 4.13392 1 7.9998 1C8.27594 1 8.4998 1.22386 8.4998 1.5C8.4998 1.77614 8.27594 2 7.9998 2ZM11.8227 12.6242C11.0281 11.3487 9.61378 10.5008 8.00216 10.5001C5.94811 10.518 4.73746 11.7366 4.17676 12.6241C5.21484 13.4833 6.54702 13.9996 7.9998 13.9996C9.45251 13.9996 10.7846 13.4833 11.8227 12.6242ZM8 4.5C7.0335 4.5 6.25 5.2835 6.25 6.25C6.25 7.2165 7.0335 8 8 8C8.9665 8 9.75 7.2165 9.75 6.25C9.75 5.2835 8.9665 4.5 8 4.5ZM5.25 6.25C5.25 4.73122 6.48122 3.5 8 3.5C9.51878 3.5 10.75 4.73122 10.75 6.25C10.75 7.76878 9.51878 9 8 9C6.48122 9 5.25 7.76878 5.25 6.25Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8.71639 1.68847C7.20728 1.49315 5.6781 1.84427 4.40534 2.67832C3.50159 3.27056 2.7695 4.07854 2.26943 5.02055C2.13995 5.26445 2.23271 5.56714 2.47662 5.69662C2.72052 5.8261 3.02321 5.73334 3.15269 5.48943C3.57431 4.69521 4.19153 4.01402 4.95345 3.51473C6.02649 2.81155 7.31573 2.51553 8.58803 2.6802C9.86034 2.84487 11.0317 3.45936 11.8904 4.41255C12.5455 5.13978 12.9856 6.02752 13.1713 6.97711L12.0682 6.38995C11.8245 6.2602 11.5217 6.35263 11.3919 6.59639C11.2622 6.84015 11.3546 7.14294 11.5984 7.27269L13.8052 8.44735C14.049 8.5771 14.3518 8.48468 14.4815 8.24091L15.6562 6.03407C15.7859 5.79031 15.6935 5.48752 15.4497 5.35777C15.206 5.22802 14.9032 5.32044 14.7734 5.5642L14.1448 6.74523C13.92 5.63395 13.4012 4.59563 12.6334 3.74325C11.6149 2.61265 10.2255 1.88379 8.71639 1.68847ZM7.51332 14.3501C9.0288 14.4875 10.5434 14.0781 11.7833 13.1959C12.5865 12.6244 13.2401 11.8789 13.7005 11.0233C13.8314 10.7801 13.7404 10.4769 13.4972 10.3461C13.254 10.2152 12.9508 10.3062 12.82 10.5494C12.4317 11.2708 11.8807 11.8993 11.2035 12.3811C10.1582 13.1249 8.88128 13.47 7.6036 13.3542C6.32592 13.2384 5.13186 12.6692 4.23732 11.7496C3.50475 10.9965 3.01266 10.0491 2.81428 9.02749L3.95178 9.68895C4.1905 9.82776 4.49655 9.74677 4.63536 9.50805C4.77417 9.26934 4.69318 8.96329 4.45447 8.82448L2.29329 7.56777C2.05458 7.42895 1.74853 7.50994 1.60972 7.74866L0.353003 9.90983C0.214191 10.1485 0.295179 10.4546 0.533896 10.5934C0.772613 10.7322 1.07866 10.6512 1.21747 10.4125L1.85313 9.31938C2.10072 10.4924 2.67584 11.5786 3.52051 12.4469C4.58154 13.5377 5.99784 14.2128 7.51332 14.3501Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"lucide lucide-square-asterisk-icon lucide-square-asterisk\"\n  >\n    <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" />\n    <path d=\"M12 8v8\" />\n    <path d=\"m8.5 14 7-4\" />\n    <path d=\"m8.5 10 7 4\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.875 9.06223L3 9.06232\"\n      stroke=\"currentColor\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M6.74537 5.31699L3 9.06236L6.74527 12.8076\"\n      stroke=\"currentColor\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M14.1423 4L14.1423 14.125\"\n      stroke=\"currentColor\"\n      stroke-linecap=\"round\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    v-if=\"visible\"\n    ref=\"target\"\n    class=\"absolute z-20 h-screen bg-surface-white transition-all duration-300 ease-in-out\"\n    :style=\"{\n      'box-shadow': '8px 0px 8px rgba(0, 0, 0, 0.1)',\n      'max-width': '350px',\n      'min-width': '350px',\n      left: 'calc(100% + 1px)',\n    }\"\n  >\n    <div class=\"flex h-screen flex-col text-ink-gray-9\">\n      <div\n        class=\"z-20 flex items-center justify-between border-b bg-surface-white px-5 py-2.5\"\n      >\n        <div class=\"text-base font-medium\">{{ __('Notifications') }}</div>\n        <div class=\"flex gap-1\">\n          <Button\n            :tooltip=\"__('Mark all as read')\"\n            :icon=\"MarkAsDoneIcon\"\n            variant=\"ghost\"\n            @click=\"markAllAsRead\"\n          />\n          <Button\n            :tooltip=\"__('Close')\"\n            icon=\"x\"\n            variant=\"ghost\"\n            @click=\"() => toggle()\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"notifications.data?.length\"\n        class=\"divide-y divide-outline-gray-modals overflow-auto text-base\"\n      >\n        <RouterLink\n          v-for=\"n in notifications.data\"\n          :key=\"n.comment\"\n          :to=\"getRoute(n)\"\n          class=\"flex cursor-pointer items-start gap-2.5 px-4 py-2.5 hover:bg-surface-gray-2\"\n          @click=\"markAsRead(n.comment || n.notification_type_doc)\"\n        >\n          <div class=\"mt-1 flex items-center gap-2.5\">\n            <div\n              class=\"size-[5px] rounded-full\"\n              :class=\"[n.read ? 'bg-transparent' : 'bg-surface-gray-7']\"\n            />\n            <WhatsAppIcon v-if=\"n.type == 'WhatsApp'\" class=\"size-7\" />\n            <UserAvatar v-else :user=\"n.from_user.name\" size=\"lg\" />\n          </div>\n          <div>\n            <div v-if=\"n.notification_text\" v-html=\"n.notification_text\" />\n            <div v-else class=\"mb-2 space-x-1 leading-5 text-ink-gray-5\">\n              <span class=\"font-medium text-ink-gray-9\">\n                {{ n.from_user.full_name }}\n              </span>\n              <span>\n                {{ __('mentioned you in {0}', [n.reference_doctype]) }}\n              </span>\n              <span class=\"font-medium text-ink-gray-9\">\n                {{ n.reference_name }}\n              </span>\n            </div>\n            <div class=\"text-sm text-ink-gray-5\">\n              {{ __(timeAgo(n.creation)) }}\n            </div>\n          </div>\n        </RouterLink>\n      </div>\n      <div\n        v-else\n        class=\"flex flex-1 flex-col items-center justify-center gap-2\"\n      >\n        <NotificationsIcon class=\"h-20 w-20 text-ink-gray-2\" />\n        <div class=\"text-lg font-medium text-ink-gray-4\">\n          {{ __('No new notifications') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport WhatsAppIcon from '@/components/Icons/WhatsAppIcon.vue'\nimport MarkAsDoneIcon from '@/components/Icons/MarkAsDoneIcon.vue'\nimport NotificationsIcon from '@/components/Icons/NotificationsIcon.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport {\n  visible,\n  notifications,\n  notificationsStore,\n} from '@/stores/notifications'\nimport { globalStore } from '@/stores/global'\nimport { timeAgo } from '@/utils'\nimport { onClickOutside } from '@vueuse/core'\nimport { capture } from '@/telemetry'\nimport { ref, onMounted, onBeforeUnmount } from 'vue'\n\nconst { $socket } = globalStore()\nconst { mark_as_read, toggle, mark_doc_as_read } = notificationsStore()\n\nconst target = ref(null)\nonClickOutside(\n  target,\n  () => {\n    if (visible.value) toggle()\n  },\n  {\n    ignore: ['#notifications-btn'],\n  },\n)\n\nfunction markAsRead(doc) {\n  capture('notification_mark_as_read')\n  mark_doc_as_read(doc)\n}\n\nfunction markAllAsRead() {\n  capture('notification_mark_all_as_read')\n  mark_as_read.reload()\n}\n\nonBeforeUnmount(() => {\n  $socket.off('crm_notification')\n})\n\nonMounted(() => {\n  $socket.on('crm_notification', () => {\n    notifications.reload()\n  })\n})\n\nfunction getRoute(notification) {\n  let params = {\n    leadId: notification.reference_name,\n  }\n  if (notification.route_name === 'Deal') {\n    params = {\n      dealId: notification.reference_name,\n    }\n  }\n\n  return {\n    name: notification.route_name,\n    params: params,\n    hash: notification.hash,\n  }\n}\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M3.37543 1.93494L4.21632 2.21494C4.35232 2.26027 4.44388 2.38738 4.44388 2.53138C4.44388 2.67538 4.35143 2.80249 4.21543 2.84783L3.37454 3.12783L3.09365 3.9696C3.04921 4.10472 2.92121 4.19716 2.7781 4.19716C2.63499 4.19716 2.50787 4.1056 2.46254 3.9696L2.18165 3.12783L1.34076 2.84783C1.20476 2.80249 1.11232 2.67538 1.11232 2.53138C1.11232 2.38738 1.20476 2.26027 1.34076 2.21494L2.18165 1.93494L2.46254 1.09316C2.55321 0.82116 3.00387 0.82116 3.09454 1.09316L3.37543 1.93494ZM8.44852 1.33394C8.3643 1.16325 8.19046 1.05518 8.00012 1.05518C7.80978 1.05518 7.63595 1.16325 7.55173 1.33394L5.67697 5.13368L1.48388 5.74214C1.29552 5.76947 1.13901 5.90137 1.08017 6.08238C1.02133 6.26339 1.07036 6.46211 1.20665 6.59497L4.24065 9.55281L3.52421 13.7284C3.49203 13.916 3.56913 14.1056 3.7231 14.2174C3.87706 14.3293 4.08119 14.3441 4.24966 14.2555L8.11188 12.2253C8.35631 12.0968 8.4503 11.7945 8.32181 11.5501C8.19333 11.3057 7.89102 11.2117 7.64659 11.3402L4.68114 12.899L5.2707 9.46284C5.29853 9.30065 5.24477 9.13514 5.12693 9.02027L2.63025 6.58626L6.08082 6.08555C6.24373 6.06191 6.38457 5.95959 6.45741 5.81196L8.00012 2.6852L9.54284 5.81196C9.61568 5.95959 9.75652 6.06191 9.91943 6.08555L13.37 6.58625L11.6235 8.2887C11.4258 8.48146 11.4218 8.79802 11.6145 8.99575C11.8073 9.19349 12.1239 9.19752 12.3216 9.00476L14.7936 6.59498C14.9299 6.46212 14.9789 6.2634 14.9201 6.08239C14.8612 5.90138 14.7047 5.76947 14.5164 5.74214L10.3233 5.13368L8.44852 1.33394ZM13.4744 11.9911L12.3517 11.6168L11.9775 10.4942C11.8557 10.1315 11.2557 10.1315 11.1339 10.4942L10.7597 11.6168L9.63702 11.9911C9.45569 12.0515 9.33302 12.2213 9.33302 12.4124C9.33302 12.6035 9.45569 12.7733 9.63702 12.8337L10.7597 13.2079L11.1339 14.3306C11.1944 14.5119 11.365 14.6346 11.5561 14.6346C11.7472 14.6346 11.917 14.5119 11.9784 14.3306L12.3526 13.2079L13.4752 12.8337C13.6566 12.7733 13.7792 12.6035 13.7792 12.4124C13.7792 12.2213 13.6566 12.0515 13.4752 11.9911H13.4744ZM13.3333 2.88883C13.3333 3.25702 13.0349 3.5555 12.6667 3.5555C12.2985 3.5555 12 3.25702 12 2.88883C12 2.52064 12.2985 2.22217 12.6667 2.22217C13.0349 2.22217 13.3333 2.52064 13.3333 2.88883Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M11.6611 8.2289V9.77773H7.88672V11.9066H11.999V13.4545H6V8.2289H11.6611ZM11.9512 4.6V6.14883H6V4.6H11.9512Z\"\n      fill=\"currentColor\"\n    />\n    <rect x=\"1.5\" y=\"1.5\" width=\"15\" height=\"15\" rx=\"3.5\" stroke=\"currentColor\" />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <rect x=\"1.5\" y=\"1.5\" width=\"15\" height=\"15\" rx=\"3.5\" stroke=\"currentColor\" />\n    <path\n      d=\"M13.7928 8.0619V5H4.29999V6.39494H12.3621V7.72014C11.787 7.88056 11.37 8.39669 11.37 9.00349C11.37 9.61029 11.787 10.1194 12.3621 10.2799V11.6051L5.79999 11.6051V7.96425H4.29999V13H13.8V9.9381L12.9444 9.34525V8.66173L13.8 8.06888L13.7928 8.0619Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n    class=\"lucide lucide-settings2-icon lucide-settings-2\"\n  >\n    <path d=\"M14 17H5\" />\n    <path d=\"M19 7h-9\" />\n    <circle cx=\"17\" cy=\"17\" r=\"3\" />\n    <circle cx=\"7\" cy=\"7\" r=\"3\" />\n  </svg>\n</template>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{ title: __('Add Existing User') }\"\n    @close=\"show = false\"\n  >\n    <template #body-content>\n      <div class=\"flex gap-1 border rounded mb-4 p-2 text-ink-gray-5\">\n        <FeatherIcon name=\"info\" class=\"size-3.5 mt-0.5\" />\n        <p class=\"text-p-sm\">\n          {{\n            __(\n              'Add existing system users to this CRM. Assign them a role to grant access with their current credentials.',\n            )\n          }}\n        </p>\n      </div>\n\n      <label class=\"block text-xs text-ink-gray-5 mb-1.5\">\n        {{ __('Users') }}\n      </label>\n\n      <div class=\"p-2 group bg-surface-gray-2 hover:bg-surface-gray-3 rounded\">\n        <EmailMultiSelect\n          v-if=\"users?.data?.crmUsers?.length\"\n          class=\"flex-1\"\n          inputClass=\"!bg-surface-gray-2 hover:!bg-surface-gray-3 group-hover:!bg-surface-gray-3\"\n          :placeholder=\"__('john@doe.com')\"\n          v-model=\"newUsers\"\n          :validate=\"validateEmail\"\n          :fetchUsers=\"true\"\n          :existingEmails=\"[\n            ...users.data.crmUsers.map((user) => user.name),\n            'admin@example.com',\n          ]\"\n          :error-message=\"\n            (value) => __('{0} is an invalid email address', [value])\n          \"\n          :emptyPlaceholder=\"__('No users found')\"\n        />\n      </div>\n      <FormControl\n        type=\"select\"\n        class=\"mt-4\"\n        v-model=\"role\"\n        :label=\"__('Role')\"\n        :options=\"roleOptions\"\n        :description=\"description\"\n      />\n    </template>\n    <template #actions>\n      <div class=\"flex justify-end gap-2\">\n        <Button\n          variant=\"solid\"\n          :label=\"__('Add')\"\n          :disabled=\"!newUsers.length\"\n          @click=\"addNewUser.submit()\"\n          :loading=\"addNewUser.loading\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport EmailMultiSelect from '@/components/Controls/EmailMultiSelect.vue'\nimport { validateEmail } from '@/utils'\nimport { usersStore } from '@/stores/users'\nimport { createResource, toast } from 'frappe-ui'\nimport { ref, computed } from 'vue'\n\nconst { users, isAdmin, isManager } = usersStore()\n\nconst show = defineModel()\n\nconst newUsers = ref([])\nconst role = ref('Sales User')\n\nconst description = computed(() => {\n  return {\n    'System Manager':\n      'Can manage all aspects of the CRM, including user management, customizations and settings.',\n    'Sales Manager':\n      'Can manage and invite new users, and create public & private views (reports).',\n    'Sales User':\n      'Can work with leads and deals and create private views (reports).',\n  }[role.value]\n})\n\nconst roleOptions = computed(() => {\n  return [\n    { value: 'Sales User', label: __('Sales User') },\n    ...(isManager() ? [{ value: 'Sales Manager', label: __('Manager') }] : []),\n    ...(isAdmin() ? [{ value: 'System Manager', label: __('Admin') }] : []),\n  ]\n})\n\nconst addNewUser = createResource({\n  url: 'crm.api.user.add_existing_users',\n  makeParams: () => ({\n    users: JSON.stringify(newUsers.value),\n    role: role.value,\n  }),\n  onSuccess: () => {\n    toast.success(__('Users added successfully'))\n    newUsers.value = []\n    show.value = false\n    users.reload()\n  },\n  onError: (error) => {\n    toast.error(error.messages[0] || __('Failed to add users'))\n  },\n})\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-6 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between px-2 pt-2\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Users') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __(\n              'Manage CRM users by adding or inviting them, and assign roles to control their access and permissions',\n            )\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Dropdown\n          :options=\"[\n            {\n              label: __('Add Existing User'),\n              onClick: () => (showAddExistingModal = true),\n            },\n            {\n              label: __('Invite New User'),\n              onClick: () => (activeSettingsPage = 'Invite User'),\n            },\n          ]\"\n          :button=\"{\n            label: __('New'),\n            iconLeft: 'plus',\n            variant: 'solid',\n          }\"\n          placement=\"right\"\n        />\n      </div>\n    </div>\n\n    <!-- loading state -->\n    <div v-if=\"users.loading\" class=\"flex mt-28 justify-between w-full h-full\">\n      <Button\n        :loading=\"users.loading\"\n        variant=\"ghost\"\n        class=\"w-full\"\n        size=\"2xl\"\n      />\n    </div>\n\n    <!-- Empty State -->\n    <div\n      v-if=\"!users.loading && users.data?.crmUsers?.length == 1\"\n      class=\"flex justify-between w-full h-full\"\n    >\n      <div\n        class=\"text-ink-gray-4 border border-dashed rounded w-full flex items-center justify-center\"\n      >\n        {{ __('No users found') }}\n      </div>\n    </div>\n\n    <!-- Users List -->\n    <div\n      class=\"flex flex-col overflow-hidden\"\n      v-if=\"!users.loading && users.data?.crmUsers?.length > 1\"\n    >\n      <div\n        v-if=\"users.data?.crmUsers?.length > 10\"\n        class=\"flex items-center justify-between mb-4 px-2 pt-0.5\"\n      >\n        <TextInput\n          ref=\"searchRef\"\n          v-model=\"search\"\n          :placeholder=\"__('Search user')\"\n          class=\"w-1/3\"\n          :debounce=\"300\"\n        >\n          <template #prefix>\n            <FeatherIcon name=\"search\" class=\"h-4 w-4 text-ink-gray-6\" />\n          </template>\n        </TextInput>\n        <FormControl\n          type=\"select\"\n          v-model=\"currentRole\"\n          :options=\"[\n            { label: __('All'), value: 'All' },\n            { label: __('Admin'), value: 'System Manager' },\n            { label: __('Manager'), value: 'Sales Manager' },\n            { label: __('Sales User'), value: 'Sales User' },\n          ]\"\n        />\n      </div>\n      <ul class=\"divide-y divide-outline-gray-modals overflow-y-auto px-2\">\n        <template v-for=\"user in usersList\" :key=\"user.name\">\n          <li class=\"flex items-center justify-between py-2\">\n            <div class=\"flex items-center\">\n              <Avatar\n                :image=\"user.user_image\"\n                :label=\"user.full_name\"\n                size=\"xl\"\n              />\n              <div class=\"flex flex-col ml-3\">\n                <div class=\"flex items-center text-p-base text-ink-gray-8\">\n                  {{ user.full_name }}\n                </div>\n                <div class=\"text-p-sm text-ink-gray-5\">\n                  {{ user.name }}\n                </div>\n              </div>\n            </div>\n            <div class=\"flex gap-2 items-center flex-row-reverse\">\n              <Dropdown\n                :options=\"getMoreOptions(user)\"\n                :button=\"{\n                  icon: 'more-horizontal',\n                  onblur: (e) => {\n                    e.stopPropagation()\n                    confirmRemove = false\n                  },\n                }\"\n                placement=\"right\"\n              />\n              <Tooltip\n                v-if=\"isManager() && user.role == 'System Manager'\"\n                :text=\"__('Cannot change role of user with Admin access')\"\n              >\n                <Button :label=\"__('Admin')\" icon-left=\"shield\" />\n              </Tooltip>\n              <Dropdown\n                v-else\n                :options=\"getDropdownOptions(user)\"\n                :button=\"{\n                  label: roleMap[user.role],\n                  iconRight: 'chevron-down',\n                  iconLeft:\n                    user.role === 'System Manager'\n                      ? 'shield'\n                      : user.role === 'Sales Manager'\n                        ? 'briefcase'\n                        : 'user-check',\n                }\"\n                placement=\"right\"\n              />\n            </div>\n          </li>\n        </template>\n        <!-- Load More Button -->\n        <div\n          v-if=\"!users.loading && users.hasNextPage\"\n          class=\"flex justify-center\"\n        >\n          <Button\n            class=\"mt-3.5 p-2\"\n            @click=\"() => users.next()\"\n            :loading=\"users.loading\"\n            :label=\"__('Load More')\"\n            icon-left=\"refresh-cw\"\n          />\n        </div>\n      </ul>\n    </div>\n  </div>\n  <AddExistingUserModal\n    v-if=\"showAddExistingModal\"\n    v-model=\"showAddExistingModal\"\n  />\n</template>\n\n<script setup>\nimport AddExistingUserModal from '@/components/Modals/AddExistingUserModal.vue'\nimport { activeSettingsPage } from '@/composables/settings'\nimport { usersStore } from '@/stores/users'\nimport { DropdownOption } from '@/utils'\nimport {\n  Dropdown,\n  Avatar,\n  TextInput,\n  toast,\n  call,\n  FeatherIcon,\n  Tooltip,\n} from 'frappe-ui'\nimport { ref, computed, onMounted } from 'vue'\n\nconst { users, isAdmin, isManager } = usersStore()\n\nconst showAddExistingModal = ref(false)\nconst searchRef = ref(null)\nconst search = ref('')\nconst currentRole = ref('All')\n\nconst roleMap = {\n  'System Manager': __('Admin'),\n  'Sales Manager': __('Manager'),\n  'Sales User': __('Sales User'),\n}\n\nconst usersList = computed(() => {\n  let filteredUsers =\n    users.data?.crmUsers?.filter((user) => user.name !== 'Administrator') || []\n\n  return filteredUsers\n    .filter(\n      (user) =>\n        user.name?.includes(search.value) ||\n        user.full_name?.includes(search.value),\n    )\n    .filter((user) => {\n      if (currentRole.value === 'All') return true\n      return user.role === currentRole.value\n    })\n})\n\nconst confirmRemove = ref(false)\n\nfunction getMoreOptions(user) {\n  let options = [\n    {\n      label: __('Remove'),\n      icon: 'trash-2',\n      onClick: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        confirmRemove.value = true\n      },\n      condition: () => !confirmRemove.value,\n    },\n    {\n      label: __('Confirm Remove'),\n      icon: 'trash-2',\n      theme: 'red',\n      onClick: () => removeUser(user, true),\n      condition: () => confirmRemove.value,\n    },\n  ]\n\n  return options.filter((option) => option.condition?.() || true)\n}\n\nfunction getDropdownOptions(user) {\n  let options = [\n    {\n      label: __('Admin'),\n      component: () =>\n        DropdownOption({\n          option: __('Admin'),\n          icon: 'shield',\n          selected: user.role === 'System Manager',\n        }),\n      onClick: () => updateRole(user, 'System Manager'),\n      condition: () => isAdmin(),\n    },\n    {\n      label: __('Manager'),\n      component: () =>\n        DropdownOption({\n          option: __('Manager'),\n          icon: 'briefcase',\n          selected: user.role === 'Sales Manager',\n        }),\n      onClick: () => updateRole(user, 'Sales Manager'),\n      condition: () => isManager(),\n    },\n    {\n      label: __('Sales User'),\n      component: () =>\n        DropdownOption({\n          option: __('Sales User'),\n          icon: 'user-check',\n          selected: user.role === 'Sales User',\n        }),\n      onClick: () => updateRole(user, 'Sales User'),\n    },\n  ]\n\n  return options.filter((option) => option.condition?.() || true)\n}\n\nfunction updateRole(user, newRole) {\n  if (user.role === newRole) return\n\n  call('crm.api.user.update_user_role', {\n    user: user.name,\n    new_role: newRole,\n  }).then(() => {\n    toast.success(\n      __('{0} has been granted {1} access', [user.full_name, roleMap[newRole]]),\n    )\n    users.reload()\n  })\n}\n\nfunction removeUser(user) {\n  call('crm.api.user.remove_user', {\n    user: user.name,\n  }).then(() => {\n    toast.success(__('User {0} has been removed', [user.full_name]))\n    users.reload()\n  })\n}\n\nonMounted(() => {\n  if (searchRef.value) {\n    searchRef.value.el.focus()\n  }\n})\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 py-8 px-6 text-ink-gray-8\">\n    <div class=\"flex px-2 justify-between\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Send invites to') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __(\n              'Invite users to access CRM. Specify their roles to control access and permissions',\n            )\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('Send Invites')\"\n          variant=\"solid\"\n          :disabled=\"!invitees.length\"\n          @click=\"inviteByEmail.submit()\"\n          :loading=\"inviteByEmail.loading\"\n        />\n      </div>\n    </div>\n    <div class=\"flex-1 flex flex-col px-2 gap-8 overflow-y-auto\">\n      <div>\n        <FormControl\n          type=\"textarea\"\n          label=\"Invite by email\"\n          placeholder=\"user1@example.com, user2@example.com, ...\"\n          @input=\"updateInvitees($event.target.value)\"\n          :debounce=\"100\"\n          :disabled=\"inviteByEmail.loading\"\n          :description=\"\n            __(\n              'You can invite multiple users by comma separating their email addresses',\n            )\n          \"\n        />\n        <div\n          v-if=\"userExistMessage || inviteeExistMessage\"\n          class=\"text-xs text-ink-red-3 mt-1.5\"\n        >\n          {{ userExistMessage || inviteeExistMessage }}\n        </div>\n        <FormControl\n          type=\"select\"\n          class=\"mt-4\"\n          v-model=\"role\"\n          :label=\"__('Invite as')\"\n          :options=\"roleOptions\"\n          :description=\"description\"\n        />\n      </div>\n      <template v-if=\"pendingInvitations.data?.length && !invitees.length\">\n        <div class=\"flex flex-col gap-4\">\n          <div\n            class=\"flex items-center justify-between text-base font-semibold\"\n          >\n            <div>{{ __('Pending Invites') }}</div>\n          </div>\n          <ul class=\"flex flex-col gap-1\">\n            <li\n              class=\"flex items-center justify-between px-2 py-1 rounded-lg bg-surface-gray-2\"\n              v-for=\"user in pendingInvitations.data\"\n              :key=\"user.name\"\n            >\n              <div class=\"text-base\">\n                <span class=\"text-ink-gray-8\">\n                  {{ user.email }}\n                </span>\n                <span class=\"text-ink-gray-5\">\n                  ({{ roleMap[user.role] }})\n                </span>\n              </div>\n              <div>\n                <Button\n                  :tooltip=\"__('Delete invitation')\"\n                  icon=\"x\"\n                  variant=\"ghost\"\n                  :loading=\"\n                    pendingInvitations.delete.loading &&\n                    pendingInvitations.delete.params.name === user.name\n                  \"\n                  @click=\"pendingInvitations.delete.submit(user.name)\"\n                />\n              </div>\n            </li>\n          </ul>\n        </div>\n      </template>\n    </div>\n    <ErrorMessage :message=\"error\" />\n  </div>\n</template>\n<script setup>\nimport { validateEmail, convertArrayToString } from '@/utils'\nimport { usersStore } from '@/stores/users'\nimport { createListResource, createResource, FormControl } from 'frappe-ui'\nimport { useOnboarding } from 'frappe-ui/frappe'\nimport { ref, computed } from 'vue'\n\nconst { updateOnboardingStep } = useOnboarding('frappecrm')\nconst { users, isAdmin, isManager } = usersStore()\n\nconst invitees = ref([])\nconst role = ref('Sales User')\nconst error = ref(null)\n\nconst userExistMessage = computed(() => {\n  const inviteesSet = new Set(invitees.value)\n  if (!inviteesSet.size) return null\n\n  if (!users.data?.crmUsers?.length) return null\n  const existingEmails = users.data.crmUsers.map((user) => user.name)\n  const existingUsersSet = new Set(existingEmails)\n\n  const existingInvitees = inviteesSet.intersection(existingUsersSet)\n  if (existingInvitees.size === 0) return null\n\n  return __('User with email {0} already exists', [\n    Array.from(existingInvitees).join(', '),\n  ])\n})\n\nconst inviteeExistMessage = computed(() => {\n  const inviteesSet = new Set(invitees.value)\n  if (!inviteesSet.size) return null\n\n  if (!pendingInvitations.data?.length) return null\n  const existingEmails = pendingInvitations.data.map((user) => user.email)\n  const existingUsersSet = new Set(existingEmails)\n\n  const existingInvitees = inviteesSet.intersection(existingUsersSet)\n  if (existingInvitees.size === 0) return null\n\n  return __('User with email {0} already invited', [\n    Array.from(existingInvitees).join(', '),\n  ])\n})\n\nconst description = computed(() => {\n  return {\n    'System Manager':\n      'Can manage all aspects of the CRM, including user management, customizations and settings.',\n    'Sales Manager':\n      'Can manage and invite new users, and create public & private views (reports).',\n    'Sales User':\n      'Can work with leads and deals and create private views (reports).',\n  }[role.value]\n})\n\nconst roleOptions = computed(() => {\n  return [\n    { value: 'Sales User', label: __('Sales User') },\n    ...(isManager() ? [{ value: 'Sales Manager', label: __('Manager') }] : []),\n    ...(isAdmin() ? [{ value: 'System Manager', label: __('Admin') }] : []),\n  ]\n})\n\nconst roleMap = {\n  'Sales User': __('Sales User'),\n  'Sales Manager': __('Manager'),\n  'System Manager': __('Admin'),\n}\n\nconst inviteByEmail = createResource({\n  url: 'crm.api.invite_by_email',\n  makeParams() {\n    return {\n      emails: convertArrayToString(invitees.value),\n      role: role.value,\n    }\n  },\n  onSuccess(data) {\n    if (data?.existing_invites?.length) {\n      error.value = __('User with email {0} already exists', [\n        data.existing_invites.join(', '),\n      ])\n    } else {\n      role.value = 'Sales User'\n      error.value = null\n    }\n\n    invitees.value = []\n    pendingInvitations.reload()\n    updateOnboardingStep('invite_your_team')\n  },\n  onError(err) {\n    error.value = err?.messages?.[0]\n  },\n})\n\nconst pendingInvitations = createListResource({\n  type: 'list',\n  doctype: 'CRM Invitation',\n  filters: { status: 'Pending' },\n  fields: ['name', 'email', 'role'],\n  pageLength: 999,\n  auto: true,\n})\n\nfunction updateInvitees(value) {\n  const emails = value\n    .split(',')\n    .map((email) => email.trim())\n    .filter((email) => validateEmail(email))\n  invitees.value = emails\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-8 text-ink-gray-8\">\n    <div class=\"flex-1 flex flex-col gap-6 mt-2 overflow-y-auto\">\n      <div v-if=\"profile\" class=\"flex w-full items-center justify-between\">\n        <FileUploader\n          @success=\"(file) => updateImage(file.file_url)\"\n          :validateFile=\"validateIsImageFile\"\n        >\n          <template #default=\"{ openFileSelector, error: _error }\">\n            <div class=\"flex items-center gap-4\">\n              <div class=\"group relative !size-[66px]\">\n                <Avatar\n                  class=\"!size-16\"\n                  :image=\"profile.user_image\"\n                  :label=\"profile.full_name\"\n                />\n                <component\n                  :is=\"profile.user_image ? Dropdown : 'div'\"\n                  v-bind=\"\n                    profile.user_image\n                      ? {\n                          options: [\n                            {\n                              icon: 'upload',\n                              label: profile.user_image\n                                ? __('Change image')\n                                : __('Upload image'),\n                              onClick: openFileSelector,\n                            },\n                            {\n                              icon: 'trash-2',\n                              label: __('Remove image'),\n                              onClick: () => updateImage(),\n                            },\n                          ],\n                        }\n                      : { onClick: openFileSelector }\n                  \"\n                  class=\"!absolute bottom-0 left-0 right-0\"\n                >\n                  <div\n                    class=\"z-1 absolute bottom-0.5 left-0 right-0.5 flex h-9 cursor-pointer items-center justify-center rounded-b-full bg-black bg-opacity-40 pt-3 opacity-0 duration-300 ease-in-out group-hover:opacity-100\"\n                    style=\"\n                      -webkit-clip-path: inset(12px 0 0 0);\n                      clip-path: inset(12px 0 0 0);\n                    \"\n                  >\n                    <CameraIcon class=\"size-4 cursor-pointer text-white\" />\n                  </div>\n                </component>\n              </div>\n              <div class=\"flex flex-col gap-1\">\n                <span class=\"text-2xl font-semibold text-ink-gray-8\">\n                  {{ profile.full_name }}\n                </span>\n                <span class=\"text-base text-ink-gray-7\">\n                  {{ profile.email }}\n                </span>\n                <ErrorMessage :message=\"__(_error)\" />\n              </div>\n            </div>\n          </template>\n        </FileUploader>\n        <Button\n          :label=\"__('Change Password')\"\n          icon-left=\"lock\"\n          @click=\"showChangePasswordModal = true\"\n        />\n        <ChangePasswordModal\n          v-if=\"showChangePasswordModal\"\n          v-model=\"showChangePasswordModal\"\n        />\n      </div>\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"flex justify-between gap-4\">\n          <FormControl\n            class=\"w-full\"\n            :label=\"__('First name')\"\n            v-model=\"profile.first_name\"\n          />\n          <FormControl\n            class=\"w-full\"\n            :label=\"__('Last name')\"\n            v-model=\"profile.last_name\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"flex justify-between items-center\">\n      <div>\n        <ErrorMessage :message=\"error\" />\n      </div>\n      <Button\n        variant=\"solid\"\n        :label=\"__('Update')\"\n        :disabled=\"!dirty\"\n        :loading=\"setUser.loading\"\n        @click=\"setUser.submit()\"\n      />\n    </div>\n  </div>\n</template>\n<script setup>\nimport ChangePasswordModal from '@/components/Modals/ChangePasswordModal.vue'\nimport CameraIcon from '@/components/Icons/CameraIcon.vue'\nimport { usersStore } from '@/stores/users'\nimport { validateIsImageFile } from '@/utils'\nimport {\n  Dropdown,\n  FileUploader,\n  Avatar,\n  createResource,\n  toast,\n} from 'frappe-ui'\nimport { ref, computed, onMounted } from 'vue'\n\nconst { getUser, users } = usersStore()\n\nconst user = computed(() => getUser() || {})\n\nconst profile = ref({})\nconst error = ref('')\nconst showChangePasswordModal = ref(false)\n\nconst dirty = computed(() => {\n  return (\n    profile.value.first_name !== user.value.first_name ||\n    profile.value.last_name !== user.value.last_name\n  )\n})\n\nconst setUser = createResource({\n  url: 'frappe.client.set_value',\n  makeParams() {\n    return {\n      doctype: 'User',\n      name: user.value.name,\n      fieldname: {\n        first_name: profile.value.first_name,\n        last_name: profile.value.last_name,\n        user_image: profile.value.user_image,\n      },\n    }\n  },\n  onSuccess: () => {\n    error.value = ''\n    toast.success(__('Profile updated successfully'))\n    users.reload()\n  },\n  onError: (err) => {\n    error.value = err.messages[0] || __('Failed to update profile')\n  },\n})\n\nfunction updateImage(fileUrl = '') {\n  profile.value.user_image = fileUrl\n  setUser.submit()\n}\n\nonMounted(() => {\n  profile.value = { ...user.value }\n})\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6\">\n    <div class=\"flex justify-between\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2\n          class=\"flex gap-2 text-xl font-semibold leading-none h-5 text-ink-gray-8\"\n        >\n          {{ title || __(doctype) }}\n          <Badge\n            v-if=\"data.isDirty\"\n            :label=\"__('Not Saved')\"\n            variant=\"subtle\"\n            theme=\"orange\"\n          />\n        </h2>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :loading=\"data.save.loading\"\n          :label=\"__('Update')\"\n          variant=\"solid\"\n          @click=\"data.save.submit()\"\n        />\n      </div>\n    </div>\n    <div v-if=\"!data.get.loading\" class=\"flex-1 overflow-y-auto\">\n      <FieldLayout\n        v-if=\"data?.doc && tabs\"\n        :tabs=\"tabs\"\n        :data=\"data.doc\"\n        :doctype=\"doctype\"\n      />\n    </div>\n    <div v-else class=\"flex flex-1 items-center justify-center\">\n      <Spinner class=\"size-8\" />\n    </div>\n    <ErrorMessage :message=\"data.save.error\" />\n  </div>\n</template>\n<script setup>\nimport FieldLayout from '@/components/FieldLayout/FieldLayout.vue'\nimport {\n  createDocumentResource,\n  createResource,\n  Spinner,\n  Badge,\n  toast,\n  ErrorMessage,\n} from 'frappe-ui'\nimport { getRandom } from '@/utils'\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    required: true,\n  },\n  title: {\n    type: String,\n    default: '',\n  },\n  successMessage: {\n    type: String,\n    default: 'Updated Successfully',\n  },\n})\n\nconst fields = createResource({\n  url: 'crm.api.doc.get_fields',\n  cache: ['fields', props.doctype],\n  params: {\n    doctype: props.doctype,\n    allow_all_fieldtypes: true,\n  },\n  auto: true,\n})\n\nconst data = createDocumentResource({\n  doctype: props.doctype,\n  name: props.doctype,\n  fields: ['*'],\n  auto: true,\n  setValue: {\n    onSuccess: () => {\n      toast.success(__(props.successMessage))\n    },\n    onError: (err) => {\n      toast.error(err.message + ': ' + err.messages[0])\n    },\n  },\n})\n\nconst tabs = computed(() => {\n  if (!fields.data) return []\n  let _tabs = []\n  let fieldsData = fields.data\n\n  if (fieldsData[0].type != 'Tab Break') {\n    let _sections = []\n    if (fieldsData[0].type != 'Section Break') {\n      _sections.push({\n        name: 'first_section',\n        columns: [{ name: 'first_column', fields: [] }],\n      })\n    }\n    _tabs.push({ name: 'first_tab', sections: _sections })\n  }\n\n  fieldsData.forEach((field) => {\n    let last_tab = _tabs[_tabs.length - 1]\n    let _sections = _tabs.length ? last_tab.sections : []\n    if (field.fieldtype === 'Tab Break') {\n      _tabs.push({\n        label: field.label,\n        name: field.fieldname,\n        sections: [\n          {\n            name: 'section_' + getRandom(),\n            columns: [{ name: 'column_' + getRandom(), fields: [] }],\n          },\n        ],\n      })\n    } else if (field.fieldtype === 'Section Break') {\n      _sections.push({\n        label: field.label,\n        name: field.fieldname,\n        hideBorder: field.hide_border,\n        columns: [{ name: 'column_' + getRandom(), fields: [] }],\n      })\n    } else if (field.fieldtype === 'Column Break') {\n      _sections[_sections.length - 1].columns.push({\n        name: field.fieldname,\n        fields: [],\n      })\n    } else {\n      let last_section = _sections[_sections.length - 1]\n      let last_column = last_section.columns[last_section.columns.length - 1]\n      last_column.fields.push(field)\n    }\n  })\n\n  return _tabs\n})\n</script>\n","<template>\n  <SettingsPage doctype=\"WhatsApp Settings\" class=\"p-8\" />\n</template>\n<script setup>\nimport SettingsPage from '@/components/Settings/SettingsPage.vue'\n</script>","<template>\n  <SettingsPage\n    doctype=\"ERPNext CRM Settings\"\n    :title=\"__('ERPNext settings')\"\n    :successMessage=\"__('ERPNext settings updated')\"\n    class=\"p-8\"\n  />\n</template>\n<script setup>\nimport SettingsPage from '@/components/Settings/SettingsPage.vue'\n</script>","<template>\n  <SettingsPage\n    doctype=\"Helpdesk CRM Settings\"\n    :title=\"__('Helpdesk settings')\"\n    :successMessage=\"__('Helpdesk settings updated')\"\n    class=\"p-8\"\n  />\n</template>\n<script setup>\nimport SettingsPage from '@/components/Settings/SettingsPage.vue'\n</script>","<template>\n      <div class=\"flex h-full flex-col gap-6 text-ink-gray-8\">\n        <!-- Header -->\n        <div class=\"flex justify-between px-2 pt-2\">\n            <div class=\"flex flex-col gap-1 w-9/12\">\n                <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5 items-center\">\n                    {{ __('Lead sources') }}\n                    <Badge theme=\"orange\" size=\"sm\">Beta</Badge>\n                </h2>\n                <p class=\"text-p-base text-ink-gray-6\">\n                {{\n                    __(\n                    'Add, edit, and manage sources for automatic lead syncing to your CRM',\n                    )\n                }}\n                </p>\n            </div>\n            <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n                <Button\n                    :label=\"__('New')\"\n                    icon-left=\"plus\"\n                    variant=\"solid\"\n                    @click=\"emit('updateStep', 'new-source')\"\n                />\n            </div>\n        </div>\n\n        <!-- loading state -->\n        <div\n        v-if=\"sources.loading\"\n        class=\"flex mt-28 justify-between w-full h-full\"\n        >\n            <Button\n                :loading=\"sources.loading\"\n                variant=\"ghost\"\n                class=\"w-full\"\n                size=\"2xl\"\n            />\n        </div>\n        \n        <!-- Empty State -->\n        <div\n        v-if=\"!sources.loading && !sources.data?.length\"\n        class=\"flex justify-between w-full h-full\"\n        >\n            <div\n                class=\"text-ink-gray-4 border border-dashed rounded w-full flex items-center justify-center\"\n            >\n                {{ __('No lead sources found') }}\n            </div>\n        </div>\n\n        <!-- Lead source list -->\n        <div\n        class=\"flex flex-col overflow-hidden\"\n        v-if=\"!sources.loading && sources.data?.length\"\n        >\n        <div class=\"flex items-center py-2 px-4 text-sm text-ink-gray-5\">\n            <div class=\"w-4/6\">{{ __('Name') }}</div>\n            <div class=\"w-1/6\">{{ __('Source') }}</div>\n            <div class=\"w-1/6\">{{ __('Enabled') }}</div>\n        </div>\n        <div class=\"h-px border-t mx-4 border-outline-gray-modals\" />\n        <ul class=\"overflow-y-auto px-2\">\n            <template v-for=\"(source, i) in sourcesList\" :key=\"source.name\">\n            <li\n                class=\"flex items-center justify-between p-3 cursor-pointer hover:bg-surface-menu-bar rounded\"\n                @click=\"() => emit('updateStep', 'edit-source', { ...source })\"\n            >\n                <div class=\"flex flex-col w-4/6 pr-5\">\n                    <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n                        {{ source.name }}\n                    </div>\n                </div>\n\n                <div class=\"flex flex-col w-1/6 pr-5\">\n                    <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n                        {{ source.type }}\n                    </div>\n                </div>\n\n                <div class=\"flex items-center justify-between w-1/6\">\n                    <Switch\n                        size=\"sm\"\n                        v-model=\"source.enabled\"\n                        @update:model-value=\"toggleLeadSyncSourceEnabled(source)\"\n                        @click.stop\n                    />\n                    <Dropdown\n                        class=\"\"\n                        :options=\"getDropdownOptions(source)\"\n                        placement=\"right\"\n                        :button=\"{\n                        icon: 'more-horizontal',\n                        variant: 'ghost',\n                        onblur: (e) => {\n                            e.stopPropagation()\n                            confirmDelete = false\n                        },\n                        }\"\n                        @click.stop\n                    />\n                </div>\n            </li>\n            <div\n                v-if=\"sourcesList.length !== i + 1\"\n                class=\"h-px border-t mx-2 border-outline-gray-modals\"\n            />\n            </template>\n            <!-- Load More Button -->\n            <div\n            v-if=\"!sources.loading && sources.hasNextPage\"\n            class=\"flex justify-center\"\n            >\n           \n            <Button\n                class=\"mt-3.5 p-2\"\n                @click=\"() => sources.next()\"\n                :loading=\"sources.loading\"\n                :label=\"__('Load More')\"\n                icon-left=\"refresh-cw\"\n            />\n            </div>\n        </ul>\n        </div>\n      </div>\n</template>\n<script setup>\nimport {\n\tSwitch,\n\tDropdown,\n\ttoast,\n    Badge,\n} from \"frappe-ui\";\nimport { ref, computed, inject } from \"vue\";\n\nconst emit = defineEmits([\"updateStep\"]);\n\nconst sources = inject(\"sources\");\n\nconst search = ref(\"\");\nconst confirmDelete = ref(false);\n\nconst sourcesList = computed(() => {\n\tlet list = sources.data || [];\n\tif (search.value) {\n\t\tlist = list.filter(\n\t\t\t(source) =>\n\t\t\t\tsource.name.toLowerCase().includes(search.value.toLowerCase()) ||\n\t\t\t\tsource.subject.toLowerCase().includes(search.value.toLowerCase()),\n\t\t);\n\t}\n\treturn list;\n});\n\nfunction toggleLeadSyncSourceEnabled(source) {\n  sources.setValue.submit(\n    {\n      name: source.name,\n      enabled: source.enabled ? 1 : 0,\n    },\n    {\n      onSuccess: () => {\n        toast.success(\n          source.enabled\n            ? __('Source enabled successfully')\n            : __('Source disabled successfully'),\n        )\n      },\n      onError: (error) => {\n        toast.error(error.messages[0] || __('Failed to update source'))\n        // Revert the change if there was an error\n        source.enabled = !source.enabled\n      },\n    },\n  )\n}\n\nfunction deleteLeadSource(source) {\n\tconfirmDelete.value = false;\n\tsources.delete.submit(source.name, {\n\t\tonSuccess: () => {\n\t\t\ttoast.success(__(\"Lead Sync Source deleted successfully\"));\n\t\t},\n\t\tonError: (error) => {\n\t\t\ttoast.error(error.messages[0] || __(\"Failed to delete Lead Sync Source\"));\n\t\t},\n\t});\n}\n\nfunction getDropdownOptions(source) {\n\tlet options = [\n\t\t{\n\t\t\tlabel: __(\"Duplicate\"),\n\t\t\ticon: \"copy\",\n\t\t\tonClick: () => emit(\"updateStep\", \"new-source\", { ...source }),\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Delete\"),\n\t\t\ticon: \"trash-2\",\n\t\t\tonClick: (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tconfirmDelete.value = true;\n\t\t\t},\n\t\t\tcondition: () => !confirmDelete.value,\n\t\t},\n\t\t{\n\t\t\tlabel: __(\"Confirm Delete\"),\n\t\t\ticon: \"trash-2\",\n\t\t\ttheme: \"red\",\n\t\t\tonClick: () => deleteLeadSource(source),\n\t\t\tcondition: () => confirmDelete.value,\n\t\t},\n\t];\n\n\treturn options;\n}\n</script>","<template>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\" version=\"1.1\" id=\"svg9\"\n        width=\"666.66669\" height=\"666.66718\" viewBox=\"0 0 666.66668 666.66717\">\n        <defs id=\"defs13\">\n            <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath25\">\n                <path d=\"M 0,700 H 700 V 0 H 0 Z\" id=\"path23\" />\n            </clipPath>\n        </defs>\n        <g id=\"g17\" transform=\"matrix(1.3333333,0,0,-1.3333333,-133.33333,799.99999)\">\n            <g id=\"g19\">\n                <g id=\"g21\" clip-path=\"url(#clipPath25)\">\n                    <g id=\"g27\" transform=\"translate(600,350)\">\n                        <path\n                            d=\"m 0,0 c 0,138.071 -111.929,250 -250,250 -138.071,0 -250,-111.929 -250,-250 0,-117.245 80.715,-215.622 189.606,-242.638 v 166.242 h -51.552 V 0 h 51.552 v 32.919 c 0,85.092 38.508,124.532 122.048,124.532 15.838,0 43.167,-3.105 54.347,-6.211 V 81.986 c -5.901,0.621 -16.149,0.932 -28.882,0.932 -40.993,0 -56.832,-15.528 -56.832,-55.9 V 0 h 81.659 l -14.028,-76.396 h -67.631 V -248.169 C -95.927,-233.218 0,-127.818 0,0\"\n                            style=\"fill:#0866ff;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path29\" />\n                    </g>\n                    <g id=\"g31\" transform=\"translate(447.9175,273.6036)\">\n                        <path\n                            d=\"M 0,0 14.029,76.396 H -67.63 v 27.019 c 0,40.372 15.838,55.899 56.831,55.899 12.733,0 22.981,-0.31 28.882,-0.931 v 69.253 c -11.18,3.106 -38.509,6.212 -54.347,6.212 -83.539,0 -122.048,-39.441 -122.048,-124.533 V 76.396 h -51.552 V 0 h 51.552 v -166.242 c 19.343,-4.798 39.568,-7.362 60.394,-7.362 10.254,0 20.358,0.632 30.288,1.831 L -67.63,0 Z\"\n                            style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" id=\"path33\" />\n                    </g>\n                </g>\n            </g>\n        </g>\n    </svg>\n</template>","import LogoFacebook from '@/components/Icons/FacebookIcon.vue';\n\n\nexport const supportedSourceTypes = [\n  {\n    label: 'Facebook',\n\tvalue: 'Facebook',\n    icon: LogoFacebook,\n    info: __(\"You will need a Meta developer account and an access token to sync leads from Facebook. Read more \"),\n    link: 'https://www.facebook.com/business/help/503306463479099?id=2190812977867143',\n    custom: false,\n  }\n]\n\nexport const sourceIcon = {\n  'Facebook': LogoFacebook\n}\n\nexport const fbSourceFields = [\n\t{\n\t\tname: \"name\",\n\t\tlabel: __(\"Name\"),\n\t\ttype: \"text\",\n\t\tplaceholder: __(\"Add a name for your source\"),\n\t},\n\t{\n\t\tname: \"access_token\",\n\t\tlabel: __(\"Access Token\"),\n\t\ttype: \"password\",\n\t\tplaceholder: __(\"Enter your Facebook Access Token\"),\n\t}\n];\n","<template>\n    <div v-if=\"selectedLog\">\n        <div class=\"flex justify-between items-center\">\n            <Button variant=\"ghost\" icon-left=\"chevron-left\" @click=\"selectedLog = null\">\n                {{ __(\"Back to all logs\") }}\n            </Button>\n            <Button v-if=\"logDoc?.document?.retrySync && selectedLog.type != 'Synced'\" :loading=\"logDoc?.document?.retrySync.loading\"\n                @click=\"logDoc?.document?.retrySync.submit()\">\n                {{ __(\"Retry Sync\") }}\n            </Button>\n        </div>\n\n        <div class=\"grid grid-cols-2 gap-2 mt-4\">\n            <FormControl type=\"text\" :label=\"__('Log ID')\" :value=\"selectedLog.name\" disabled />\n\n            <FormControl type=\"text\" :label=\"__('Reason')\" :value=\"selectedLog.type\" disabled />\n        </div>\n\n        <div class=\"mt-4 flex flex-col gap-8\">\n            <div>\n                <Textarea class=\"h-[250px]\" :label=\"__('Lead Data')\" :value=\"selectedLog.lead_data\" disabled />\n            </div>\n\n            <div>\n                <Textarea v-if=\"selectedLog.traceback\" class=\"h-[250px]\" :label=\"__('Traceback')\" disabled\n                    :value=\"selectedLog.traceback\" />\n            </div>\n\n        </div>\n    </div>\n\n    <ListView v-if=\"!selectedLog && failedLeadSyncLogList?.data\" class=\"h-full\" :columns=\"columns\"\n        :rows=\"failedLeadSyncLogList?.data\" :options=\"{\n            selectable: false,\n            showTooltip: true,\n            resizeColumn: false,\n            emptyState: {\n                title: __('No failure logs found'),\n                description: __('Any failed lead syncs will show up here'),\n            },\n            onRowClick: (row) => {\n                selectedLog = row\n            }\n        }\">\n        <template #cell=\"{ item, row, column }\">\n            <Badge v-if=\"column.key === 'type'\">{{ item }}</Badge>\n            <span v-else class=\"text-base\">{{ item }}</span>\n        </template>\n    </ListView>\n</template>\n\n<script setup>\nimport { ref, watch } from \"vue\";\nimport { useDocument } from \"@/data/document\";\nimport { Badge, createListResource, Textarea, ListView, FormControl, toast } from \"frappe-ui\";\n\nconst props = defineProps({\n    source: {\n        type: String,\n        required: true\n    }\n})\n\nconst selectedLog = ref(null);\n\nconst failedLeadSyncLogList = createListResource({\n    doctype: \"Failed Lead Sync Log\",\n    fields: [\"name\", \"type\", \"lead_data\", \"traceback\"],\n    filters: {\n        source: props.source\n    },\n    auto: true\n})\n\nconst columns = [\n    {\n        \"label\": __(\"ID\"),\n        \"key\": \"name\"\n    },\n    {\n        \"label\": __(\"Type\"),\n        \"key\": \"type\"\n    }\n]\n\nconst logDoc = ref(null);\nwatch(selectedLog, () => {\n    if (!selectedLog.value?.name) {\n        return\n    }\n\n    logDoc.value = useDocument(\"Failed Lead Sync Log\", selectedLog.value.name, {\n        whitelistedMethods: {\n            retrySync: {\n                method: 'retry_sync',\n                onSuccess() {\n                    toast.success(__(\"Sync successful!\"))\n                },\n                onError(e) {\n                    toast.error(e.message || (e.messages ?? e.messages[0]) || e.exc_type || __(\"Error syncing lead\"))\n                }\n            }\n        }\n    });\n})\n</script>","<template>\n\t<div class=\"flex h-full flex-col text-ink-gray-8\">\n\t\t<!-- Header -->\n\t\t<div class=\"flex justify-between px-2 pt-2\">\n\t\t\t<div class=\"flex gap-1 -ml-4 w-9/12\">\n\t\t\t\t<Button variant=\"ghost\" icon-left=\"chevron-left\"\n\t\t\t\t\t:label=\"isLocal ? __('New Lead Sync Source') : syncSource.name\" size=\"md\"\n\t\t\t\t\t@click=\"() => emit('updateStep', 'source-list')\"\n\t\t\t\t\tclass=\"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-xl hover:opacity-70 !pr-0 !max-w-96 !justify-start\" />\n\t\t\t</div>\n\t\t\t<div class=\"flex item-center space-x-4 w-3/12 justify-end\">\n\t\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t\t<Switch size=\"sm\" v-model=\"syncSource.enabled\" />\n\t\t\t\t\t<span class=\"text-sm text-ink-gray-7\">{{ __('Enabled') }}</span>\n\t\t\t\t</div>\n\n\t\t\t\t<Button v-if=\"!isLocal && docResource?.document?.syncLeads\" :label=\"__('Sync Now')\" variant=\"outline\"\n\t\t\t\t\t:loading=\"docResource?.document?.syncLeads.loading\"\n\t\t\t\t\t@click=\"docResource?.document?.syncLeads.submit()\" />\n\n\t\t\t\t<Button :label=\"isLocal ? __('Create') : __('Update')\" icon-left=\"plus\" variant=\"solid\"\n\t\t\t\t\t:loading=\"sources.setValue.loading || sources.insert.loading || docResource?.loading\"\n\t\t\t\t\t@click=\"createOrUpdateSource\" />\n\t\t\t</div>\n\t\t</div>\n\n\t\t<Tabs as=\"div\" v-model=\"tabIndex\" :tabs=\"tabs\" class=\"mt-2\">\n\t\t\t<template #tab-panel=\"{ tab }\">\n\t\t\t\t<div v-if=\"tab.label == 'Details'\" class=\"overflow-hidden flex h-full flex-col gap-6 mt-4\">\n\t\t\t\t\t<!-- Form -->\n\t\t\t\t\t<div class=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<FormControl type=\"autocomplete\" required=\"true\" v-model=\"syncSource.type\"\n\t\t\t\t\t\t\t:options=\"supportedSourceTypes\" :label=\"__('Source Type')\"\n\t\t\t\t\t\t\t:placeholder=\"__('Select Source Type')\">\n\t\t\t\t\t\t\t<template v-if=\"syncSource.type\" #prefix>\n\t\t\t\t\t\t\t\t<component class=\"mr-2 size-4\" :is=\"syncSource.type.icon\" />\n\t\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\t<template #item-prefix=\"{ option }\">\n\t\t\t\t\t\t\t\t<component class=\"size-4\" :is=\"option.icon\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\n\t\t\t\t\t\t<FormControl type=\"text\" v-if=\"isLocal\" required=\"true\" v-model=\"syncSource.name\"\n\t\t\t\t\t\t\t:label=\"__('Source Name')\" :placeholder=\"__('Enter Source Name')\" />\n\n\n\t\t\t\t\t\t<FormControl v-if=\"fieldsMap.background_sync_frequency\" type=\"select\" required=\"true\"\n\t\t\t\t\t\t\t:options=\"fieldsMap.background_sync_frequency.options\"\n\t\t\t\t\t\t\tv-model=\"syncSource.background_sync_frequency\" :label=\"__('Background Sync Frequency')\" />\n\n\t\t\t\t\t\t<FormControl type=\"password\" required=\"true\" v-model=\"syncSource.access_token\"\n\t\t\t\t\t\t\t:label=\"__('Access Token')\" :placeholder=\"__('Enter Access Token')\">\n\t\t\t\t\t\t\t<template #suffix>\n\t\t\t\t\t\t\t\t<a target=\"_blank\"\n\t\t\t\t\t\t\t\t\thref=\"https://developers.facebook.com/docs/facebook-login/guides/access-tokens/\">\n\t\t\t\t\t\t\t\t\t<LucideCircleQuestionMark class=\"w-4\" />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</FormControl>\n\n\t\t\t\t\t\t<FormControl v-if=\"!isLocal && sourceDoc && sourceDoc.last_synced_at\"\n\t\t\t\t\t\t\t:modelValue=\"formatDate(sourceDoc.last_synced_at)\" disabled type=\"datetime\" :label=\"__('Last Synced At')\" />\n\n\t\t\t\t\t\t<Link v-if=\"!isLocal\" label=\"Facebook Page\" v-model=\"syncSource.facebook_page\"\n\t\t\t\t\t\t\tdoctype=\"Facebook Page\" />\n\n\t\t\t\t\t\t<Link v-if=\"!isLocal && syncSource.facebook_page\" label=\"Lead Form\"\n\t\t\t\t\t\t\tv-model=\"syncSource.facebook_lead_form\" doctype=\"Facebook Lead Form\" :filters=\"{\n\t\t\t\t\t\t\t\t'page': syncSource.facebook_page\n\t\t\t\t\t\t\t}\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- Mapping Grid -->\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"syncSource.facebook_lead_form && mappingFormDocResource && mappingFormDocResource.document?.doc\">\n\t\t\t\t\t\t<Grid v-model=\"mappingFormDocResource.document.doc.questions\"\n\t\t\t\t\t\t\tv-model:parent=\"mappingFormDocResource.document.doc\" doctype=\"Facebook Lead Form Question\"\n\t\t\t\t\t\t\tparentDoctype=\"Facebook Lead Form\" parentFieldname=\"questions\" :overrides=\"{\n\t\t\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t\t\t{ 'fieldname': 'mapped_to_crm_field', 'options': getCRMLeadFields, 'placeholder': __('Not Synced') }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"mt-4\" v-if=\"tab.label == 'Failure Logs'\">\n\t\t\t\t\t<FailureLogs :source=\"syncSource.name\" />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Tabs>\n\n\t\t<ErrorMessage :message=\"docResource?.document?.syncLeads.error\" />\n\t</div>\n</template>\n\n<script setup>\nimport { useDocument } from \"@/data/document\";\nimport { onMounted, inject, ref, computed, watch } from \"vue\";\nimport { supportedSourceTypes } from \"./leadSyncSourceConfig\";\nimport {\n\tButton,\n\tFormControl,\n\tSwitch,\n\ttoast,\n\tcreateResource,\n\tErrorMessage,\n\tTabs\n} from \"frappe-ui\";\n\nimport { getMeta } from \"@/stores/meta\";\nimport Link from \"@/components/Controls/Link.vue\";\nimport Grid from \"@/components/Controls/Grid.vue\";\nimport LucideCircleQuestionMark from '~icons/lucide/circle-question-mark';\nimport FailureLogs from \"./FailureLogs.vue\";\nimport DetailsIcon from '@/components/Icons/DetailsIcon.vue'\nimport RefreshIcon from '@/components/Icons/RefreshIcon.vue'\nimport {formatDate} from \"@/utils\";\n\nconst props = defineProps({\n\tsourceData: {\n\t\ttype: Object,\n\t\tdefault: () => ({}),\n\t},\n});\nconst emit = defineEmits([\"updateStep\"]);\n\nconst tabs = computed(() => {\n\tconst tabList = [\n\t\t{\n\t\t\tlabel: __('Details'),\n\t\t\ticon: DetailsIcon\n\t\t}\n\t]\n\n\tif (!isLocal.value) {\n\t\ttabList.push({\n\t\t\tlabel: __('Failure Logs'),\n\t\t\ticon: RefreshIcon\n\t\t})\n\t}\n\n\treturn tabList;\n})\n\nconst tabIndex = ref(0);\n\nconst docResource = ref(null);\nconst mappingFormDocResource = ref(null);\n\nconst sourceDoc = computed(() => {\n\tif (!docResource.value) return;\n\treturn docResource.value?.document?.doc;\n});\n\nconst { meta, getFields } = getMeta(\"Lead Sync Source\");\nconst fields = ref(getFields());\n\nwatch(\n\t() => meta.data,\n\t() => {\n\t\tfields.value = getFields();\n\t},\n);\n\nconst fieldsMap = computed(() => {\n\tif (!fields.value) return {};\n\n\tconst map = {};\n\tfor (const field of fields.value) {\n\t\tmap[field.fieldname] = field;\n\t}\n\treturn map;\n});\n\nconst sources = inject(\"sources\");\nconst syncSource = ref({\n\tname: \"\",\n\ttype: \"\",\n\taccess_token: \"\",\n\tfacebook_page: \"\",\n\tfacebook_lead_form: \"\",\n\tenabled: true,\n\tbackground_sync_frequency:\n\t\tfieldsMap.value.background_sync_frequency?.default || \"Hourly\",\n});\n\nconst isLocal = ref(true);\n\nfunction updateSource(data) {\n\tsources.setValue.submit(\n\t\t{\n\t\t\tname: syncSource.value.name,\n\t\t\t...data,\n\t\t},\n\t\t{\n\t\t\tonSuccess: () => {\n\t\t\t\tif (docResource.value) {\n\t\t\t\t\tdocResource.value.document.reload();\n\t\t\t\t}\n\n\t\t\t\tmappingFormDocResource.value.document.save.submit();\n\t\t\t},\n\t\t\tonError(e) {\n\t\t\t\ttoast.error(e.messages[0] || __(\"Error updating Lead Sync Source\"));\n\t\t\t},\n\t\t},\n\t);\n}\n\nfunction createSource() {\n\tsources.insert.submit(\n\t\t{\n\t\t\t...syncSource.value,\n\t\t\ttype: syncSource.value.type.value,\n\t\t},\n\t\t{\n\t\t\tonSuccess: (newDoc) => {\n\t\t\t\ttoast.success(__(\"Lead Sync Source created successfully\"));\n\t\t\t\tisLocal.value = false;\n\t\t\t\tdocResource.value = getSourceDocResource(newDoc.name);\n\t\t\t},\n\t\t\tonError(error) {\n\t\t\t\ttoast.error(error.messages[0] || __(\"Error creating Lead Sync Source\"));\n\t\t\t},\n\t\t},\n\t);\n}\n\nfunction createOrUpdateSource() {\n\tif (isLocal.value) {\n\t\tcreateSource();\n\t} else {\n\t\tupdateSource({\n\t\t\t...syncSource.value,\n\t\t\ttype: syncSource.value.type.value,\n\t\t});\n\t}\n}\n\nonMounted(() => {\n\tif (props.sourceData?.name) {\n\t\tObject.assign(syncSource.value, props.sourceData);\n\t\tisLocal.value = false; // edit form\n\t\tdocResource.value = getSourceDocResource(props.sourceData.name);\n\t}\n\n\tif (syncSource.value.facebook_lead_form) {\n\t\tmappingFormDocResource.value = useDocument(\n\t\t\t\"Facebook Lead Form\",\n\t\t\tsyncSource.value.facebook_lead_form,\n\t\t);\n\t}\n});\n\nwatch(\n\t() => sourceDoc.value,\n\t(newDoc) => {\n\t\tif (newDoc) {\n\t\t\tObject.assign(syncSource.value, {\n\t\t\t\t...newDoc,\n\t\t\t\ttype:\n\t\t\t\t\tsupportedSourceTypes.find((type) => type.value === newDoc.type) ||\n\t\t\t\t\tnewDoc.type,\n\t\t\t});\n\n\t\t\tmappingFormDocResource.value = useDocument(\n\t\t\t\t\"Facebook Lead Form\",\n\t\t\t\tsyncSource.value.facebook_lead_form,\n\t\t\t);\n\t\t}\n\t},\n);\n\nwatch(\n\t() => syncSource.value.facebook_page,\n\t(_, oldValue) => {\n\t\tif (!oldValue) return; // on mount, the value changes from empty\n\t\tsyncSource.value.facebook_lead_form = \"\";\n\t},\n);\n\nwatch(\n\t() => syncSource.value.facebook_lead_form,\n\t(newVal) => {\n\t\tif (newVal) {\n\t\t\tmappingFormDocResource.value = useDocument(\n\t\t\t\t\"Facebook Lead Form\",\n\t\t\t\tnewVal,\n\t\t\t);\n\t\t} else {\n\t\t\tmappingFormDocResource.value = null;\n\t\t}\n\t},\n);\n\nconst leadFields = createResource({\n\turl: \"crm.api.doc.get_fields_meta\",\n\tparams: {\n\t\tdoctype: \"CRM Lead\",\n\t\tas_array: true,\n\t},\n\tcache: [\"fieldsMeta\", \"CRM Lead\"],\n\tauto: true,\n\ttransform: (data) => {\n\t\tlet restrictedFields = [\n\t\t\t\"name\",\n\t\t\t\"owner\",\n\t\t\t\"creation\",\n\t\t\t\"modified\",\n\t\t\t\"modified_by\",\n\t\t\t\"docstatus\",\n\t\t\t\"_comments\",\n\t\t\t\"_user_tags\",\n\t\t\t\"_assign\",\n\t\t\t\"_liked_by\",\n\t\t];\n\t\treturn data.filter((field) => !restrictedFields.includes(field.fieldname));\n\t},\n});\n\nconst getCRMLeadFields = computed(() => {\n\tif (leadFields.data) {\n\t\treturn leadFields.data.map((field) => ({\n\t\t\tlabel: field.label,\n\t\t\tvalue: field.fieldname,\n\t\t}));\n\t}\n\treturn [];\n});\n\nfunction getSourceDocResource(name) {\n\treturn useDocument(\"Lead Sync Source\", name, {\n\t\twhitelistedMethods: {\n\t\t\tsyncLeads: {\n\t\t\t\tmethod: 'sync_leads',\n\t\t\t\tonSuccess() {\n\t\t\t\t\ttoast.success(__(\"Syncing started in background\"))\n\t\t\t\t},\n\t\t\t\tonError(e) {\n\t\t\t\t\ttoast.error((e.messages ?? e.messages[0]) || __(\"Error syncing leads\"))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n</script>","<template>\n  <div class=\"flex-1 p-6\">\n    <LeadSyncSourceForm\n      v-if=\"step === 'new-source'\"\n      :sourceData=\"source\"\n      @updateStep=\"updateStep\"\n    />\n    <LeadSyncSources\n      v-else-if=\"step === 'source-list'\"\n      @updateStep=\"updateStep\"\n    />\n    <LeadSyncSourceForm\n      v-else-if=\"step === 'edit-source'\"\n      :sourceData=\"source\"\n      @updateStep=\"updateStep\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport LeadSyncSources from \"./LeadSyncSources.vue\"\nimport LeadSyncSourceForm from \"./LeadSyncSourceForm.vue\";\n\nimport { createListResource } from 'frappe-ui'\nimport { provide, ref } from 'vue'\n\nconst step = ref('source-list')\nconst source = ref(null)\n\nconst sources = createListResource({\n  type: 'list',\n  doctype: 'Lead Sync Source',\n  cache: 'lead_sync_sources',\n  fields: [\n    'name',\n    'enabled',\n    'type',\n    'last_synced_at',\n    'facebook_lead_form'\n  ],\n  auto: true,\n  orderBy: 'modified desc',\n  pageLength: 20,\n})\n\nprovide('sources', sources)\n\nfunction updateStep(newStep, data) {\n  step.value = newStep\n  source.value = data\n}\n</script>","<template>\n  <FileUploader\n    :file-types=\"image_type\"\n    @success=\"\n      (file) => {\n        $emit('upload', file.file_url)\n      }\n    \"\n  >\n    <template v-slot=\"{ progress, uploading, openFileSelector }\">\n      <div class=\"flex items-end space-x-1\">\n        <Button\n          @click=\"openFileSelector\"\n          :iconLeft=\"uploading ? 'cloud-upload' : ImageUpIcon\"\n          :label=\"\n            uploading\n              ? __('Uploading {0}%', [progress])\n              : image_url\n                ? __('Change')\n                : __('Upload')\n          \"\n        />\n        <Button\n          v-if=\"image_url\"\n          :label=\"__('Remove')\"\n          @click=\"$emit('remove')\"\n        />\n      </div>\n    </template>\n  </FileUploader>\n</template>\n<script setup>\nimport ImageUpIcon from '~icons/lucide/image-up'\nimport { FileUploader, Button } from 'frappe-ui'\n\nconst prop = defineProps({\n  image_url: String,\n  image_type: {\n    type: String,\n    default: 'image/*',\n  },\n})\nconst emit = defineEmits(['upload', 'remove'])\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 px-6 py-8 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between px-2 text-ink-gray-8\">\n      <div class=\"flex flex-col gap-1\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Brand settings') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{ __('Configure your brand name, logo, and favicon') }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('Update')\"\n          variant=\"solid\"\n          :disabled=\"!settings.isDirty\"\n          :loading=\"settings.loading\"\n          @click=\"updateSettings\"\n        />\n      </div>\n    </div>\n\n    <!-- Fields -->\n    <div class=\"flex flex-1 flex-col p-2 gap-4 overflow-y-auto\">\n      <div class=\"flex w-full\">\n        <FormControl\n          type=\"text\"\n          class=\"w-1/2\"\n          size=\"md\"\n          v-model=\"settings.doc.brand_name\"\n          :label=\"__('Brand name')\"\n          :placeholder=\"__('Enter brand name')\"\n        />\n      </div>\n\n      <!-- logo -->\n      <div class=\"flex flex-col justify-between gap-4\">\n        <div class=\"flex items-center flex-1 gap-5\">\n          <div\n            class=\"flex items-center justify-center rounded border border-outline-gray-modals size-20\"\n          >\n            <img\n              v-if=\"settings.doc?.brand_logo\"\n              :src=\"settings.doc?.brand_logo\"\n              alt=\"Logo\"\n              class=\"size-8 rounded\"\n            />\n            <ImageIcon v-else class=\"size-5 text-ink-gray-4\" />\n          </div>\n          <div class=\"flex flex-1 flex-col gap-1\">\n            <span class=\"text-base font-medium\">{{ __('Brand logo') }}</span>\n            <span class=\"text-p-base text-ink-gray-6\">\n              {{\n                __(\n                  'Appears in the left sidebar. Recommended size is 32x32 px in PNG or SVG',\n                )\n              }}\n            </span>\n          </div>\n          <div>\n            <ImageUploader\n              image_type=\"image/ico\"\n              :image_url=\"settings.doc?.brand_logo\"\n              @upload=\"(url) => (settings.doc.brand_logo = url)\"\n              @remove=\"() => (settings.doc.brand_logo = '')\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <!-- favicon -->\n      <div class=\"flex flex-col justify-between gap-4\">\n        <div class=\"flex items-center flex-1 gap-5\">\n          <div\n            class=\"flex items-center justify-center rounded border border-outline-gray-modals size-20\"\n          >\n            <img\n              v-if=\"settings.doc?.favicon\"\n              :src=\"settings.doc?.favicon\"\n              alt=\"Favicon\"\n              class=\"size-8 rounded\"\n            />\n            <ImageIcon v-else class=\"size-5 text-ink-gray-4\" />\n          </div>\n          <div class=\"flex flex-1 flex-col gap-1\">\n            <span class=\"text-base font-medium\">{{ __('Favicon') }}</span>\n            <span class=\"text-p-base text-ink-gray-6\">\n              {{\n                __(\n                  'Appears next to the title in your browser tab. Recommended size is 32x32 px in PNG or ICO',\n                )\n              }}\n            </span>\n          </div>\n          <div>\n            <ImageUploader\n              image_type=\"image/ico\"\n              :image_url=\"settings.doc?.favicon\"\n              @upload=\"(url) => (settings.doc.favicon = url)\"\n              @remove=\"() => (settings.doc.favicon = '')\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport ImageIcon from '~icons/lucide/image'\nimport ImageUploader from '@/components/Controls/ImageUploader.vue'\nimport { FormControl } from 'frappe-ui'\nimport { getSettings } from '@/stores/settings'\nimport { showSettings } from '@/composables/settings'\n\nconst { _settings: settings, setupBrand } = getSettings()\n\nfunction updateSettings() {\n  settings.save.submit(null, {\n    onSuccess: () => {\n      showSettings.value = false\n      setupBrand()\n    },\n  })\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-8 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between text-ink-gray-8\">\n      <div class=\"flex flex-col gap-1\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Home actions') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{ __('Configure actions that appear on the home dropdown') }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('Update')\"\n          variant=\"solid\"\n          :disabled=\"!document.isDirty\"\n          :loading=\"document.loading\"\n          @click=\"updateSettings\"\n        />\n      </div>\n    </div>\n\n    <!-- Fields -->\n    <div class=\"flex flex-1 flex-col overflow-y-auto\">\n      <Grid\n        v-model=\"document.doc.dropdown_items\"\n        doctype=\"CRM Dropdown Item\"\n        parentDoctype=\"FCRM Settings\"\n        parentFieldname=\"dropdown_items\"\n      />\n    </div>\n    <div v-if=\"errorMessage\">\n      <ErrorMessage :message=\"__(errorMessage)\" />\n    </div>\n  </div>\n</template>\n<script setup>\nimport Grid from '@/components/Controls/Grid.vue'\nimport { ErrorMessage } from 'frappe-ui'\nimport { showSettings } from '@/composables/settings'\nimport { useDocument } from '@/data/document'\nimport { ref, provide } from 'vue'\n\nconst { document, triggerOnChange } = useDocument(\n  'FCRM Settings',\n  'FCRM Settings',\n)\n\nprovide('triggerOnChange', triggerOnChange)\n\nconst emit = defineEmits(['updateStep'])\nconst errorMessage = ref('')\n\nfunction updateSettings() {\n  document.save.submit(null, {\n    onSuccess: () => {\n      showSettings.value = false\n    },\n  })\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 py-8 px-6 text-ink-gray-8\">\n    <div class=\"flex flex-col gap-1 px-2\">\n      <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n        {{ __('Forecasting') }}\n      </h2>\n      <p class=\"text-p-base text-ink-gray-6\">\n        {{\n          __(\n            'Configure forecasting feature to help predict sales performance and growth',\n          )\n        }}\n      </p>\n    </div>\n\n    <div class=\"flex-1 flex flex-col overflow-y-auto\">\n      <div class=\"flex items-center justify-between py-3 px-2\">\n        <div class=\"flex flex-col\">\n          <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n            {{ __('Enable forecasting') }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5 truncate\">\n            {{\n              __(\n                'Makes \"Expected Closure Date\" and \"Expected Deal Value\" mandatory for deal value forecasting',\n              )\n            }}\n          </div>\n        </div>\n        <div>\n          <Switch\n            size=\"sm\"\n            v-model=\"settings.doc.enable_forecasting\"\n            @click.stop=\"toggleForecasting\"\n          />\n        </div>\n      </div>\n      <div class=\"h-px border-t mx-2 border-outline-gray-modals\" />\n      <div class=\"flex items-center justify-between py-3 px-2\">\n        <div class=\"flex flex-col\">\n          <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n            {{ __('Auto update expected deal value') }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5 truncate\">\n            {{\n              __(\n                'Automatically update \"Expected Deal Value\" based on the total value of associated products in a deal',\n              )\n            }}\n          </div>\n        </div>\n        <div>\n          <Switch\n            size=\"sm\"\n            v-model=\"settings.doc.auto_update_expected_deal_value\"\n            @click.stop=\"autoUpdateExpectedDealValue\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { getSettings } from '@/stores/settings'\nimport { Switch, toast } from 'frappe-ui'\n\nconst { _settings: settings } = getSettings()\n\nfunction toggleForecasting() {\n  settings.save.submit(null, {\n    onSuccess: () => {\n      toast.success(\n        settings.doc.enable_forecasting\n          ? __('Forecasting enabled successfully')\n          : __('Forecasting disabled successfully'),\n      )\n    },\n  })\n}\n\nfunction autoUpdateExpectedDealValue() {\n  settings.save.submit(null, {\n    onSuccess: () => {\n      toast.success(\n        settings.doc.auto_update_expected_deal_value\n          ? __('Auto update of expected deal value enabled')\n          : __('Auto update of expected deal value disabled'),\n      )\n    },\n  })\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 px-6 py-8 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between px-2 text-ink-gray-8\">\n      <div class=\"flex flex-col gap-1\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Currency & Exchange rate provider') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __('Configure the currency and exchange rate provider for your CRM')\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('Update')\"\n          variant=\"solid\"\n          :disabled=\"!settings.isDirty\"\n          :loading=\"settings.loading\"\n          @click=\"updateSettings\"\n        />\n      </div>\n    </div>\n\n    <!-- Fields -->\n    <div class=\"flex flex-1 flex-col overflow-y-auto\">\n      <div class=\"flex items-center justify-between gap-8 py-3 px-2\">\n        <div class=\"flex flex-col\">\n          <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n            {{ __('Currency') }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5\">\n            {{\n              __(\n                'CRM currency for all monetary values. Once set, cannot be edited.',\n              )\n            }}\n          </div>\n        </div>\n        <div>\n          <div v-if=\"settings.doc?.currency\" class=\"text-base text-ink-gray-8\">\n            {{ settings.doc.currency }}\n          </div>\n          <Link\n            v-else\n            class=\"form-control flex-1 truncate w-40\"\n            :value=\"settings.doc?.currency\"\n            doctype=\"Currency\"\n            @change=\"(v) => setCurrency(v)\"\n            :placeholder=\"__('Select currency')\"\n            placement=\"bottom-end\"\n          />\n        </div>\n      </div>\n      <div class=\"h-px border-t mx-2 border-outline-gray-modals\" />\n      <div class=\"flex items-center justify-between gap-8 py-3 px-2\">\n        <div class=\"flex flex-col\">\n          <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n            {{ __('Exchange rate provider') }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5\">\n            {{ __('Configure the exchange rate provider for your CRM') }}\n          </div>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <FormControl\n            type=\"select\"\n            class=\"w-44\"\n            v-model=\"settings.doc.service_provider\"\n            :options=\"[\n              { label: 'Frankfurter', value: 'frankfurter.app' },\n              { label: 'Exchangerate Host', value: 'exchangerate.host' },\n            ]\"\n            :placeholder=\"__('Select provider')\"\n            :disabled=\"!settings.doc?.currency\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"settings.doc.service_provider === 'exchangerate.host'\"\n        class=\"h-px border-t mx-2 border-outline-gray-modals\"\n      />\n      <div\n        v-if=\"settings.doc.service_provider === 'exchangerate.host'\"\n        class=\"flex items-center justify-between gap-8 p-3\"\n      >\n        <div class=\"flex flex-col\">\n          <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n            {{ __('Access key') }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5\">\n            {{\n              __(\n                'Access key for Exchangerate Host. Required for fetching exchange rates.',\n              )\n            }}\n          </div>\n          <div class=\"text-p-sm text-ink-gray-5\">\n            {{ __('You can get your access key from ') }}\n            <a\n              class=\"hover:underline text-ink-gray-7\"\n              href=\"https://exchangerate.host/#/docs/access_key\"\n              target=\"_blank\"\n            >\n              {{ __('exchangerate.host') }}\n            </a>\n          </div>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <FormControl\n            type=\"text\"\n            class=\"w-44\"\n            v-model=\"settings.doc.access_key\"\n            :placeholder=\"__('Enter access key')\"\n            :disabled=\"!settings.doc?.currency\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"errorMessage\" class=\"px-3\">\n      <ErrorMessage :message=\"__(errorMessage)\" />\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ErrorMessage, FormControl, toast } from 'frappe-ui'\nimport { getSettings } from '@/stores/settings'\nimport { globalStore } from '@/stores/global'\nimport { showSettings } from '@/composables/settings'\nimport { ref } from 'vue'\n\nconst { _settings: settings } = getSettings()\nconst { $dialog } = globalStore()\n\nconst errorMessage = ref('')\n\nfunction updateSettings() {\n  settings.save.submit(null, {\n    validate: () => {\n      errorMessage.value = ''\n      if (!settings.doc?.currency) {\n        errorMessage.value = __('Please select a currency before saving.')\n        return errorMessage.value\n      }\n      if (\n        settings.doc.service_provider === 'exchangerate.host' &&\n        !settings.doc.access_key\n      ) {\n        errorMessage.value = __(\n          'Please enter the Exchangerate Host access key.',\n        )\n        return errorMessage.value\n      }\n    },\n    onSuccess: () => {\n      showSettings.value = false\n    },\n  })\n}\n\nfunction setCurrency(value) {\n  $dialog({\n    title: __('Set currency'),\n    message: __(\n      'Are you sure you want to set the currency as {0}? This cannot be changed later.',\n      [value],\n    ),\n    variant: 'solid',\n    theme: 'blue',\n    actions: [\n      {\n        label: __('Save'),\n        variant: 'solid',\n        onClick: (close) => {\n          settings.doc.currency = value\n          settings.save.submit(null, {\n            onSuccess: () => {\n              toast.success(__('Currency set as {0} successfully', [value]))\n              close()\n            },\n          })\n        },\n      },\n    ],\n  })\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-8 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between\">\n      <div class=\"flex gap-1 -ml-4 w-9/12\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"\n            templateData?.name ? __('Duplicate template') : __('New template')\n          \"\n          size=\"md\"\n          @click=\"() => emit('updateStep', 'template-list')\"\n          class=\"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-xl hover:opacity-70 !pr-0 !max-w-96 !justify-start\"\n        />\n      </div>\n      <div class=\"flex item-center space-x-4 w-3/12 justify-end\">\n        <div class=\"flex items-center space-x-2\">\n          <Switch size=\"sm\" v-model=\"template.enabled\" />\n          <span class=\"text-sm text-ink-gray-7\">{{ __('Enabled') }}</span>\n        </div>\n        <Button\n          :label=\"templateData?.name ? __('Duplicate') : __('Create')\"\n          icon-left=\"plus\"\n          variant=\"solid\"\n          @click=\"createTemplate\"\n        />\n      </div>\n    </div>\n\n    <!-- Fields -->\n    <div class=\"flex flex-1 flex-col gap-4 overflow-y-auto\">\n      <div class=\"flex sm:flex-row flex-col gap-4\">\n        <div class=\"flex-1\">\n          <FormControl\n            size=\"md\"\n            v-model=\"template.name\"\n            :placeholder=\"__('Payment Reminder')\"\n            :label=\"__('Name')\"\n            :required=\"true\"\n          />\n        </div>\n        <div class=\"flex-1\">\n          <FormControl\n            type=\"select\"\n            size=\"md\"\n            v-model=\"template.reference_doctype\"\n            :label=\"__('For')\"\n            :options=\"[\n              {\n                label: __('Deal'),\n                value: 'CRM Deal',\n              },\n              {\n                label: __('Lead'),\n                value: 'CRM Lead',\n              },\n            ]\"\n            :placeholder=\"__('Deal')\"\n          />\n        </div>\n      </div>\n      <div>\n        <FormControl\n          ref=\"subjectRef\"\n          size=\"md\"\n          v-model=\"template.subject\"\n          :label=\"__('Subject')\"\n          :placeholder=\"__('Payment Reminder from Frapp - (#{{ name }})')\"\n          :required=\"true\"\n        />\n      </div>\n      <div class=\"border-t pt-4\">\n        <FormControl\n          type=\"select\"\n          size=\"md\"\n          v-model=\"template.content_type\"\n          :label=\"__('Content Type')\"\n          default=\"Rich Text\"\n          :options=\"['Rich Text', 'HTML']\"\n          :placeholder=\"__('Rich Text')\"\n        />\n      </div>\n      <div>\n        <FormControl\n          v-if=\"template.content_type === 'HTML'\"\n          size=\"md\"\n          type=\"textarea\"\n          :label=\"__('Content')\"\n          :required=\"true\"\n          ref=\"content\"\n          :rows=\"10\"\n          v-model=\"template.response_html\"\n          :placeholder=\"\n            __(\n              '<p>Dear {{ lead_name }},</p>\\n\\n<p>This is a reminder for the payment of {{ grand_total }}.</p>\\n\\n<p>Thanks,</p>\\n<p>Frapp</p>',\n            )\n          \"\n        />\n        <div v-else>\n          <div class=\"mb-1.5 text-base text-ink-gray-5\">\n            {{ __('Content') }}\n            <span class=\"text-ink-red-3\">*</span>\n          </div>\n          <TextEditor\n            ref=\"content\"\n            editor-class=\"!prose-sm max-w-full overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors\"\n            :bubbleMenu=\"true\"\n            :content=\"template.response\"\n            @change=\"(val) => (template.response = val)\"\n            :placeholder=\"\n              __(\n                'Dear {{ lead_name }}, \\n\\nThis is a reminder for the payment of {{ grand_total }}. \\n\\nThanks, \\nFrapp',\n              )\n            \"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"errorMessage\">\n      <ErrorMessage :message=\"__(errorMessage)\" />\n    </div>\n  </div>\n</template>\n<script setup>\nimport { TextEditor, FormControl, Switch, toast } from 'frappe-ui'\nimport { inject, onMounted, ref } from 'vue'\n\nconst props = defineProps({\n  templateData: {\n    type: Object,\n    default: () => ({}),\n  },\n})\n\nconst emit = defineEmits(['updateStep'])\nconst errorMessage = ref('')\n\nconst template = ref({\n  name: '',\n  reference_doctype: 'CRM Deal',\n  subject: '',\n  content_type: 'Rich Text',\n  response_html: '',\n  response: '',\n  enabled: false,\n})\n\nconst templates = inject('templates')\n\nconst createTemplate = () => {\n  errorMessage.value = ''\n  if (!template.value.name) {\n    errorMessage.value = __('Name is required')\n    return\n  }\n  if (!template.value.subject) {\n    errorMessage.value = __('Subject is required')\n    return\n  }\n  if (template.value.content_type === 'Rich Text' && !template.value.response) {\n    errorMessage.value = __('Content is required')\n    return\n  }\n  if (template.value.content_type === 'HTML' && !template.value.response_html) {\n    errorMessage.value = __('Content is required')\n    return\n  }\n\n  templates.insert.submit(\n    { ...template.value },\n    {\n      onSuccess: () => {\n        emit('updateStep', 'template-list')\n        toast.success(__('Template created successfully'))\n      },\n      onError: (error) => {\n        errorMessage.value =\n          error.messages[0] || __('Failed to create template')\n      },\n    },\n  )\n}\n\nonMounted(() => {\n  if (props.templateData?.name) {\n    Object.assign(template.value, props.templateData)\n    template.value.name = template.value.name + ' - Copy'\n    template.value.enabled = false // Default to disabled for new templates\n  }\n})\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-8 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between\">\n      <div class=\"flex gap-1 -ml-4 w-9/12\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"__(template.name)\"\n          size=\"md\"\n          @click=\"() => emit('updateStep', 'template-list')\"\n          class=\"cursor-pointer hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-xl hover:opacity-70 !pr-0 !max-w-96 !justify-start\"\n        />\n      </div>\n      <div class=\"flex item-center space-x-4 w-3/12 justify-end\">\n        <div class=\"flex items-center space-x-2\">\n          <Switch size=\"sm\" v-model=\"template.enabled\" />\n          <span class=\"text-sm text-ink-gray-7\">{{ __('Enabled') }}</span>\n        </div>\n        <Button\n          :label=\"__('Update')\"\n          icon-left=\"plus\"\n          variant=\"solid\"\n          :disabled=\"!dirty\"\n          :loading=\"renameDoc.loading || templates.setValue.loading\"\n          @click=\"updateTemplate\"\n        />\n      </div>\n    </div>\n\n    <!-- Fields -->\n    <div class=\"flex flex-1 flex-col gap-4 overflow-y-auto\">\n      <div class=\"flex sm:flex-row flex-col gap-4\">\n        <div class=\"flex-1\">\n          <FormControl\n            size=\"md\"\n            v-model=\"template.name\"\n            :placeholder=\"__('Payment Reminder')\"\n            :label=\"__('Name')\"\n            :required=\"true\"\n          />\n        </div>\n        <div class=\"flex-1\">\n          <FormControl\n            type=\"select\"\n            size=\"md\"\n            v-model=\"template.reference_doctype\"\n            :label=\"__('For')\"\n            :options=\"[\n              {\n                label: __('Deal'),\n                value: 'CRM Deal',\n              },\n              {\n                label: __('Lead'),\n                value: 'CRM Lead',\n              },\n            ]\"\n            :placeholder=\"__('Deal')\"\n          />\n        </div>\n      </div>\n      <div>\n        <FormControl\n          ref=\"subjectRef\"\n          size=\"md\"\n          v-model=\"template.subject\"\n          :label=\"__('Subject')\"\n          :placeholder=\"__('Payment Reminder from Frapp - (#{{ name }})')\"\n          :required=\"true\"\n        />\n      </div>\n      <div class=\"border-t pt-4\">\n        <FormControl\n          type=\"select\"\n          size=\"md\"\n          v-model=\"template.content_type\"\n          :label=\"__('Content Type')\"\n          default=\"Rich Text\"\n          :options=\"['Rich Text', 'HTML']\"\n          :placeholder=\"__('Rich Text')\"\n        />\n      </div>\n      <div>\n        <FormControl\n          v-if=\"template.content_type === 'HTML'\"\n          size=\"md\"\n          type=\"textarea\"\n          :label=\"__('Content')\"\n          :required=\"true\"\n          ref=\"content\"\n          :rows=\"10\"\n          v-model=\"template.response_html\"\n          :placeholder=\"\n            __(\n              '<p>Dear {{ lead_name }},</p>\\n\\n<p>This is a reminder for the payment of {{ grand_total }}.</p>\\n\\n<p>Thanks,</p>\\n<p>Frapp</p>',\n            )\n          \"\n        />\n        <div v-else>\n          <div class=\"mb-1.5 text-base text-ink-gray-5\">\n            {{ __('Content') }}\n            <span class=\"text-ink-red-3\">*</span>\n          </div>\n          <TextEditor\n            ref=\"content\"\n            editor-class=\"!prose-sm max-w-full overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors\"\n            :bubbleMenu=\"true\"\n            :content=\"template.response\"\n            @change=\"(val) => (template.response = val)\"\n            :placeholder=\"\n              __(\n                'Dear {{ lead_name }}, \\n\\nThis is a reminder for the payment of {{ grand_total }}. \\n\\nThanks, \\nFrapp',\n              )\n            \"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"errorMessage\">\n      <ErrorMessage :message=\"__(errorMessage)\" />\n    </div>\n  </div>\n</template>\n<script setup>\nimport {\n  TextEditor,\n  FormControl,\n  Switch,\n  toast,\n  createResource,\n} from 'frappe-ui'\nimport { computed, inject, onMounted, ref } from 'vue'\n\nconst props = defineProps({\n  templateData: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst emit = defineEmits(['updateStep'])\nconst errorMessage = ref('')\n\nconst templates = inject('templates')\nconst template = ref({})\n\nconst updateTemplate = async () => {\n  errorMessage.value = ''\n  if (!template.value.name) {\n    errorMessage.value = __('Name is required')\n    return\n  }\n  if (!template.value.subject) {\n    errorMessage.value = __('Subject is required')\n    return\n  }\n  if (template.value.content_type === 'Rich Text' && !template.value.response) {\n    errorMessage.value = __('Content is required')\n    return\n  }\n  if (template.value.content_type === 'HTML' && !template.value.response_html) {\n    errorMessage.value = __('Content is required')\n    return\n  }\n\n  template.value.use_html = template.value.content_type === 'HTML'\n\n  const old = {\n    ...props.templateData,\n    use_html: Boolean(props.templateData.use_html),\n  }\n  const newEmailTemplate = {\n    ...template.value,\n    use_html: Boolean(template.value.use_html),\n  }\n\n  delete newEmailTemplate.content_type\n\n  const nameChanged = old.name !== newEmailTemplate.name\n  delete old.name\n  delete newEmailTemplate.name\n\n  const otherFieldChanged =\n    JSON.stringify(old) !== JSON.stringify(newEmailTemplate)\n  const values = newEmailTemplate\n\n  if (!nameChanged && !otherFieldChanged) return\n\n  let name = props.templateData.name\n\n  if (nameChanged) {\n    name = await renameDoc.fetch()\n    if (!otherFieldChanged) {\n      emit('updateStep', 'template-list')\n    }\n  }\n  if (otherFieldChanged) {\n    templates.setValue.submit(\n      { ...values, name },\n      {\n        onSuccess: () => {\n          emit('updateStep', 'template-list')\n          toast.success(__('Template updated successfully'))\n        },\n        onError: (error) => {\n          errorMessage.value =\n            error.messages[0] || __('Failed to update template')\n        },\n      },\n    )\n  }\n}\n\nconst dirty = computed(() => {\n  return (\n    template.value.name !== props.templateData.name ||\n    template.value.reference_doctype !== props.templateData.reference_doctype ||\n    template.value.subject !== props.templateData.subject ||\n    template.value.response_html !== props.templateData.response_html ||\n    template.value.response !== props.templateData.response ||\n    template.value.use_html !== props.templateData.use_html ||\n    Boolean(template.value.enabled) !== Boolean(props.templateData.enabled)\n  )\n})\n\nconst renameDoc = createResource({\n  url: 'frappe.client.rename_doc',\n  method: 'POST',\n  makeParams() {\n    return {\n      doctype: 'Email Template',\n      old_name: props.templateData.name,\n      new_name: template.value.name,\n    }\n  },\n  onSuccess: () => {\n    templates.reload()\n    toast.success(__('Template renamed successfully'))\n  },\n  onError: (error) => {\n    errorMessage.value = error.messages[0] || __('Failed to rename template')\n  },\n})\n\nonMounted(() => {\n  template.value = { ...props.templateData }\n  template.value.content_type = template.value.use_html ? 'HTML' : 'Rich Text'\n})\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-6 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between px-2 pt-2\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Email templates') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __(\n              'Add, edit, and manage email templates for various CRM communications',\n            )\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('New')\"\n          icon-left=\"plus\"\n          variant=\"solid\"\n          @click=\"emit('updateStep', 'new-template')\"\n        />\n      </div>\n    </div>\n\n    <!-- loading state -->\n    <div\n      v-if=\"templates.loading\"\n      class=\"flex mt-28 justify-between w-full h-full\"\n    >\n      <Button\n        :loading=\"templates.loading\"\n        variant=\"ghost\"\n        class=\"w-full\"\n        size=\"2xl\"\n      />\n    </div>\n\n    <!-- Empty State -->\n    <div\n      v-if=\"!templates.loading && !templates.data?.length\"\n      class=\"flex justify-between w-full h-full\"\n    >\n      <div\n        class=\"text-ink-gray-4 border border-dashed rounded w-full flex items-center justify-center\"\n      >\n        {{ __('No email templates found') }}\n      </div>\n    </div>\n\n    <!-- Email template list -->\n    <div\n      class=\"flex flex-col overflow-hidden\"\n      v-if=\"!templates.loading && templates.data?.length\"\n    >\n      <div\n        v-if=\"templates.data?.length > 10\"\n        class=\"flex items-center justify-between mb-4 px-2 pt-0.5\"\n      >\n        <TextInput\n          ref=\"searchRef\"\n          v-model=\"search\"\n          :placeholder=\"__('Search template')\"\n          class=\"w-1/3\"\n          :debounce=\"300\"\n        >\n          <template #prefix>\n            <FeatherIcon name=\"search\" class=\"h-4 w-4 text-ink-gray-6\" />\n          </template>\n        </TextInput>\n        <FormControl\n          type=\"select\"\n          v-model=\"currentDoctype\"\n          :options=\"[\n            { label: __('All'), value: 'All' },\n            { label: __('Lead'), value: 'CRM Lead' },\n            { label: __('Deal'), value: 'CRM Deal' },\n          ]\"\n        />\n      </div>\n      <div class=\"flex items-center py-2 px-4 text-sm text-ink-gray-5\">\n        <div class=\"w-4/6\">{{ __('Template name') }}</div>\n        <div class=\"w-1/6\">{{ __('For') }}</div>\n        <div class=\"w-1/6\">{{ __('Enabled') }}</div>\n      </div>\n      <div class=\"h-px border-t mx-4 border-outline-gray-modals\" />\n      <ul class=\"overflow-y-auto px-2\">\n        <template v-for=\"(template, i) in templatesList\" :key=\"template.name\">\n          <li\n            class=\"flex items-center justify-between p-3 cursor-pointer hover:bg-surface-menu-bar rounded\"\n            @click=\"() => emit('updateStep', 'edit-template', { ...template })\"\n          >\n            <div class=\"flex flex-col w-4/6 pr-5\">\n              <div class=\"text-p-base font-medium text-ink-gray-7 truncate\">\n                {{ template.name }}\n              </div>\n              <div class=\"text-p-sm text-ink-gray-5 truncate\">\n                {{ template.subject }}\n              </div>\n            </div>\n            <div class=\"text-base text-ink-gray-6 w-1/6\">\n              {{ template.reference_doctype.replace('CRM ', '') }}\n            </div>\n            <div class=\"flex items-center justify-between w-1/6\">\n              <Switch\n                size=\"sm\"\n                v-model=\"template.enabled\"\n                @update:model-value=\"toggleEmailTemplate(template)\"\n                @click.stop\n              />\n              <Dropdown\n                class=\"\"\n                :options=\"getDropdownOptions(template)\"\n                placement=\"right\"\n                :button=\"{\n                  icon: 'more-horizontal',\n                  variant: 'ghost',\n                  onblur: (e) => {\n                    e.stopPropagation()\n                    confirmDelete = false\n                  },\n                }\"\n                @click.stop\n              />\n            </div>\n          </li>\n          <div\n            v-if=\"templatesList.length !== i + 1\"\n            class=\"h-px border-t mx-2 border-outline-gray-modals\"\n          />\n        </template>\n        <!-- Load More Button -->\n        <div\n          v-if=\"!templates.loading && templates.hasNextPage\"\n          class=\"flex justify-center\"\n        >\n          <Button\n            class=\"mt-3.5 p-2\"\n            @click=\"() => templates.next()\"\n            :loading=\"templates.loading\"\n            :label=\"__('Load More')\"\n            icon-left=\"refresh-cw\"\n          />\n        </div>\n      </ul>\n    </div>\n  </div>\n</template>\n<script setup>\nimport {\n  TextInput,\n  FormControl,\n  Switch,\n  Dropdown,\n  FeatherIcon,\n  toast,\n} from 'frappe-ui'\nimport { ref, computed, inject } from 'vue'\n\nconst emit = defineEmits(['updateStep'])\n\nconst templates = inject('templates')\n\nconst search = ref('')\nconst currentDoctype = ref('All')\nconst confirmDelete = ref(false)\n\nconst templatesList = computed(() => {\n  let list = templates.data || []\n  if (search.value) {\n    list = list.filter(\n      (template) =>\n        template.name.toLowerCase().includes(search.value.toLowerCase()) ||\n        template.subject.toLowerCase().includes(search.value.toLowerCase()),\n    )\n  }\n  if (currentDoctype.value !== 'All') {\n    list = list.filter(\n      (template) => template.reference_doctype === currentDoctype.value,\n    )\n  }\n  return list\n})\n\nfunction toggleEmailTemplate(template) {\n  templates.setValue.submit(\n    {\n      name: template.name,\n      enabled: template.enabled ? 1 : 0,\n    },\n    {\n      onSuccess: () => {\n        toast.success(\n          template.enabled\n            ? __('Template enabled successfully')\n            : __('Template disabled successfully'),\n        )\n      },\n      onError: (error) => {\n        toast.error(error.messages[0] || __('Failed to update template'))\n        // Revert the change if there was an error\n        template.enabled = !template.enabled\n      },\n    },\n  )\n}\n\nfunction deleteTemplate(template) {\n  confirmDelete.value = false\n  templates.delete.submit(template.name, {\n    onSuccess: () => {\n      toast.success(__('Template deleted successfully'))\n    },\n    onError: (error) => {\n      toast.error(error.messages[0] || __('Failed to delete template'))\n    },\n  })\n}\n\nfunction getDropdownOptions(template) {\n  let options = [\n    {\n      label: __('Duplicate'),\n      icon: 'copy',\n      onClick: () => emit('updateStep', 'new-template', { ...template }),\n    },\n    {\n      label: __('Delete'),\n      icon: 'trash-2',\n      onClick: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        confirmDelete.value = true\n      },\n      condition: () => !confirmDelete.value,\n    },\n    {\n      label: __('Confirm Delete'),\n      icon: 'trash-2',\n      theme: 'red',\n      onClick: () => deleteTemplate(template),\n      condition: () => confirmDelete.value,\n    },\n  ]\n\n  return options\n}\n</script>\n","<template>\n  <NewEmailTemplate\n    v-if=\"step === 'new-template'\"\n    :templateData=\"template\"\n    @updateStep=\"updateStep\"\n  />\n  <EmailTemplates\n    v-else-if=\"step === 'template-list'\"\n    @updateStep=\"updateStep\"\n  />\n  <EditEmailTemplate\n    v-else-if=\"step === 'edit-template'\"\n    :templateData=\"template\"\n    @updateStep=\"updateStep\"\n  />\n</template>\n\n<script setup>\nimport NewEmailTemplate from './NewEmailTemplate.vue'\nimport EditEmailTemplate from './EditEmailTemplate.vue'\nimport EmailTemplates from './EmailTemplates.vue'\nimport { createListResource } from 'frappe-ui'\nimport { provide, ref } from 'vue'\n\nconst step = ref('template-list')\nconst template = ref(null)\n\nconst templates = createListResource({\n  type: 'list',\n  doctype: 'Email Template',\n  cache: 'emailTemplates',\n  fields: [\n    'name',\n    'enabled',\n    'use_html',\n    'reference_doctype',\n    'subject',\n    'response',\n    'response_html',\n    'modified',\n    'owner',\n  ],\n  auto: true,\n  filters: { reference_doctype: ['in', ['CRM Lead', 'CRM Deal']] },\n  orderBy: 'modified desc',\n  pageLength: 20,\n})\n\nprovide('templates', templates)\n\nfunction updateStep(newStep, data) {\n  step.value = newStep\n  template.value = data\n}\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-8\">\n    <div class=\"flex justify-between\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2\n          class=\"flex gap-2 text-xl font-semibold leading-none h-5 text-ink-gray-8\"\n        >\n          {{ __('Telephony settings') }}\n          <Badge\n            v-if=\"twilio.isDirty || exotel.isDirty || mediumChanged\"\n            :label=\"__('Not Saved')\"\n            variant=\"subtle\"\n            theme=\"orange\"\n          />\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{ __('Configure telephony settings for your CRM') }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :loading=\"twilio.save.loading || exotel.save.loading\"\n          :label=\"__('Update')\"\n          variant=\"solid\"\n          @click=\"update\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"!twilio.get.loading || !exotel.get.loading\"\n      class=\"flex-1 flex flex-col gap-8 overflow-y-auto\"\n    >\n      <!-- General -->\n      <FormControl\n        type=\"select\"\n        v-model=\"defaultCallingMedium\"\n        :label=\"__('Default medium')\"\n        :options=\"[\n          { label: __(''), value: '' },\n          { label: __('Twilio'), value: 'Twilio' },\n          { label: __('Exotel'), value: 'Exotel' },\n        ]\"\n        class=\"w-1/2\"\n        :description=\"__('Default calling medium for logged in user')\"\n      />\n\n      <!-- Twilio -->\n      <div v-if=\"isManager()\" class=\"flex flex-col justify-between gap-4\">\n        <span class=\"text-base font-semibold text-ink-gray-8\">\n          {{ __('Twilio') }}\n        </span>\n        <FieldLayout\n          v-if=\"twilio?.doc && twilioTabs\"\n          :tabs=\"twilioTabs\"\n          :data=\"twilio.doc\"\n          doctype=\"CRM Twilio Settings\"\n        />\n      </div>\n\n      <!-- Exotel -->\n      <div v-if=\"isManager()\" class=\"flex flex-col justify-between gap-4\">\n        <span class=\"text-base font-semibold text-ink-gray-8\">\n          {{ __('Exotel') }}\n        </span>\n        <FieldLayout\n          v-if=\"exotel?.doc && exotelTabs\"\n          :tabs=\"exotelTabs\"\n          :data=\"exotel.doc\"\n          doctype=\"CRM Exotel Settings\"\n        />\n      </div>\n    </div>\n    <div v-else class=\"flex flex-1 items-center justify-center\">\n      <Spinner class=\"size-8\" />\n    </div>\n    <ErrorMessage :message=\"twilio.save.error || exotel.save.error || error\" />\n  </div>\n</template>\n<script setup>\nimport FieldLayout from '@/components/FieldLayout/FieldLayout.vue'\nimport {\n  createDocumentResource,\n  createResource,\n  FormControl,\n  Spinner,\n  Badge,\n  ErrorMessage,\n  call,\n} from 'frappe-ui'\nimport { defaultCallingMedium } from '@/composables/settings'\nimport { usersStore } from '@/stores/users'\nimport { toast } from 'frappe-ui'\nimport { getRandom } from '@/utils'\nimport { ref, computed, watch } from 'vue'\n\nconst { isManager, isTelephonyAgent } = usersStore()\n\nconst twilioFields = createResource({\n  url: 'crm.api.doc.get_fields',\n  cache: ['fields', 'CRM Twilio Settings'],\n  params: {\n    doctype: 'CRM Twilio Settings',\n    allow_all_fieldtypes: true,\n  },\n  auto: true,\n})\n\nconst exotelFields = createResource({\n  url: 'crm.api.doc.get_fields',\n  cache: ['fields', 'CRM Exotel Settings'],\n  params: {\n    doctype: 'CRM Exotel Settings',\n    allow_all_fieldtypes: true,\n  },\n  auto: true,\n})\n\nconst twilio = createDocumentResource({\n  doctype: 'CRM Twilio Settings',\n  name: 'CRM Twilio Settings',\n  fields: ['*'],\n  auto: true,\n  setValue: {\n    onSuccess: () => {\n      toast.success(__('Twilio settings updated successfully'))\n    },\n    onError: (err) => {\n      toast.error(err.message + ': ' + err.messages[0])\n    },\n  },\n})\n\nconst exotel = createDocumentResource({\n  doctype: 'CRM Exotel Settings',\n  name: 'CRM Exotel Settings',\n  fields: ['*'],\n  auto: true,\n  setValue: {\n    onSuccess: () => {\n      toast.success(__('Exotel settings updated successfully'))\n    },\n    onError: (err) => {\n      toast.error(err.message + ': ' + err.messages[0])\n    },\n  },\n})\n\nconst twilioTabs = computed(() => {\n  if (!twilioFields.data) return []\n  let _tabs = []\n  let fieldsData = twilioFields.data\n\n  if (fieldsData[0].type != 'Tab Break') {\n    let _sections = []\n    if (fieldsData[0].type != 'Section Break') {\n      _sections.push({\n        name: 'first_section',\n        columns: [{ name: 'first_column', fields: [] }],\n      })\n    }\n    _tabs.push({ name: 'first_tab', sections: _sections })\n  }\n\n  fieldsData.forEach((field) => {\n    let last_tab = _tabs[_tabs.length - 1]\n    let _sections = _tabs.length ? last_tab.sections : []\n    if (field.fieldtype === 'Tab Break') {\n      _tabs.push({\n        label: field.label,\n        name: field.fieldname,\n        sections: [\n          {\n            name: 'section_' + getRandom(),\n            columns: [{ name: 'column_' + getRandom(), fields: [] }],\n          },\n        ],\n      })\n    } else if (field.fieldtype === 'Section Break') {\n      _sections.push({\n        label: field.label,\n        name: field.fieldname,\n        hideBorder: field.hide_border,\n        columns: [{ name: 'column_' + getRandom(), fields: [] }],\n      })\n    } else if (field.fieldtype === 'Column Break') {\n      _sections[_sections.length - 1].columns.push({\n        name: field.fieldname,\n        fields: [],\n      })\n    } else {\n      let last_section = _sections[_sections.length - 1]\n      let last_column = last_section.columns[last_section.columns.length - 1]\n      last_column.fields.push(field)\n    }\n  })\n\n  return _tabs\n})\n\nconst exotelTabs = computed(() => {\n  if (!exotelFields.data) return []\n  let _tabs = []\n  let fieldsData = exotelFields.data\n\n  if (fieldsData[0].type != 'Tab Break') {\n    let _sections = []\n    if (fieldsData[0].type != 'Section Break') {\n      _sections.push({\n        name: 'first_section',\n        columns: [{ name: 'first_column', fields: [] }],\n      })\n    }\n    _tabs.push({ name: 'first_tab', sections: _sections })\n  }\n\n  fieldsData.forEach((field) => {\n    let last_tab = _tabs[_tabs.length - 1]\n    let _sections = _tabs.length ? last_tab.sections : []\n    if (field.fieldtype === 'Tab Break') {\n      _tabs.push({\n        label: field.label,\n        name: field.fieldname,\n        sections: [\n          {\n            name: 'section_' + getRandom(),\n            columns: [{ name: 'column_' + getRandom(), fields: [] }],\n          },\n        ],\n      })\n    } else if (field.fieldtype === 'Section Break') {\n      _sections.push({\n        label: field.label,\n        name: field.fieldname,\n        hideBorder: field.hide_border,\n        columns: [{ name: 'column_' + getRandom(), fields: [] }],\n      })\n    } else if (field.fieldtype === 'Column Break') {\n      _sections[_sections.length - 1].columns.push({\n        name: field.fieldname,\n        fields: [],\n      })\n    } else {\n      let last_section = _sections[_sections.length - 1]\n      let last_column = last_section.columns[last_section.columns.length - 1]\n      last_column.fields.push(field)\n    }\n  })\n\n  return _tabs\n})\n\nconst mediumChanged = ref(false)\n\nwatch(defaultCallingMedium, () => {\n  mediumChanged.value = true\n})\n\nfunction update() {\n  if (!validateIfDefaultMediumIsEnabled()) return\n  if (mediumChanged.value) {\n    updateMedium()\n  }\n\n  if (!isManager()) return\n\n  if (twilio.isDirty) {\n    twilio.save.submit()\n  }\n  if (exotel.isDirty) {\n    exotel.save.submit()\n  }\n}\n\nasync function updateMedium() {\n  await call('crm.integrations.api.set_default_calling_medium', {\n    medium: defaultCallingMedium.value,\n  })\n  mediumChanged.value = false\n  error.value = ''\n  toast.success(__('Default calling medium updated successfully'))\n}\n\nconst error = ref('')\n\nfunction validateIfDefaultMediumIsEnabled() {\n  if (isTelephonyAgent() && !isManager()) return true\n\n  if (defaultCallingMedium.value === 'Twilio' && !twilio.doc.enabled) {\n    error.value = __('Twilio is not enabled')\n    return false\n  }\n  if (defaultCallingMedium.value === 'Exotel' && !exotel.doc.enabled) {\n    error.value = __('Exotel is not enabled')\n    return false\n  }\n  return true\n}\n</script>\n","export default \"__VITE_ASSET__ae42638a__\"","export default \"__VITE_ASSET__7cc0e65d__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwMAAALUBAMAAAClQPMzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAACRQTFRFR3BMNqzpdMXvXb3tr+f3o+P1AJ/ZGoPjALPjmeH1dc3uBqfjM5e/jQAAAAZ0Uk5TAPVwwVLTgnc47wAABIBJREFUeNrt1rEJwlAYhdEHNpZa2UpwAxewcAXtbdJYpQo4gATsBVdwAOcTd/DyknC+9zY4XPhLkSRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJGmGL/cTazo5gOWR69KFWCBAgQIAAAQIECBAgmArBHYEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAMHfO4U6X9tP4reb9aX77/v9rqtH8Ar1bEOl1oWgNsGAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjqEfShbu9QTajD/AhS8yqzCwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIKheE2p3DFUkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZLG2Bet4fvU2eVggAAAAABJRU5ErkJggg==\"","export default \"__VITE_ASSET__b6543205__\"","export default \"__VITE_ASSET__14b6d168__\"","export default \"__VITE_ASSET__d995bd23__\"","export default \"__VITE_ASSET__61f532d2__\"","import { validateEmail } from '../../utils'\n\nimport LogoGmail from '@/images/gmail.png'\nimport LogoOutlook from '@/images/outlook.png'\nimport LogoSendgrid from '@/images/sendgrid.png'\nimport LogoSparkpost from '@/images/sparkpost.webp'\nimport LogoYahoo from '@/images/yahoo.png'\nimport LogoYandex from '@/images/yandex.png'\nimport LogoFrappeMail from '@/images/frappe-mail.svg'\n\nconst fixedFields = [\n  {\n    label: __('Account Name'),\n    name: 'email_account_name',\n    type: 'text',\n    placeholder: __('Support / Sales'),\n  },\n  {\n    label: 'Email ID',\n    name: 'email_id',\n    type: 'email',\n    placeholder: 'johndoe@example.com',\n  },\n]\n\nexport const incomingOutgoingFields = [\n  {\n    label: __('Enable Incoming'),\n    name: 'enable_incoming',\n    type: 'checkbox',\n    description: __(\n      'If enabled, records can be created from the incoming emails on this account.',\n    ),\n  },\n  {\n    label: __('Enable Outgoing'),\n    name: 'enable_outgoing',\n    type: 'checkbox',\n    description: __(\n      'If enabled, outgoing emails can be sent from this account.',\n    ),\n  },\n  {\n    label: __('Default Incoming'),\n    name: 'default_incoming',\n    type: 'checkbox',\n    description: __(\n      'If enabled, all replies to your company (eg: replies@yourcomany.com) will come to this account. Note: Only one account can be default incoming.',\n    ),\n  },\n  {\n    label: __('Default Outgoing'),\n    name: 'default_outgoing',\n    type: 'checkbox',\n    description: __(\n      'If enabled, all outgoing emails will be sent from this account. Note: Only one account can be default outgoing.',\n    ),\n  },\n]\n\nexport const popularProviderFields = [\n  ...fixedFields,\n  {\n    label: __('Password'),\n    name: 'password',\n    type: 'password',\n    placeholder: '********',\n  },\n]\n\nexport const customProviderFields = [\n  ...fixedFields,\n  {\n    label: 'Frappe Mail Site',\n    name: 'frappe_mail_site',\n    type: 'text',\n    placeholder: 'https://frappemail.com',\n  },\n  {\n    label: 'API Key',\n    name: 'api_key',\n    type: 'text',\n    placeholder: '********',\n  },\n  {\n    label: 'API Secret',\n    name: 'api_secret',\n    type: 'password',\n    placeholder: '********',\n  },\n]\n\nexport const services = [\n  {\n    name: 'GMail',\n    icon: LogoGmail,\n    info: __(`Setting up GMail requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`),\n    link: 'https://support.google.com/accounts/answer/185833',\n    custom: false,\n  },\n  {\n    name: 'Outlook',\n    icon: LogoOutlook,\n    info: __(`Setting up Outlook requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`),\n    link: 'https://support.microsoft.com/en-us/account-billing/how-to-get-and-use-app-passwords-5896ed9b-4263-e681-128a-a6f2979a7944',\n    custom: false,\n  },\n  {\n    name: 'Sendgrid',\n    icon: LogoSendgrid,\n    info: __(`Setting up Sendgrid requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `),\n    link: 'https://sendgrid.com/docs/ui/account-and-settings/two-factor-authentication/',\n    custom: false,\n  },\n  {\n    name: 'SparkPost',\n    icon: LogoSparkpost,\n    info: __(`Setting up SparkPost requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `),\n    link: 'https://support.sparkpost.com/docs/my-account-and-profile/enabling-two-factor-authentication',\n    custom: false,\n  },\n  {\n    name: 'Yahoo',\n    icon: LogoYahoo,\n    info: __(`Setting up Yahoo requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `),\n    link: 'https://help.yahoo.com/kb/SLN15241.html',\n    custom: false,\n  },\n  {\n    name: 'Yandex',\n    icon: LogoYandex,\n    info: __(`Setting up Yandex requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `),\n    link: 'https://yandex.com/support/id/authorization/app-passwords.html',\n    custom: false,\n  },\n  {\n    name: 'Frappe Mail',\n    icon: LogoFrappeMail,\n    info: __(\n      `Setting up Frappe Mail requires you to have an API key and API Secret of your email account. Read more `,\n    ),\n    link: 'https://github.com/frappe/mail',\n    custom: true,\n  },\n]\n\nexport const emailIcon = {\n  GMail: LogoGmail,\n  Outlook: LogoOutlook,\n  Sendgrid: LogoSendgrid,\n  SparkPost: LogoSparkpost,\n  Yahoo: LogoYahoo,\n  Yandex: LogoYandex,\n  'Frappe Mail': LogoFrappeMail,\n}\n\nexport function validateInputs(state, isCustom) {\n  if (!state.email_account_name) {\n    return __('Account name is required')\n  }\n  if (!state.email_id) {\n    return __('Email ID is required')\n  }\n  const validEmail = validateEmail(state.email_id)\n  if (!validEmail) {\n    return __('Invalid email ID')\n  }\n  if (!isCustom && !state.password) {\n    return __('Password is required')\n  }\n  if (isCustom) {\n    if (!state.api_key) {\n      return __('API Key is required')\n    }\n    if (!state.api_secret) {\n      return\n    }\n  }\n  return ''\n}\n","<template>\n  <div\n    class=\"flex items-center justify-center w-8 h-8 bg-surface-gray-2 cursor-pointer rounded-xl hover:bg-surface-gray-3\"\n    :class=\"{ 'ring-2 ring-outline-gray-4': selected }\"\n  >\n    <img :src=\"logo\" class=\"w-4 h-4\" />\n  </div>\n  <p v-if=\"label\" class=\"text-xs text-center text-ink-gray-6 mt-2\">\n    {{ label }}\n  </p>\n</template>\n\n<script setup>\ndefineProps({\n  logo: {\n    type: String,\n    required: true,\n  },\n  label: {\n    type: String,\n    default: '',\n  },\n  selected: {\n    type: Boolean,\n    default: false,\n  },\n})\n</script>\n","<template>\n  <div class=\"flex flex-col h-full gap-4\">\n    <!-- title and desc -->\n    <div role=\"heading\" aria-level=\"1\" class=\"flex flex-col gap-1\">\n      <h2 class=\"text-xl font-semibold text-ink-gray-8\">\n        {{ __('Setup Email') }}\n      </h2>\n      <p class=\"text-sm text-ink-gray-5\">\n        {{ __('Choose the email service provider you want to configure.') }}\n      </p>\n    </div>\n    <!-- email service provider selection -->\n    <div class=\"flex flex-wrap items-center\">\n      <div\n        v-for=\"s in services\"\n        :key=\"s.name\"\n        class=\"flex flex-col items-center gap-1 mt-4 w-[70px]\"\n        @click=\"handleSelect(s)\"\n      >\n        <EmailProviderIcon\n          :label=\"s.name\"\n          :logo=\"s.icon\"\n          :selected=\"selectedService?.name === s?.name\"\n        />\n      </div>\n    </div>\n    <div v-if=\"selectedService\" class=\"flex flex-col gap-4\">\n      <!-- email service provider info -->\n      <div\n        class=\"flex items-center gap-2 p-2 rounded-md ring-1 ring-outline-gray-3 text-ink-gray-6\"\n      >\n        <CircleAlert class=\"w-5 h-6 w-min-5 w-max-5 min-h-5 max-w-5\" />\n        <div class=\"text-xs text-wrap\">\n          {{ selectedService.info }}\n          <a :href=\"selectedService.link\" target=\"_blank\" class=\"underline\">\n            {{ __('here') }}\n          </a>\n          .\n        </div>\n      </div>\n      <!-- service provider fields -->\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"grid grid-cols-1 gap-4\">\n          <div\n            v-for=\"field in fields\"\n            :key=\"field.name\"\n            class=\"flex flex-col gap-1\"\n          >\n            <FormControl\n              v-model=\"state[field.name]\"\n              :label=\"field.label\"\n              :name=\"field.name\"\n              :type=\"field.type\"\n              :placeholder=\"field.placeholder\"\n            />\n          </div>\n        </div>\n        <div class=\"grid grid-cols-2 gap-4\">\n          <div\n            v-for=\"field in incomingOutgoingFields\"\n            :key=\"field.name\"\n            class=\"flex flex-col gap-1\"\n          >\n            <FormControl\n              v-model=\"state[field.name]\"\n              :label=\"field.label\"\n              :name=\"field.name\"\n              :type=\"field.type\"\n            />\n            <p class=\"text-ink-gray-4 text-p-sm\">{{ field.description }}</p>\n          </div>\n        </div>\n        <ErrorMessage class=\"ml-1\" :message=\"error\" />\n      </div>\n    </div>\n    <!-- action button -->\n    <div v-if=\"selectedService\" class=\"flex justify-between mt-auto\">\n      <Button\n        :label=\"__('Back')\"\n        variant=\"outline\"\n        :disabled=\"addEmailRes.loading\"\n        @click=\"emit('update:step', 'email-list')\"\n      />\n      <Button\n        :label=\"__('Create')\"\n        variant=\"solid\"\n        :loading=\"addEmailRes.loading\"\n        @click=\"createEmailAccount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from 'vue'\nimport { createResource, toast } from 'frappe-ui'\nimport CircleAlert from '~icons/lucide/circle-alert'\nimport {\n  customProviderFields,\n  popularProviderFields,\n  services,\n  validateInputs,\n  incomingOutgoingFields,\n} from './emailConfig'\nimport EmailProviderIcon from './EmailProviderIcon.vue'\n\nconst emit = defineEmits()\n\nconst state = reactive({\n  service: '',\n  email_account_name: '',\n  email_id: '',\n  password: '',\n  api_key: '',\n  api_secret: '',\n  frappe_mail_site: '',\n  enable_incoming: false,\n  enable_outgoing: false,\n  default_incoming: false,\n  default_outgoing: false,\n})\n\nconst selectedService = ref(null)\nconst fields = computed(() =>\n  selectedService.value.custom ? customProviderFields : popularProviderFields,\n)\n\nfunction handleSelect(service) {\n  selectedService.value = service\n  state.service = service.name\n}\n\nconst addEmailRes = createResource({\n  url: 'crm.api.settings.create_email_account',\n  makeParams: (val) => {\n    return {\n      ...val,\n    }\n  },\n  onSuccess: () => {\n    toast.success(__('Email account created successfully'))\n    emit('update:step', 'email-list')\n  },\n  onError: () => {\n    error.value = __('Failed to create email account, Invalid credentials')\n  },\n})\n\nconst error = ref()\nfunction createEmailAccount() {\n  error.value = validateInputs(state, selectedService.value.custom)\n  if (error.value) return\n\n  addEmailRes.submit({ data: state })\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"flex items-center justify-between px-2 py-3 border-outline-gray-modals cursor-pointer hover:bg-surface-menu-bar rounded\"\n  >\n    <!-- avatar and name -->\n    <div class=\"flex items-center justify-between gap-2\">\n      <EmailProviderIcon :logo=\"emailIcon[emailAccount.service]\" />\n      <div>\n        <div class=\"text-p-base text-ink-gray-8\">\n          {{ emailAccount.email_account_name }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-5\">{{ emailAccount.email_id }}</div>\n      </div>\n    </div>\n    <div>\n      <Badge variant=\"subtle\" :label=\"badgeTitle\" theme=\"gray\" />\n    </div>\n    <!-- email id -->\n  </div>\n</template>\n\n<script setup>\nimport { emailIcon } from './emailConfig'\nimport EmailProviderIcon from './EmailProviderIcon.vue'\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  emailAccount: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst badgeTitle = computed(() => {\n  if (\n    props.emailAccount.default_incoming &&\n    props.emailAccount.default_outgoing\n  ) {\n    return __('Default Sending and Inbox')\n  } else if (props.emailAccount.default_incoming) {\n    return __('Default Inbox')\n  } else if (props.emailAccount.default_outgoing) {\n    return __('Default Sending')\n  } else {\n    return __('Inbox')\n  }\n})\n</script>\n\n<style scoped></style>\n","<template>\n  <div>\n    <!-- header -->\n    <div class=\"flex justify-between text-ink-gray-8\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Email accounts') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __(\n              'Manage your email accounts to send and receive emails directly from CRM. You can add multiple accounts and set one as default for incoming and outgoing emails.',\n            )\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('Add Account')\"\n          theme=\"gray\"\n          variant=\"solid\"\n          icon-left=\"plus\"\n          @click=\"emit('update:step', 'email-add')\"\n        />\n      </div>\n    </div>\n\n    <!-- list accounts -->\n    <div\n      v-if=\"!emailAccounts.loading && Boolean(emailAccounts.data?.length)\"\n      class=\"mt-4\"\n    >\n      <div\n        v-for=\"(emailAccount, i) in emailAccounts.data\"\n        :key=\"emailAccount.name\"\n      >\n        <EmailAccountCard\n          :emailAccount=\"emailAccount\"\n          @click=\"emit('update:step', 'email-edit', emailAccount)\"\n        />\n        <div\n          v-if=\"emailAccounts.data.length !== i + 1\"\n          class=\"h-px border-t mx-2 border-outline-gray-modals\"\n        />\n      </div>\n    </div>\n    <!-- fallback if no email accounts -->\n    <div v-else class=\"flex items-center justify-center h-64 text-ink-gray-4\">\n      {{ __('Please add an email account to continue.') }}\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { createListResource } from 'frappe-ui'\nimport EmailAccountCard from './EmailAccountCard.vue'\n\nconst emit = defineEmits(['update:step'])\n\nconst emailAccounts = createListResource({\n  doctype: 'Email Account',\n  cache: true,\n  fields: ['*'],\n  filters: {\n    email_id: ['Not Like', '%example%'],\n  },\n  pageLength: 10,\n  auto: true,\n  onSuccess: (accounts) => {\n    // convert 0 to false to handle boolean fields\n    accounts.forEach((account) => {\n      account.enable_incoming = Boolean(account.enable_incoming)\n      account.enable_outgoing = Boolean(account.enable_outgoing)\n      account.default_incoming = Boolean(account.default_incoming)\n      account.default_outgoing = Boolean(account.default_outgoing)\n    })\n  },\n})\n</script>\n","<template>\n  <div class=\"flex flex-col h-full gap-4\">\n    <!-- title and desc -->\n    <div role=\"heading\" aria-level=\"1\" class=\"flex justify-between gap-1\">\n      <h2 class=\"text-xl font-semibold text-ink-gray-8\">\n        {{ __('Edit Email') }}\n      </h2>\n    </div>\n    <div class=\"w-fit\">\n      <EmailProviderIcon\n        :logo=\"emailIcon[accountData.service]\"\n        :label=\"accountData.service\"\n      />\n    </div>\n    <!-- banner for setting up email account -->\n    <div\n      class=\"flex items-center gap-2 p-2 rounded-md ring-1 ring-outline-gray-3\"\n    >\n      <CircleAlert\n        class=\"size-6 text-ink-gray-4 w-min-5 w-max-5 min-h-5 max-w-5\"\n      />\n      <div class=\"text-xs text-ink-gray-6 text-wrap\">\n        {{ info.description }}\n        <a :href=\"info.link\" target=\"_blank\" class=\"underline\">\n          {{ __('here') }}\n        </a>\n        .\n      </div>\n    </div>\n    <!-- fields -->\n    <div class=\"flex flex-col gap-4\">\n      <div class=\"grid grid-cols-1 gap-4\">\n        <div\n          v-for=\"field in fields\"\n          :key=\"field.name\"\n          class=\"flex flex-col gap-1\"\n        >\n          <FormControl\n            v-model=\"state[field.name]\"\n            :label=\"field.label\"\n            :name=\"field.name\"\n            :type=\"field.type\"\n            :placeholder=\"field.placeholder\"\n          />\n        </div>\n      </div>\n      <div class=\"grid grid-cols-2 gap-4\">\n        <div\n          v-for=\"field in incomingOutgoingFields\"\n          :key=\"field.name\"\n          class=\"flex flex-col gap-1\"\n        >\n          <FormControl\n            v-model=\"state[field.name]\"\n            :label=\"field.label\"\n            :name=\"field.name\"\n            :type=\"field.type\"\n          />\n          <p class=\"text-ink-gray-4 text-p-sm\">{{ field.description }}</p>\n        </div>\n      </div>\n      <ErrorMessage v-if=\"error\" class=\"ml-1\" :message=\"error\" />\n    </div>\n    <!-- action buttons -->\n    <div class=\"flex justify-between mt-auto\">\n      <Button\n        :label=\"__('Back')\"\n        theme=\"gray\"\n        variant=\"outline\"\n        :disabled=\"loading\"\n        @click=\"emit('update:step', 'email-list')\"\n      />\n      <Button\n        :label=\"__('Update Account')\"\n        variant=\"solid\"\n        @click=\"updateAccount\"\n        :loading=\"loading\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from 'vue'\nimport { call, toast } from 'frappe-ui'\nimport EmailProviderIcon from './EmailProviderIcon.vue'\nimport {\n  emailIcon,\n  services,\n  popularProviderFields,\n  customProviderFields,\n  validateInputs,\n  incomingOutgoingFields,\n} from './emailConfig'\nimport CircleAlert from '~icons/lucide/circle-alert'\n\nconst props = defineProps({\n  accountData: null,\n})\n\nconst emit = defineEmits()\n\nconst state = reactive({\n  email_account_name: props.accountData.email_account_name || '',\n  service: props.accountData.service || '',\n  email_id: props.accountData.email_id || '',\n  api_key: props.accountData?.api_key || null,\n  api_secret: props.accountData?.api_secret || null,\n  password: props.accountData?.password || null,\n  frappe_mail_site: props.accountData?.frappe_mail_site || '',\n  enable_incoming: props.accountData.enable_incoming || false,\n  enable_outgoing: props.accountData.enable_outgoing || false,\n  default_outgoing: props.accountData.default_outgoing || false,\n  default_incoming: props.accountData.default_incoming || false,\n})\n\nconst info = {\n  description: __('To know more about setting up email accounts, click'),\n  link: 'https://docs.erpnext.com/docs/user/manual/en/email-account',\n}\n\nconst isCustomService = computed(() => {\n  return services.find((s) => s.name === props.accountData.service).custom\n})\n\nconst fields = computed(() => {\n  if (isCustomService.value) {\n    return customProviderFields\n  }\n  return popularProviderFields\n})\n\nconst error = ref()\nconst loading = ref(false)\nasync function updateAccount() {\n  error.value = validateInputs(state, isCustomService.value)\n  if (error.value) return\n  const old = { ...props.accountData }\n  const updatedEmailAccount = { ...state }\n\n  const nameChanged =\n    old.email_account_name !== updatedEmailAccount.email_account_name\n  delete old.email_account_name\n  delete updatedEmailAccount.email_account_name\n\n  const otherFieldsChanged = isDirty.value\n  const values = updatedEmailAccount\n\n  if (!nameChanged && !otherFieldsChanged) {\n    toast.info(__('No changes made'))\n    return\n  }\n\n  if (nameChanged) {\n    try {\n      loading.value = true\n      await callRenameDoc()\n      succesHandler()\n    } catch (err) {\n      errorHandler()\n    }\n  }\n  if (otherFieldsChanged) {\n    try {\n      loading.value = true\n      await callSetValue(values)\n      succesHandler()\n    } catch (err) {\n      errorHandler()\n    }\n  }\n}\n\nconst isDirty = computed(() => {\n  return (\n    state.email_id !== props.accountData.email_id ||\n    state.api_key !== props.accountData.api_key ||\n    state.api_secret !== props.accountData.api_secret ||\n    state.password !== props.accountData.password ||\n    state.enable_incoming !== props.accountData.enable_incoming ||\n    state.enable_outgoing !== props.accountData.enable_outgoing ||\n    state.default_outgoing !== props.accountData.default_outgoing ||\n    state.default_incoming !== props.accountData.default_incoming ||\n    state.frappe_mail_site !== props.accountData.frappe_mail_site\n  )\n})\n\nasync function callRenameDoc() {\n  const d = await call('frappe.client.rename_doc', {\n    doctype: 'Email Account',\n    old_name: props.accountData.email_account_name,\n    new_name: state.email_account_name,\n  })\n  return d\n}\n\nasync function callSetValue(values) {\n  const d = await call('frappe.client.set_value', {\n    doctype: 'Email Account',\n    name: state.email_account_name,\n    fieldname: values,\n  })\n  return d.name\n}\n\nfunction succesHandler() {\n  emit('update:step', 'email-list')\n  toast.success(__('Email account updated successfully'))\n}\n\nfunction errorHandler() {\n  loading.value = false\n  error.value = __('Failed to update email account, Invalid credentials')\n}\n</script>\n","<template>\n  <div class=\"flex-1 p-8\">\n    <div v-if=\"step === 'email-add'\" class=\"h-full\">\n      <EmailAdd @update:step=\"updateStep\" />\n    </div>\n    <div v-else-if=\"step === 'email-list'\" class=\"h-full\">\n      <EmailAccountList @update:step=\"updateStep\" />\n    </div>\n    <div v-else-if=\"step === 'email-edit'\" class=\"h-full\">\n      <EmailEdit :account-data=\"accountData\" @update:step=\"updateStep\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport EmailAdd from \"./EmailAdd.vue\";\nimport EmailAccountList from \"./EmailAccountList.vue\";\nimport EmailEdit from \"./EmailEdit.vue\";\n\nconst step = ref(\"email-list\");\nconst accountData = ref(null);\nfunction updateStep(newStep, data) {\n  step.value = newStep;\n  accountData.value = data;\n}\n</script>\n","<template>\n  <div\n    class=\"flex p-3 items-center justify-between cursor-pointer hover:bg-surface-menu-bar rounded\"\n  >\n    <div class=\"w-7/12\" @click=\"updateStep('view', data)\">\n      <div class=\"text-base text-ink-gray-7 font-medium\">{{ data.name }}</div>\n      <div\n        v-if=\"data.description && data.description.length > 0\"\n        class=\"text-p-base w-full text-ink-gray-5 mt-0.5 whitespace-nowrap overflow-ellipsis overflow-hidden\"\n      >\n        {{ data.description }}\n      </div>\n    </div>\n    <div class=\"w-3/12\">\n      <Select\n        class=\"w-max -ml-2 bg-transparent border-0 text-ink-gray-6 focus-visible:!ring-0 bg-none\"\n        :options=\"priorityOptions\"\n        v-model=\"data.priority\"\n        @update:modelValue=\"onPriorityChange\"\n      />\n    </div>\n    <div class=\"flex justify-between items-center w-2/12\">\n      <Switch\n        size=\"sm\"\n        :modelValue=\"!data.disabled\"\n        @update:modelValue=\"onToggle\"\n      />\n      <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n        <Button\n          icon=\"more-horizontal\"\n          variant=\"ghost\"\n          @click=\"isConfirmingDelete = false\"\n        />\n      </Dropdown>\n    </div>\n  </div>\n  <Dialog\n    :options=\"{ title: __('Duplicate Assignment Rule') }\"\n    v-model=\"duplicateDialog.show\"\n  >\n    <template #body-content>\n      <div class=\"flex flex-col gap-4\">\n        <FormControl\n          :label=\"__('New Assignment Rule Name')\"\n          type=\"text\"\n          v-model=\"duplicateDialog.name\"\n        />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex gap-2 justify-end\">\n        <Button\n          variant=\"subtle\"\n          :label=\"__('Close')\"\n          @click=\"duplicateDialog.show = false\"\n        />\n        <Button variant=\"solid\" :label=\"__('Duplicate')\" @click=\"duplicate()\" />\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport {\n  Button,\n  createResource,\n  Dialog,\n  Dropdown,\n  FormControl,\n  Select,\n  Switch,\n  toast,\n} from 'frappe-ui'\nimport { inject, ref } from 'vue'\n\nconst assignmentRulesList = inject('assignmentRulesList')\nconst updateStep = inject('updateStep')\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst priorityOptions = [\n  { label: 'Low', value: '0' },\n  { label: 'Low-Medium', value: '1' },\n  { label: 'Medium', value: '2' },\n  { label: 'Medium-High', value: '3' },\n  { label: 'High', value: '4' },\n]\n\nconst duplicateDialog = ref({\n  show: false,\n  name: '',\n})\n\nconst isConfirmingDelete = ref(false)\n\nconst deleteAssignmentRule = () => {\n  createResource({\n    url: 'frappe.client.delete',\n    params: {\n      doctype: 'Assignment Rule',\n      name: props.data.name,\n    },\n    onSuccess: () => {\n      assignmentRulesList.reload()\n      isConfirmingDelete.value = false\n      toast.success(__('Assignment rule deleted'))\n    },\n    auto: true,\n  })\n}\n\nconst dropdownOptions = [\n  {\n    label: __('Duplicate'),\n    onClick: () => {\n      duplicateDialog.value = {\n        show: true,\n        name: props.data.name + ' (Copy)',\n      }\n    },\n    icon: 'copy',\n  },\n  {\n    label: __('Delete'),\n    icon: 'trash-2',\n    onClick: (e) => {\n      e.preventDefault()\n      e.stopImmediatePropagation()\n      isConfirmingDelete.value = true\n    },\n    condition: () => !isConfirmingDelete.value,\n  },\n  {\n    label: __('Confirm Delete'),\n    icon: 'trash-2',\n    theme: 'red',\n    onClick: () => deleteAssignmentRule(),\n    condition: () => isConfirmingDelete.value,\n  },\n]\n\nconst duplicate = () => {\n  createResource({\n    url: 'crm.api.assignment_rule.duplicate_assignment_rule',\n    params: {\n      docname: props.data.name,\n      new_name: duplicateDialog.value.name,\n    },\n    onSuccess: (data) => {\n      assignmentRulesList.reload()\n      toast.success(__('Assignment rule duplicated'))\n      duplicateDialog.value.show = false\n      duplicateDialog.value.name = ''\n      updateStep('view', data)\n    },\n    auto: true,\n  })\n}\n\nconst onPriorityChange = () => {\n  setAssignmentRuleValue('priority', props.data.priority)\n}\n\nconst onToggle = () => {\n  if (!props.data.users_exists && props.data.disabled) {\n    toast.error(__('Cannot enable rule without adding users in it'))\n    return\n  }\n  setAssignmentRuleValue('disabled', !props.data.disabled, 'status')\n}\n\nconst setAssignmentRuleValue = (key, value, fieldName = undefined) => {\n  createResource({\n    url: 'frappe.client.set_value',\n    params: {\n      doctype: 'Assignment Rule',\n      name: props.data.name,\n      fieldname: key,\n      value: value,\n    },\n    onSuccess: () => {\n      assignmentRulesList.reload()\n      toast.success(__('Assignment rule {0} updated', [fieldName || key]))\n    },\n    auto: true,\n  })\n}\n</script>\n","<template>\n  <div\n    v-if=\"assignmentRulesList.loading && !assignmentRulesList.data\"\n    class=\"flex items-center justify-center mt-12\"\n  >\n    <LoadingIndicator class=\"w-4\" />\n  </div>\n  <div v-else>\n    <div\n      v-if=\"assignmentRulesList.data?.length === 0\"\n      class=\"flex items-center justify-center rounded-md border border-outline-gray-2 p-4\"\n    >\n      <div class=\"text-sm text-ink-gray-7\">\n        {{ __('No items in the list') }}\n      </div>\n    </div>\n    <div v-else>\n      <div class=\"flex items-center py-2 px-4 text-sm text-ink-gray-5\">\n        <div class=\"w-7/12\">{{ __('Assignment rule') }}</div>\n        <div class=\"w-3/12\">{{ __('Priority') }}</div>\n        <div class=\"w-2/12\">{{ __('Enabled') }}</div>\n      </div>\n      <div class=\"h-px border-t mx-4 border-outline-gray-modals\" />\n      <div class=\"overflow-y-auto px-2\">\n        <template\n          v-for=\"(assignmentRule, i) in assignmentRulesList.data\"\n          :key=\"assignmentRule.name\"\n        >\n          <AssignmentRuleListItem :data=\"assignmentRule\" />\n          <hr v-if=\"assignmentRulesList.data.length !== i + 1\" class=\"mx-2\" />\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { LoadingIndicator } from 'frappe-ui'\nimport { inject } from 'vue'\nimport AssignmentRuleListItem from './AssignmentRuleListItem.vue'\n\nconst assignmentRulesList = inject('assignmentRulesList')\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-6 p-6 text-ink-gray-8\">\n    <!-- Header -->\n    <div class=\"flex justify-between px-2 pt-2\">\n      <div class=\"flex flex-col gap-1 w-9/12\">\n        <h2 class=\"flex gap-2 text-xl font-semibold leading-none h-5\">\n          {{ __('Assignment rules') }}\n        </h2>\n        <p class=\"text-p-base text-ink-gray-6\">\n          {{\n            __(\n              'Assignment rules automatically assign lead/deal to the right sales user based on predefined conditions',\n            )\n          }}\n        </p>\n      </div>\n      <div class=\"flex item-center space-x-2 w-3/12 justify-end\">\n        <Button\n          :label=\"__('New')\"\n          icon-left=\"plus\"\n          variant=\"solid\"\n          @click=\"goToNew()\"\n        />\n      </div>\n    </div>\n\n    <!-- Assignment rules list -->\n    <div class=\"overflow-y-auto\">\n      <AssignmentRulesList />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport AssignmentRulesList from './AssignmentRulesList.vue'\nimport { createResource } from 'frappe-ui'\nimport { inject, provide } from 'vue'\n\nconst updateStep = inject('updateStep')\n\nconst assignmentRulesListData = createResource({\n  url: 'crm.api.assignment_rule.get_assignment_rules_list',\n  cache: ['assignmentRules', 'get_assignment_rules_list'],\n  auto: true,\n})\n\nprovide('assignmentRulesList', assignmentRulesListData)\n\nconst goToNew = () => {\n  updateStep('view', null)\n}\n</script>\n","import { createResource } from 'frappe-ui'\n\nexport const filterableFields = createResource({\n  url: 'crm.api.doc.get_filterable_fields',\n  transform: (data) => {\n    data = data\n      .filter((field) => !field.fieldname.startsWith('_'))\n      .map((field) => {\n        return {\n          label: field.label,\n          value: field.fieldname,\n          ...field,\n        }\n      })\n    return data\n  },\n})\n","<template>\n  <div\n    class=\"flex gap-2\"\n    :class=\"[\n      {\n        'items-center': !props.isGroup,\n      },\n    ]\"\n  >\n    <div\n      class=\"flex gap-2 w-full\"\n      :class=\"[\n        {\n          'items-center justify-between': !props.isGroup,\n        },\n      ]\"\n    >\n      <div :class=\"'text-end text-base text-gray-600'\">\n        <div v-if=\"props.itemIndex == 0\" class=\"min-w-[66px] text-start\">\n          {{ __('Where') }}\n        </div>\n        <div v-else class=\"min-w-[66px] flex items-start\">\n          <Button\n            variant=\"subtle\"\n            class=\"w-max\"\n            @click=\"toggleConjunction\"\n            icon-right=\"refresh-cw\"\n            :disabled=\"props.itemIndex > 2\"\n            :label=\"conjunction\"\n          />\n        </div>\n      </div>\n      <div v-if=\"!props.isGroup\" class=\"flex items-center gap-2 w-full\">\n        <div id=\"fieldname\" class=\"w-full\">\n          <Autocomplete\n            :options=\"filterableFields.data\"\n            v-model=\"props.condition[0]\"\n            :placeholder=\"__('Field')\"\n            @update:modelValue=\"updateField\"\n          />\n        </div>\n        <div id=\"operator\">\n          <FormControl\n            v-if=\"!props.condition[0]\"\n            disabled\n            type=\"text\"\n            :placeholder=\"__('operator')\"\n            class=\"w-[100px]\"\n          />\n          <FormControl\n            v-else\n            :disabled=\"!props.condition[0]\"\n            type=\"select\"\n            v-model=\"props.condition[1]\"\n            @change=\"updateOperator\"\n            :options=\"getOperators()\"\n            class=\"w-max min-w-[100px]\"\n          />\n        </div>\n        <div id=\"value\" class=\"w-full\">\n          <FormControl\n            v-if=\"!props.condition[0]\"\n            disabled\n            type=\"text\"\n            :placeholder=\"__('condition')\"\n            class=\"w-full\"\n          />\n          <component\n            v-else\n            :is=\"getValueControl()\"\n            v-model=\"props.condition[2]\"\n            @change=\"updateValue\"\n            :placeholder=\"__('condition')\"\n          />\n        </div>\n      </div>\n      <CFConditions\n        v-if=\"props.isGroup && !(props.level == 2 || props.level == 4)\"\n        :conditions=\"props.condition\"\n        :isChild=\"true\"\n        :level=\"props.level\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n      <Button\n        variant=\"outline\"\n        v-if=\"props.isGroup && (props.level == 2 || props.level == 4)\"\n        @click=\"show = true\"\n        :label=\"__('Open nested conditions')\"\n      />\n    </div>\n    <div :class=\"'w-max'\">\n      <Dropdown placement=\"right\" :options=\"dropdownOptions\">\n        <Button variant=\"ghost\" icon=\"more-horizontal\" />\n      </Dropdown>\n    </div>\n  </div>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{ size: '3xl', title: __('Nested conditions') }\"\n  >\n    <template #body-content>\n      <CFConditions\n        :conditions=\"props.condition\"\n        :isChild=\"true\"\n        :level=\"props.level\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport {\n  Autocomplete,\n  Button,\n  DatePicker,\n  DateRangePicker,\n  DateTimePicker,\n  Dialog,\n  Dropdown,\n  FormControl,\n  Rating,\n} from 'frappe-ui'\nimport { computed, defineEmits, h, ref } from 'vue'\nimport GroupIcon from '~icons/lucide/group'\nimport UnGroupIcon from '~icons/lucide/ungroup'\nimport CFConditions from './CFConditions.vue'\nimport { filterableFields } from './filterableFields'\nimport Link from '@/components/Controls/Link.vue'\n\nconst show = ref(false)\nconst emit = defineEmits([\n  'remove',\n  'unGroupConditions',\n  'toggleConjunction',\n  'turnIntoGroup',\n])\n\nconst props = defineProps({\n  condition: {\n    type: Array,\n    required: true,\n  },\n  isChild: {\n    type: Boolean,\n    default: false,\n  },\n  itemIndex: {\n    type: Number,\n  },\n  level: {\n    type: Number,\n    default: 0,\n  },\n  isGroup: {\n    type: Boolean,\n    default: false,\n  },\n  conjunction: {\n    type: String,\n  },\n  disableAddCondition: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst dropdownOptions = computed(() => {\n  const options = []\n\n  if (!props.isGroup && props.level < 4) {\n    options.push({\n      label: __('Turn into a group'),\n      icon: () => h(GroupIcon),\n      onClick: () => {\n        emit('turnIntoGroup')\n      },\n    })\n  }\n\n  if (props.isGroup) {\n    options.push({\n      label: __('Ungroup conditions'),\n      icon: () => h(UnGroupIcon),\n      onClick: () => {\n        emit('unGroupConditions')\n      },\n    })\n  }\n\n  options.push({\n    label: __('Remove'),\n    icon: 'trash-2',\n    variant: 'red',\n    onClick: () => emit('remove'),\n    condition: () => !props.isGroup,\n  })\n\n  options.push({\n    label: __('Remove group'),\n    icon: 'trash-2',\n    variant: 'red',\n    onClick: () => emit('remove'),\n    condition: () => props.isGroup,\n  })\n\n  return options\n})\n\nconst typeCheck = ['Check']\nconst typeLink = ['Link', 'Dynamic Link']\nconst typeNumber = ['Float', 'Int', 'Currency', 'Percent']\nconst typeSelect = ['Select']\nconst typeString = ['Data', 'Long Text', 'Small Text', 'Text Editor', 'Text']\nconst typeDate = ['Date', 'Datetime']\nconst typeRating = ['Rating']\n\nfunction toggleConjunction() {\n  emit('toggleConjunction', props.conjunction)\n}\n\nconst updateField = (field) => {\n  props.condition[0] = field?.fieldname\n  resetConditionValue()\n}\n\nconst resetConditionValue = () => {\n  props.condition[2] = ''\n}\n\nfunction getValueControl() {\n  const [field, operator] = props.condition\n  if (!field) return null\n  const fieldData = filterableFields.data?.find((f) => f.fieldname == field)\n  if (!fieldData) return null\n  const { fieldtype, options } = fieldData\n  if (operator == 'is') {\n    return h(FormControl, {\n      type: 'select',\n      options: [\n        {\n          label: 'Set',\n          value: 'set',\n        },\n        {\n          label: 'Not Set',\n          value: 'not set',\n        },\n      ],\n    })\n  } else if (['like', 'not like', 'in', 'not in'].includes(operator)) {\n    return h(FormControl, { type: 'text' })\n  } else if (typeSelect.includes(fieldtype) || typeCheck.includes(fieldtype)) {\n    const _options =\n      fieldtype == 'Check' ? ['Yes', 'No'] : getSelectOptions(options)\n    return h(FormControl, {\n      type: 'select',\n      options: _options.map((o) => ({\n        label: o,\n        value: o,\n      })),\n    })\n  } else if (typeLink.includes(fieldtype)) {\n    if (fieldtype == 'Dynamic Link') {\n      return h(FormControl, { type: 'text' })\n    }\n    return h(Link, {\n      class: 'form-control',\n      doctype: options,\n      value: props.condition[2],\n    })\n  } else if (typeNumber.includes(fieldtype)) {\n    return h(FormControl, { type: 'number' })\n  } else if (typeDate.includes(fieldtype) && operator == 'between') {\n    return h(DateRangePicker, { value: props.condition[2], iconLeft: '' })\n  } else if (typeDate.includes(fieldtype)) {\n    return h(fieldtype == 'Date' ? DatePicker : DateTimePicker, {\n      value: props.condition[2],\n      iconLeft: '',\n    })\n  } else if (typeRating.includes(fieldtype)) {\n    return h(Rating, {\n      modelValue: props.condition[2] || 0,\n      class: 'truncate',\n      'update:modelValue': (v) => updateValue(v),\n    })\n  } else {\n    return h(FormControl, { type: 'text' })\n  }\n}\n\nfunction updateValue(value) {\n  value = value.target ? value.target.value : value\n  if (props.condition[1] === 'between') {\n    props.condition[2] = [value.split(',')[0], value.split(',')[1]]\n  } else {\n    props.condition[2] = value + ''\n  }\n}\n\nfunction getSelectOptions(options) {\n  return options.split('\\n')\n}\n\nfunction updateOperator(event) {\n  let oldOperatorValue = event.target._value\n  let newOperatorValue = event.target.value\n  props.condition[1] = event.target.value\n  if (!isSameTypeOperator(oldOperatorValue, newOperatorValue)) {\n    props.condition[2] = getDefaultValue(props.condition[0])\n  }\n  resetConditionValue()\n}\n\nfunction getOperators() {\n  let options = []\n  const field = props.condition[0]\n  if (!field) return options\n  const fieldData = filterableFields.data?.find((f) => f.fieldname == field)\n  if (!fieldData) return options\n  const { fieldtype, fieldname } = fieldData\n  if (typeString.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'Like', value: 'like' },\n        { label: 'Not Like', value: 'not like' },\n        { label: 'In', value: 'in' },\n        { label: 'Not In', value: 'not in' },\n        { label: 'Is', value: 'is' },\n      ],\n    )\n  }\n  if (fieldname === '_assign') {\n    options = [\n      { label: 'Like', value: 'like' },\n      { label: 'Not Like', value: 'not like' },\n      { label: 'Is', value: 'is' },\n    ]\n  }\n  if (typeNumber.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'Like', value: 'like' },\n        { label: 'Not Like', value: 'not like' },\n        { label: 'In', value: 'in' },\n        { label: 'Not In', value: 'not in' },\n        { label: 'Is', value: 'is' },\n        { label: '<', value: '<' },\n        { label: '>', value: '>' },\n        { label: '<=', value: '<=' },\n        { label: '>=', value: '>=' },\n      ],\n    )\n  }\n  if (typeSelect.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'In', value: 'in' },\n        { label: 'Not In', value: 'not in' },\n        { label: 'Is', value: 'is' },\n      ],\n    )\n  }\n  if (typeLink.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'Like', value: 'like' },\n        { label: 'Not Like', value: 'not like' },\n        { label: 'In', value: 'in' },\n        { label: 'Not In', value: 'not in' },\n        { label: 'Is', value: 'is' },\n      ],\n    )\n  }\n  if (typeCheck.includes(fieldtype)) {\n    options.push(...[{ label: 'Equals', value: '==' }])\n  }\n  if (['Duration'].includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Like', value: 'like' },\n        { label: 'Not Like', value: 'not like' },\n        { label: 'In', value: 'in' },\n        { label: 'Not In', value: 'not in' },\n        { label: 'Is', value: 'is' },\n      ],\n    )\n  }\n  if (typeDate.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'Is', value: 'is' },\n        { label: '>', value: '>' },\n        { label: '<', value: '<' },\n        { label: '>=', value: '>=' },\n        { label: '<=', value: '<=' },\n        { label: 'Between', value: 'between' },\n      ],\n    )\n  }\n  if (typeRating.includes(fieldtype)) {\n    options.push(\n      ...[\n        { label: 'Equals', value: '==' },\n        { label: 'Not Equals', value: '!=' },\n        { label: 'Is', value: 'is' },\n        { label: '>', value: '>' },\n        { label: '<', value: '<' },\n        { label: '>=', value: '>=' },\n        { label: '<=', value: '<=' },\n      ],\n    )\n  }\n  const op = options.find((o) => o.value == props.condition[1])\n  props.condition[1] = op?.value || options[0].value\n  return options\n}\n\nfunction getDefaultValue(field) {\n  if (typeSelect.includes(field.fieldtype)) {\n    return getSelectOptions(field.options)[0]\n  }\n  if (typeCheck.includes(field.fieldtype)) {\n    return 'Yes'\n  }\n  if (typeDate.includes(field.fieldtype)) {\n    return null\n  }\n  if (typeRating.includes(field.fieldtype)) {\n    return 0\n  }\n  return ''\n}\n\nfunction isSameTypeOperator(oldOperator, newOperator) {\n  let textOperators = ['==', '!=', 'in', 'not in', '>', '<', '>=', '<=']\n  if (\n    textOperators.includes(oldOperator) &&\n    textOperators.includes(newOperator)\n  )\n    return true\n  return false\n}\n</script>\n","<template>\n  <div class=\"rounded-lg border border-outline-gray-2 p-3 flex flex-col gap-4 w-full\">\n    <template v-for=\"(condition, i) in props.conditions\" :key=\"condition.field\">\n      <CFCondition\n        v-if=\"Array.isArray(condition)\"\n        :condition=\"condition\"\n        :isChild=\"props.isChild\"\n        :itemIndex=\"i\"\n        @remove=\"removeCondition(condition)\"\n        @unGroupConditions=\"unGroupConditions(condition)\"\n        :level=\"props.level + 1\"\n        @toggleConjunction=\"toggleConjunction\"\n        :isGroup=\"isGroupCondition(condition[0])\"\n        :conjunction=\"getConjunction()\"\n        @turnIntoGroup=\"turnIntoGroup(condition)\"\n        :disableAddCondition=\"props.disableAddCondition\"\n      />\n    </template>\n    <div v-if=\"props.isChild\" class=\"flex\">\n      <Dropdown v-slot=\"{ open }\" :options=\"dropdownOptions\">\n        <Button\n          :disabled=\"props.disableAddCondition\"\n          :label=\"__('Add condition')\"\n          icon-left=\"plus\"\n          :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n        />\n      </Dropdown>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Button, Dropdown } from 'frappe-ui'\nimport { computed, watch } from 'vue'\nimport CFCondition from './CFCondition.vue'\nimport { filterableFields } from './filterableFields'\n\nconst props = defineProps({\n  conditions: {\n    type: Array,\n    required: true,\n  },\n  isChild: {\n    type: Boolean,\n    default: false,\n  },\n  level: {\n    type: Number,\n    default: 0,\n  },\n  disableAddCondition: {\n    type: Boolean,\n    default: false,\n  },\n  doctype: {\n    type: String,\n    required: true,\n  },\n})\n\nconst getConjunction = () => {\n  let conjunction = 'and'\n  props.conditions.forEach((condition) => {\n    if (typeof condition == 'string') {\n      conjunction = condition\n    }\n  })\n  return conjunction\n}\n\nconst turnIntoGroup = (condition) => {\n  props.conditions.splice(props.conditions.indexOf(condition), 1, [condition])\n}\n\nconst isGroupCondition = (condition) => {\n  return Array.isArray(condition)\n}\n\nconst dropdownOptions = computed(() => {\n  const options = [\n    {\n      label: __('Add condition'),\n      onClick: () => {\n        const conjunction = getConjunction()\n        props.conditions.push(conjunction, ['', '', ''])\n      },\n    },\n  ]\n  if (props.level < 3) {\n    options.push({\n      label: __('Add condition group'),\n      onClick: () => {\n        const conjunction = getConjunction()\n        props.conditions.push(conjunction, [[]])\n      },\n    })\n  }\n  return options\n})\n\nfunction removeCondition(condition) {\n  const conditionIndex = props.conditions.indexOf(condition)\n  if (conditionIndex == 0) {\n    props.conditions.splice(conditionIndex, 2)\n  } else {\n    props.conditions.splice(conditionIndex - 1, 2)\n  }\n}\n\nfunction unGroupConditions(condition) {\n  const conjunction = getConjunction()\n  const newConditions = condition.map((c) => {\n    if (typeof c == 'string') {\n      return conjunction\n    }\n    return c\n  })\n\n  const index = props.conditions.indexOf(condition)\n  if (index !== -1) {\n    props.conditions.splice(index, 1, ...newConditions)\n  }\n}\n\nfunction toggleConjunction(conjunction) {\n  for (let i = 0; i < props.conditions.length; i++) {\n    if (typeof props.conditions[i] == 'string') {\n      props.conditions[i] = conjunction == 'and' ? 'or' : 'and'\n    }\n  }\n}\n\nwatch(\n  () => props.doctype,\n  (doctype) => {\n    filterableFields.submit({\n      doctype,\n    })\n  },\n  { immediate: true },\n)\n</script>\n","<template>\n  <CFConditions\n    v-if=\"props.conditions.length > 0\"\n    :conditions=\"props.conditions\"\n    :level=\"0\"\n    :disableAddCondition=\"props.errors !== ''\"\n    :doctype=\"props.doctype\"\n  />\n  <div\n    v-if=\"props.conditions.length == 0\"\n    class=\"flex p-4 items-center cursor-pointer justify-center gap-2 text-sm border border-outline-gray-2 text-gray-600 rounded-md\"\n    @click=\"\n      () => {\n        props.conditions.push(['', '', ''])\n        validateAssignmentRule(props.name)\n      }\n    \"\n  >\n    <FeatherIcon name=\"plus\" class=\"h-4\" />\n    {{ __('Add a condition') }}\n  </div>\n  <div class=\"flex items-center justify-between mt-2\">\n    <div class=\"\" v-if=\"props.conditions.length > 0\">\n      <Dropdown v-slot=\"{ open }\" :options=\"dropdownOptions\">\n        <Button\n          :disabled=\"props.errors !== ''\"\n          :icon-right=\"open ? 'chevron-up' : 'chevron-down'\"\n          :label=\"__('Add condition')\"\n        />\n      </Dropdown>\n    </div>\n    <ErrorMessage v-if=\"props.conditions.length > 0\" :message=\"props.errors\" />\n  </div>\n</template>\n\n<script setup>\nimport { Button, Dropdown, ErrorMessage, FeatherIcon } from 'frappe-ui'\nimport { watchDebounced } from '@vueuse/core'\nimport { validateConditions } from '@/utils'\nimport CFConditions from '../../ConditionsFilter/CFConditions.vue'\nimport { inject } from 'vue'\n\nconst props = defineProps({\n  conditions: Array,\n  name: String,\n  errors: String,\n  doctype: String,\n})\n\nconst validateAssignmentRule = inject('validateAssignmentRule')\n\nconst getConjunction = () => {\n  let conjunction = 'and'\n  props.conditions.forEach((condition) => {\n    if (typeof condition == 'string') {\n      conjunction = condition\n    }\n  })\n  return conjunction\n}\n\nconst dropdownOptions = [\n  {\n    label: __('Add condition'),\n    onClick: () => {\n      addCondition()\n    },\n  },\n  {\n    label: __('Add condition group'),\n    onClick: () => {\n      const conjunction = getConjunction()\n      props.conditions.push(conjunction, [[]])\n    },\n  },\n]\n\nconst addCondition = () => {\n  const isValid = validateConditions(props.conditions)\n\n  if (!isValid) {\n    return\n  }\n  const conjunction = getConjunction()\n\n  props.conditions.push(conjunction, ['', '', ''])\n}\n\nwatchDebounced(\n  () => [...props.conditions],\n  () => {\n    validateAssignmentRule(props.name)\n  },\n  { deep: true, debounce: 300 },\n)\n</script>\n","<template>\n  <div\n    class=\"grid py-3.5 px-4 items-center\"\n    style=\"grid-template-columns: 3fr 1fr\"\n  >\n    <div class=\"text-ink-gray-7 font-medium\">{{ __(data.day) }}</div>\n    <div class=\"flex justify-start\">\n      <Switch v-model=\"data.active\" @update:model-value=\"toggleDay\" />\n    </div>\n  </div>\n  <hr v-if=\"!isLast\" />\n</template>\n\n<script setup>\nimport { Switch } from 'frappe-ui'\nimport { inject } from 'vue'\n\nconst assignmentRuleData = inject('assignmentRuleData')\n\nconst props = defineProps({\n  data: {\n    type: Object,\n    required: true,\n  },\n  isLast: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst toggleDay = (isActive) => {\n  const dayIndex = assignmentRuleData.value.assignmentDays.findIndex(\n    (d) => d === props.data.day,\n  )\n\n  if (isActive && dayIndex === -1) {\n    assignmentRuleData.value.assignmentDays.push(props.data.day)\n  } else {\n    assignmentRuleData.value.assignmentDays.splice(dayIndex, 1)\n  }\n}\n</script>\n","<template>\n  <div class=\"rounded-md border px-2 border-outline-gray-2 text-sm\">\n    <div\n      class=\"grid p-2 px-4 items-center\"\n      style=\"grid-template-columns: 3fr 1fr\"\n    >\n      <div\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        class=\"text-gray-600 overflow-hidden whitespace-nowrap text-ellipsis\"\n      >\n        {{ __(column.label) }}\n      </div>\n    </div>\n    <hr />\n    <AssignmentScheduleItem\n      v-for=\"(day, index) in days\"\n      :key=\"day.day\"\n      :data=\"day\"\n      :isLast=\"index === days.length - 1\"\n    />\n  </div>\n  <ErrorMessage :message=\"assignmentRuleErrors.assignmentDays\" class=\"mt-2\" />\n</template>\n\n<script setup>\nimport AssignmentScheduleItem from './AssignmentScheduleItem.vue'\nimport { ErrorMessage } from 'frappe-ui'\nimport { onMounted, ref, inject } from 'vue'\n\nconst assignmentRuleData = inject('assignmentRuleData')\nconst assignmentRuleErrors = inject('assignmentRuleErrors')\n\nconst columns = [\n  {\n    label: 'Days',\n    key: 'day',\n  },\n  {\n    label: 'Active',\n    key: 'active',\n  },\n]\n\nconst days = ref([\n  {\n    day: 'Monday',\n    active: false,\n  },\n  {\n    day: 'Tuesday',\n    active: false,\n  },\n  {\n    day: 'Wednesday',\n    active: false,\n  },\n  {\n    day: 'Thursday',\n    active: false,\n  },\n  {\n    day: 'Friday',\n    active: false,\n  },\n  {\n    day: 'Saturday',\n    active: false,\n  },\n  {\n    day: 'Sunday',\n    active: false,\n  },\n])\n\nonMounted(() => {\n  assignmentRuleData.value.assignmentDays.forEach((day) => {\n    const workDay = days.value.find((d) => d.day === day)\n    if (workDay) {\n      workDay.active = true\n    }\n  })\n})\n</script>\n","<template>\n  <Combobox :multiple=\"true\">\n    <Popover placement=\"bottom-end\">\n      <template #target=\"{ togglePopover }\">\n        <Button\n          variant=\"subtle\"\n          icon-left=\"plus\"\n          @click=\"togglePopover()\"\n          :label=\"__('Add Assignee')\"\n        />\n      </template>\n      <template #body=\"{ togglePopover }\">\n        <div class=\"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl w-60\">\n          <div class=\"relative px-1.5 pt-0.5\">\n            <ComboboxInput\n              ref=\"search\"\n              class=\"form-input w-full\"\n              type=\"text\"\n              @change=\"(e) => debouncedQuery(e.target.value)\"\n              :value=\"query\"\n              autocomplete=\"off\"\n              :placeholder=\"__('Search')\"\n            />\n            <button\n              class=\"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center\"\n              @click=\"query = ''\"\n            >\n              <FeatherIcon name=\"x\" class=\"w-4\" />\n            </button>\n          </div>\n          <ComboboxOptions class=\"my-2 max-h-64 overflow-y-auto px-1.5\" static>\n            <ComboboxOption\n              v-show=\"usersList.length > 0\"\n              v-for=\"user in usersList\"\n              :key=\"user.username\"\n              :value=\"user\"\n              as=\"template\"\n              v-slot=\"{ active }\"\n              @click=\"\n                (e) => {\n                  e.stopPropagation()\n                  addAssignee(user)\n                }\n              \"\n            >\n              <li\n                class=\"flex items-center rounded p-1.5 w-full text-base\"\n                :class=\"{ 'bg-gray-100': active }\"\n              >\n                <div class=\"flex gap-2 items-center w-full select-none\">\n                  <Avatar\n                    :shape=\"'circle'\"\n                    :image=\"user.user_image\"\n                    :label=\"user.full_name\"\n                    size=\"lg\"\n                  />\n                  <div class=\"flex flex-col gap-1\">\n                    <div class=\"font-semibold text-ink-gray-7\">\n                      {{ user.full_name }}\n                    </div>\n                    <div class=\"text-ink-gray-6\">{{ user.email }}</div>\n                  </div>\n                </div>\n              </li>\n            </ComboboxOption>\n            <li\n              v-if=\"usersList.length == 0\"\n              class=\"mt-1.5 rounded-md p-1.5 text-base text-gray-600\"\n            >\n              {{ __('No results found') }}\n            </li>\n          </ComboboxOptions>\n          <div class=\"border-t p-1.5 pb-0.5 *:w-full\">\n            <Button\n              variant=\"ghost\"\n              icon-left=\"plus\"\n              class=\"w-full\"\n              :label=\"__('Invite agent')\"\n              @click=\"\n                () => {\n                  inviteAgent()\n                  togglePopover()\n                }\n              \"\n            />\n          </div>\n        </div>\n      </template>\n    </Popover>\n  </Combobox>\n</template>\n\n<script setup>\nimport {\n  Combobox,\n  ComboboxInput,\n  ComboboxOption,\n  ComboboxOptions,\n} from '@headlessui/vue'\nimport { useDebounceFn } from '@vueuse/core'\nimport { Avatar, Popover } from 'frappe-ui'\nimport { computed, inject, ref } from 'vue'\nimport { usersStore } from '@/stores/users'\nimport { globalStore } from '@/stores/global'\nimport { activeSettingsPage } from '@/composables/settings'\n\nconst emit = defineEmits(['addAssignee'])\nconst query = ref('')\nconst { users } = usersStore()\nconst { $dialog } = globalStore()\nconst assignmentRuleData = inject('assignmentRuleData')\n\nconst debouncedQuery = useDebounceFn((val) => {\n  query.value = val\n}, 300)\n\nconst usersList = computed(() => {\n  let filteredUsers =\n    users.data?.crmUsers?.filter((user) => user.name !== 'Administrator') || []\n\n  return filteredUsers\n    .filter(\n      (user) =>\n        user.name?.includes(query.value) ||\n        user.full_name?.includes(query.value),\n    )\n    .filter((user) => {\n      return !assignmentRuleData.value.users.some((u) => u.user === user.email)\n    })\n})\n\nconst addAssignee = (user) => {\n  const userExists = assignmentRuleData.value.users.some(\n    (u) => u.user === user.user,\n  )\n  if (!userExists) {\n    assignmentRuleData.value.users.push({\n      full_name: user.full_name,\n      email: user.email,\n      user_image: user.user_image,\n      user: user.email,\n    })\n    emit('addAssignee', user)\n  }\n}\n\nconst inviteAgent = () => {\n  $dialog({\n    title: __('Invite agent'),\n    message: __(\n      'You will be redirected to invite user page, unsaved changes will be lost.',\n    ),\n    variant: 'solid',\n    actions: [\n      {\n        label: __('Go to invite page'),\n        variant: 'solid',\n        onClick: (close) => {\n          activeSettingsPage.value = 'Invite User'\n          close()\n        },\n      },\n    ],\n  })\n}\n</script>\n","<template>\n  <div>\n    <div class=\"flex flex-col gap-1\">\n      <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n        __('Assignee Rules')\n      }}</span>\n      <span class=\"text-p-sm text-ink-gray-6\">\n        {{\n          __('Choose how {0} are assigned among salespeople.', [documentType])\n        }}\n      </span>\n    </div>\n    <div class=\"mt-8 flex items-center justify-between gap-2\">\n      <div>\n        <div class=\"text-base font-medium text-ink-gray-8\">\n          {{\n            __('{0} Routing', [\n              assignmentRuleData.documentType == 'CRM Lead'\n                ? __('Lead')\n                : __('Deal'),\n            ])\n          }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-6 mt-1\">\n          {{\n            __('Choose how {0} are assigned among the selected assignees.', [\n              documentType,\n            ])\n          }}\n        </div>\n      </div>\n      <div>\n        <Popover placement=\"bottom-end\">\n          <template #target=\"{ togglePopover }\">\n            <div\n              class=\"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-outline-gray-2 bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] select-none min-w-40\"\n              @click=\"togglePopover()\"\n            >\n              <div>\n                {{\n                  documentRoutingOptions.find(\n                    (option) => option.value == assignmentRuleData.rule,\n                  )?.label\n                }}\n              </div>\n              <FeatherIcon name=\"chevron-down\" class=\"size-4\" />\n            </div>\n          </template>\n          <template #body=\"{ togglePopover }\">\n            <div\n              class=\"p-1 text-ink-gray-7 mt-1 w-48 bg-white shadow-xl rounded\"\n            >\n              <div\n                v-for=\"option in documentRoutingOptions\"\n                :key=\"option.value\"\n                class=\"p-2 cursor-pointer hover:bg-gray-50 text-sm flex items-center justify-between rounded\"\n                @click=\"\n                  () => {\n                    assignmentRuleData.rule = option.value\n                    togglePopover()\n                  }\n                \"\n              >\n                <span>\n                  {{ option.label }}\n                </span>\n                <FeatherIcon\n                  v-if=\"assignmentRuleData.rule == option.value\"\n                  name=\"check\"\n                  class=\"size-4\"\n                />\n              </div>\n            </div>\n          </template>\n        </Popover>\n      </div>\n    </div>\n    <div class=\"mt-7 flex items-center justify-between gap-2\">\n      <div>\n        <div class=\"text-base font-medium text-ink-gray-8\">\n          {{ __('Assignees') }}\n        </div>\n        <div class=\"text-p-sm text-ink-gray-6 mt-1\">\n          {{ __('Select the assignees for {0}.', [documentType]) }}\n        </div>\n      </div>\n      <AssigneeSearch @addAssignee=\"validateAssignmentRule('users')\" />\n    </div>\n    <div class=\"mt-4 flex flex-wrap gap-2\">\n      <div\n        v-for=\"user in users\"\n        :key=\"user.name\"\n        class=\"flex items-center gap-2 text-sm bg-surface-gray-2 rounded-md p-1 w-max px-2 select-none\"\n      >\n        <Avatar :image=\"user.user_image\" :label=\"user.full_name\" size=\"sm\" />\n        <div class=\"text-ink-gray-7\">\n          {{ user.full_name }}\n        </div>\n        <Tooltip\n          v-if=\"user.email == assignmentRuleData.lastUser\"\n          :text=\"__('Last user assigned by this rule')\"\n          :hover-delay=\"0.35\"\n          :placement=\"'top'\"\n        >\n          <div\n            class=\"text-xs rounded-full select-none bg-blue-600 text-white p-0.5 px-2\"\n          >\n            {{ __('Last') }}\n          </div>\n        </Tooltip>\n        <Button variant=\"ghost\" icon=\"x\" @click=\"removeAssignedUser(user)\" />\n      </div>\n    </div>\n    <ErrorMessage :message=\"assignmentRuleErrors.users\" />\n  </div>\n</template>\n\n<script setup>\nimport { Avatar, Button, ErrorMessage, Popover, Tooltip } from 'frappe-ui'\nimport AssigneeSearch from './AssigneeSearch.vue'\nimport { computed, inject } from 'vue'\nimport { usersStore } from '@/stores/users'\n\nconst { getUser } = usersStore()\nconst assignmentRuleData = inject('assignmentRuleData')\nconst assignmentRuleErrors = inject('assignmentRuleErrors')\nconst validateAssignmentRule = inject('validateAssignmentRule')\nconst documentType = computed(() =>\n  assignmentRuleData.value.documentType == 'CRM Lead'\n    ? __('leads')\n    : __('deals'),\n)\n\nconst documentRoutingOptions = [\n  {\n    label: 'Auto-rotate',\n    value: 'Round Robin',\n  },\n  {\n    label: 'Assign by workload',\n    value: 'Load Balancing',\n  },\n]\n\nconst removeAssignedUser = (user) => {\n  assignmentRuleData.value.users = assignmentRuleData.value.users.filter(\n    (u) => u.user !== user.name,\n  )\n  validateAssignmentRule('users')\n}\n\nconst users = computed(() => {\n  const _users = []\n  assignmentRuleData.value.users.forEach((user) => {\n    _users.push(getUser(user.user))\n  })\n  return _users\n})\n</script>\n","<template>\n  <div\n    v-if=\"!getAssignmentRuleData.loading\"\n    class=\"flex flex-col h-full gap-6 px-6 py-8 text-ink-gray-8\"\n  >\n    <div class=\"flex items-center justify-between px-2 w-full\">\n      <div class=\"flex items-center gap-2\">\n        <Button\n          variant=\"ghost\"\n          icon-left=\"chevron-left\"\n          :label=\"\n            assignmentRuleData.assignmentRuleName || __('New Assignment Rule')\n          \"\n          size=\"md\"\n          @click=\"goBack()\"\n          class=\"cursor-pointer -ml-4 hover:bg-transparent focus:bg-transparent focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:none active:bg-transparent active:outline-none active:ring-0 active:ring-offset-0 active:text-ink-gray-5 font-semibold text-xl hover:opacity-70 !pr-0 !max-w-96 !justify-start\"\n        />\n        <Badge\n          :variant=\"'subtle'\"\n          :theme=\"'orange'\"\n          size=\"sm\"\n          :label=\"__('Unsaved')\"\n          v-if=\"isDirty\"\n        />\n      </div>\n      <div class=\"flex items-center gap-4\">\n        <div\n          class=\"flex items-center justify-between gap-2\"\n          @click=\"assignmentRuleData.disabled = !assignmentRuleData.disabled\"\n        >\n          <Switch size=\"sm\" :model-value=\"!assignmentRuleData.disabled\" />\n          <span class=\"text-sm text-ink-gray-7\">{{ __('Enabled') }}</span>\n        </div>\n        <Button\n          :disabled=\"Boolean(!isDirty && step.data)\"\n          :label=\"__('Save')\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"saveAssignmentRule()\"\n          :loading=\"isLoading || getAssignmentRuleData.loading\"\n        />\n      </div>\n    </div>\n    <div class=\"overflow-y-auto px-2\">\n      <div class=\"grid grid-cols-2 gap-5\">\n        <div>\n          <FormControl\n            :type=\"'text'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            :placeholder=\"__('Name')\"\n            :label=\"__('Name')\"\n            v-model=\"assignmentRuleData.assignmentRuleName\"\n            required\n            maxlength=\"50\"\n            @change=\"validateAssignmentRule('assignmentRuleName')\"\n          />\n          <ErrorMessage\n            :message=\"assignmentRuleErrors.assignmentRuleName\"\n            class=\"mt-2\"\n          />\n        </div>\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel :label=\"__('Priority')\" />\n          <Popover>\n            <template #target=\"{ togglePopover }\">\n              <div\n                class=\"flex items-center justify-between text-base rounded h-7 py-1.5 pl-2 pr-2 border border-outline-gray-2 bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full dark:[color-scheme:dark] cursor-default\"\n                @click=\"togglePopover()\"\n              >\n                <div>\n                  {{\n                    priorityOptions.find(\n                      (option) => option.value == assignmentRuleData.priority,\n                    )?.label\n                  }}\n                </div>\n                <FeatherIcon name=\"chevron-down\" class=\"size-4\" />\n              </div>\n            </template>\n            <template #body=\"{ togglePopover }\">\n              <div\n                class=\"p-1 text-ink-gray-6 top-1 absolute w-full bg-white shadow-2xl rounded\"\n              >\n                <div\n                  v-for=\"option in priorityOptions\"\n                  :key=\"option.value\"\n                  class=\"p-2 cursor-pointer hover:bg-gray-50 text-base flex items-center justify-between rounded\"\n                  @click=\"\n                    () => {\n                      assignmentRuleData.priority = option.value\n                      togglePopover()\n                    }\n                  \"\n                >\n                  {{ option.label }}\n                  <FeatherIcon\n                    v-if=\"assignmentRuleData.priority == option.value\"\n                    name=\"check\"\n                    class=\"size-4\"\n                  />\n                </div>\n              </div>\n            </template>\n          </Popover>\n        </div>\n        <div>\n          <FormControl\n            :type=\"'textarea'\"\n            size=\"sm\"\n            variant=\"subtle\"\n            :placeholder=\"__('Description')\"\n            :label=\"__('Description')\"\n            required\n            maxlength=\"250\"\n            @change=\"validateAssignmentRule('description')\"\n            v-model=\"assignmentRuleData.description\"\n          />\n          <ErrorMessage\n            :message=\"assignmentRuleErrors.description\"\n            class=\"mt-2\"\n          />\n        </div>\n        <div class=\"flex flex-col gap-1.5\">\n          <FormLabel :label=\"__('Apply on')\" />\n          <Select\n            :options=\"[\n              {\n                label: 'Lead',\n                value: 'CRM Lead',\n              },\n              {\n                label: 'Deal',\n                value: 'CRM Deal',\n              },\n            ]\"\n            v-model=\"assignmentRuleData.documentType\"\n          />\n        </div>\n      </div>\n      <hr class=\"my-8\" />\n      <div>\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n            __('Assignment condition')\n          }}</span>\n          <div class=\"flex items-center justify-between gap-6\">\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{\n                __('Choose which {0} are affected by this assignment rule.', [\n                  documentType,\n                ])\n              }}\n              <a\n                class=\"font-medium underline\"\n                href=\"https://docs.frappe.io/crm/assignment-rule\"\n                target=\"_blank\"\n                >{{ __('Learn about conditions') }}</a\n              >\n            </span>\n            <div v-if=\"isOldSla && step.data\">\n              <Popover trigger=\"hover\" :hoverDelay=\"0.25\" placement=\"top-end\">\n                <template #target>\n                  <div\n                    class=\"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap items-center\"\n                  >\n                    <span>{{ __('Old Condition') }}</span>\n                    <FeatherIcon name=\"info\" class=\"size-4\" />\n                  </div>\n                </template>\n                <template #body-main>\n                  <div\n                    class=\"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5\"\n                  >\n                    <code>{{ assignmentRuleData.assignCondition }}</code>\n                  </div>\n                </template>\n              </Popover>\n            </div>\n          </div>\n        </div>\n        <div class=\"mt-5\">\n          <div\n            class=\"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-outline-gray-2 rounded-md p-3 py-4\"\n            v-if=\"!useNewUI && assignmentRuleData.assignCondition\"\n          >\n            <span class=\"text-p-sm\">\n              {{ __('Conditions for this rule were created from') }}\n              <a :href=\"deskUrl\" target=\"_blank\" class=\"underline\">{{\n                __('desk')\n              }}</a>\n              {{\n                __(\n                  'which are not compatible with this UI, you will need to recreate the conditions here if you want to manage and add new conditions from this UI.',\n                )\n              }}\n            </span>\n            <Button\n              :label=\"__('I understand, add conditions')\"\n              variant=\"subtle\"\n              theme=\"gray\"\n              @click=\"useNewUI = true\"\n            />\n          </div>\n          <AssignmentRulesSection\n            :conditions=\"assignmentRuleData.assignConditionJson\"\n            name=\"assignCondition\"\n            :errors=\"assignmentRuleErrors.assignConditionError\"\n            :doctype=\"assignmentRuleData.documentType\"\n            v-else\n          />\n          <div class=\"flex justify-end\">\n            <ErrorMessage\n              :message=\"assignmentRuleErrors.assignCondition\"\n              class=\"mt-2\"\n            />\n          </div>\n        </div>\n      </div>\n      <hr class=\"my-8\" />\n      <div>\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n            __('Unassignment condition')\n          }}</span>\n          <div class=\"flex items-center justify-between gap-6\">\n            <span class=\"text-p-sm text-ink-gray-6\">\n              {{\n                __(\n                  'Choose which {0} are affected by this un-assignment rule.',\n                  [documentType],\n                )\n              }}\n              <a\n                class=\"font-medium underline\"\n                href=\"https://docs.frappe.io/crm/assignment-rule\"\n                target=\"_blank\"\n                >{{ __('Learn about conditions') }}</a\n              >\n            </span>\n            <div\n              v-if=\"\n                isOldSla && step.data && assignmentRuleData.unassignCondition\n              \"\n            >\n              <Popover trigger=\"hover\" :hoverDelay=\"0.25\" placement=\"top-end\">\n                <template #target>\n                  <div\n                    class=\"text-sm text-ink-gray-6 flex gap-1 cursor-default text-nowrap items-center\"\n                  >\n                    <span> {{ __('Old Condition') }} </span>\n                    <FeatherIcon name=\"info\" class=\"size-4\" />\n                  </div>\n                </template>\n                <template #body-main>\n                  <div\n                    class=\"text-sm text-ink-gray-6 p-2 bg-white rounded-md max-w-96 text-wrap whitespace-pre-wrap leading-5\"\n                  >\n                    <code>{{ assignmentRuleData.unassignCondition }}</code>\n                  </div>\n                </template>\n              </Popover>\n            </div>\n          </div>\n        </div>\n        <div class=\"mt-5\">\n          <div\n            v-if=\"!useNewUI && assignmentRuleData.unassignCondition\"\n            class=\"flex flex-col gap-3 items-center text-center text-ink-gray-7 text-sm mb-2 border border-outline-gray-2 rounded-md p-3 py-4\"\n          >\n            <span class=\"text-p-sm\">\n              {{ __('Conditions for this rule were created from') }}\n              <a :href=\"deskUrl\" target=\"_blank\" class=\"underline\">\n                {{ __('desk') }}\n              </a>\n              {{\n                __(\n                  'which are not compatible with this UI, you will need to recreate the conditions here if you want to manage and add new conditions from this UI.',\n                )\n              }}\n            </span>\n            <Button\n              :label=\"__('I understand, add conditions')\"\n              variant=\"subtle\"\n              theme=\"gray\"\n              @click=\"useNewUI = true\"\n            />\n          </div>\n          <AssignmentRulesSection\n            v-else\n            :conditions=\"assignmentRuleData.unassignConditionJson\"\n            name=\"unassignCondition\"\n            :errors=\"assignmentRuleErrors.unassignConditionError\"\n            :doctype=\"assignmentRuleData.documentType\"\n          />\n        </div>\n      </div>\n      <hr class=\"my-8\" />\n      <div>\n        <div class=\"flex flex-col gap-1\">\n          <span class=\"text-lg font-semibold text-ink-gray-8\">{{\n            __('Assignment Schedule')\n          }}</span>\n          <span class=\"text-p-sm text-ink-gray-6\">\n            {{\n              __('Choose the days of the week when this rule should be active.')\n            }}\n          </span>\n        </div>\n        <div class=\"mt-6\">\n          <AssignmentSchedule />\n        </div>\n      </div>\n      <hr class=\"my-8\" />\n      <AssigneeRules />\n    </div>\n  </div>\n  <div v-else class=\"flex items-center h-full justify-center\">\n    <LoadingIndicator class=\"w-4\" />\n  </div>\n  <ConfirmDialog\n    v-model=\"showConfirmDialog.show\"\n    :title=\"showConfirmDialog.title\"\n    :message=\"showConfirmDialog.message\"\n    :onConfirm=\"showConfirmDialog.onConfirm\"\n    :onCancel=\"() => (showConfirmDialog.show = false)\"\n  />\n</template>\n\n<script setup>\nimport {\n  Badge,\n  Button,\n  call,\n  createResource,\n  ErrorMessage,\n  FormControl,\n  FormLabel,\n  LoadingIndicator,\n  Popover,\n  Select,\n  Switch,\n  toast,\n} from 'frappe-ui'\nimport {\n  onMounted,\n  onUnmounted,\n  ref,\n  inject,\n  watch,\n  provide,\n  computed,\n} from 'vue'\nimport AssignmentRulesSection from './AssignmentRulesSection.vue'\nimport AssignmentSchedule from './AssignmentSchedule.vue'\nimport AssigneeRules from './AssigneeRules.vue'\nimport ConfirmDialog from 'frappe-ui/src/components/ConfirmDialog.vue'\nimport { globalStore } from '@/stores/global'\nimport { disableSettingModalOutsideClick } from '@/composables/settings'\nimport { convertToConditions, validateConditions } from '@/utils'\n\nconst isDirty = ref(false)\nconst initialData = ref(null)\nconst isLoading = ref(false)\nconst updateStep = inject('updateStep')\nconst step = inject('step')\nconst { $dialog } = globalStore()\n\nconst showConfirmDialog = ref({\n  show: false,\n  title: '',\n  message: '',\n  onConfirm: () => {},\n})\nconst useNewUI = ref(true)\nconst isOldSla = ref(false)\nconst documentType = computed(() =>\n  assignmentRuleData.value.documentType == 'CRM Lead'\n    ? __('leads')\n    : __('deals'),\n)\nconst deskUrl = `${window.location.origin}/app/assignment-rule/${step.value.data?.name}`\n\nconst defaultAssignmentDays = [\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday',\n  'Sunday',\n]\n\nconst assignmentRuleData = ref({\n  assignCondition: '',\n  unassignCondition: '',\n  assignConditionJson: [],\n  unassignConditionJson: [],\n  rule: 'Round Robin',\n  priority: 1,\n  users: [],\n  disabled: false,\n  description: '',\n  name: '',\n  assignmentRuleName: '',\n  assignmentDays: defaultAssignmentDays,\n  documentType: 'CRM Lead',\n})\n\nconst validateAssignmentRule = (key, skipConditionCheck = false) => {\n  const validateField = (field) => {\n    if (key && field !== key) return\n\n    switch (field) {\n      case 'assignmentRuleName':\n        if (assignmentRuleData.value.assignmentRuleName?.length == 0) {\n          assignmentRuleErrors.value.assignmentRuleName = __('Name is required')\n        } else {\n          assignmentRuleErrors.value.assignmentRuleName = ''\n        }\n        break\n      case 'description':\n        assignmentRuleErrors.value.description =\n          assignmentRuleData.value.description?.length > 0\n            ? ''\n            : __('Description is required')\n        break\n      case 'assignCondition':\n        if (skipConditionCheck) {\n          break\n        }\n        assignmentRuleErrors.value.assignCondition =\n          assignmentRuleData.value.assignConditionJson?.length > 0\n            ? ''\n            : __('Assign condition is required')\n\n        if (!validateConditions(assignmentRuleData.value.assignConditionJson)) {\n          assignmentRuleErrors.value.assignConditionError = __(\n            'Assign conditions are invalid',\n          )\n        } else {\n          assignmentRuleErrors.value.assignConditionError = ''\n        }\n\n        break\n      case 'unassignCondition':\n        if (skipConditionCheck) {\n          break\n        }\n        if (\n          assignmentRuleData.value.unassignConditionJson?.length > 0 &&\n          !validateConditions(assignmentRuleData.value.unassignConditionJson)\n        ) {\n          assignmentRuleErrors.value.unassignConditionError = __(\n            'Unassign conditions are invalid',\n          )\n        } else {\n          assignmentRuleErrors.value.unassignConditionError = ''\n        }\n        break\n      case 'users':\n        assignmentRuleErrors.value.users =\n          assignmentRuleData.value.users?.length > 0\n            ? ''\n            : __('Users are required')\n        break\n      case 'assignmentDays':\n        assignmentRuleErrors.value.assignmentDays =\n          assignmentRuleData.value.assignmentDays?.length > 0\n            ? ''\n            : __('Assignment days are required')\n        break\n      default:\n        break\n    }\n  }\n\n  if (key) {\n    validateField(key)\n  } else {\n    Object.keys(assignmentRuleErrors.value).forEach(validateField)\n  }\n\n  return assignmentRuleErrors.value\n}\n\nconst resetAssignmentRuleData = () => {\n  assignmentRuleData.value = {\n    assignCondition: '',\n    unassignCondition: '',\n    assignConditionJson: [],\n    unassignConditionJson: [],\n    rule: 'Round Robin',\n    priority: 1,\n    users: [],\n    disabled: false,\n    description: '',\n    name: '',\n    assignmentRuleName: '',\n    assignmentDays: defaultAssignmentDays,\n    documentType: 'CRM Lead',\n  }\n}\n\nconst assignmentRuleErrors = ref({\n  assignmentRuleName: '',\n  assignCondition: '',\n  assignConditionError: '',\n  unassignConditionError: '',\n  users: '',\n  description: '',\n  assignmentDays: '',\n})\n\nconst resetAssignmentRuleErrors = () => {\n  Object.keys(assignmentRuleErrors.value).forEach((key) => {\n    assignmentRuleErrors.value[key] = ''\n  })\n}\n\nprovide('assignmentRuleData', assignmentRuleData)\nprovide('assignmentRuleErrors', assignmentRuleErrors)\nprovide('validateAssignmentRule', validateAssignmentRule)\nprovide('resetAssignmentRuleData', resetAssignmentRuleData)\nprovide('resetAssignmentRuleErrors', resetAssignmentRuleErrors)\n\nconst getAssignmentRuleData = createResource({\n  url: 'frappe.client.get',\n  params: {\n    doctype: 'Assignment Rule',\n    name: step.value.data?.name,\n  },\n  auto: Boolean(step.value.data),\n  onSuccess(data) {\n    assignmentRuleData.value = {\n      assignCondition: data.assign_condition,\n      unassignCondition: data.unassign_condition,\n      assignConditionJson: JSON.parse(data.assign_condition_json || '[]'),\n      unassignConditionJson: JSON.parse(data.unassign_condition_json || '[]'),\n      rule: data.rule,\n      priority: data.priority,\n      users: data.users,\n      disabled: data.disabled,\n      description: data.description,\n      name: data.name,\n      assignmentRuleName: data.name,\n      assignmentDays: data.assignment_days.map((day) => day.day),\n      documentType: data.document_type,\n    }\n\n    initialData.value = JSON.stringify(assignmentRuleData.value)\n\n    const conditionsAvailable =\n      assignmentRuleData.value.assignCondition?.length > 0\n    const conditionsJsonAvailable =\n      assignmentRuleData.value.assignConditionJson?.length > 0\n\n    if (conditionsAvailable && !conditionsJsonAvailable) {\n      useNewUI.value = false\n      isOldSla.value = true\n    } else {\n      useNewUI.value = true\n      isOldSla.value = false\n    }\n  },\n})\n\nif (!step.value.data) {\n  initialData.value = JSON.stringify(assignmentRuleData.value)\n}\n\nconst goBack = () => {\n  if (isDirty.value && !showConfirmDialog.value.show) {\n    $dialog({\n      title: __('Unsaved changes'),\n      message: __(\n        'Are you sure you want to go back? Unsaved changes will be lost.',\n      ),\n      variant: 'solid',\n      actions: [\n        {\n          label: __('Go back'),\n          variant: 'solid',\n          onClick: (close) => {\n            updateStep('list', null)\n            close()\n          },\n        },\n      ],\n    })\n    return\n  }\n  updateStep('list', null)\n  showConfirmDialog.value.show = false\n}\n\nconst saveAssignmentRule = () => {\n  const validationErrors = validateAssignmentRule(undefined, !useNewUI.value)\n  if (Object.values(validationErrors).some((error) => error)) {\n    toast.error(\n      __('Invalid fields, check if all are filled in and values are correct.'),\n    )\n    return\n  }\n  if (step.value.data) {\n    if (isOldSla.value && useNewUI.value) {\n      showConfirmDialog.value = {\n        show: true,\n        title: __('Confirm overwrite'),\n        message: __(\n          'Your old condition will be overwritten. Are you sure you want to save?',\n        ),\n        onConfirm: () => {\n          updateAssignmentRule()\n          showConfirmDialog.value.show = false\n        },\n      }\n      return\n    }\n    updateAssignmentRule()\n  } else {\n    createAssignmentRule()\n  }\n}\n\nconst createAssignmentRule = () => {\n  isLoading.value = true\n  createResource({\n    url: 'frappe.client.insert',\n    params: {\n      doc: {\n        doctype: 'Assignment Rule',\n        document_type: assignmentRuleData.value.documentType,\n        rule: assignmentRuleData.value.rule,\n        priority: assignmentRuleData.value.priority,\n        users: assignmentRuleData.value.users,\n        disabled: assignmentRuleData.value.disabled,\n        description: assignmentRuleData.value.description,\n        assignment_days: assignmentRuleData.value.assignmentDays.map((day) => ({\n          day: day,\n        })),\n        name: assignmentRuleData.value.assignmentRuleName,\n        assignment_rule_name: assignmentRuleData.value.assignmentRuleName,\n        assign_condition: convertToConditions({\n          conditions: assignmentRuleData.value.assignConditionJson,\n        }),\n        unassign_condition: convertToConditions({\n          conditions: assignmentRuleData.value.unassignConditionJson,\n        }),\n        assign_condition_json: JSON.stringify(\n          assignmentRuleData.value.assignConditionJson,\n        ),\n        unassign_condition_json: JSON.stringify(\n          assignmentRuleData.value.unassignConditionJson,\n        ),\n      },\n    },\n    auto: true,\n    onSuccess(data) {\n      getAssignmentRuleData\n        .submit({\n          doctype: 'Assignment Rule',\n          name: data.name,\n        })\n        .then(() => {\n          isLoading.value = false\n          toast.success(__('Assignment rule created'))\n        })\n      updateStep('view', data)\n    },\n    onError: () => {\n      isLoading.value = false\n    },\n  })\n}\n\nconst priorityOptions = [\n  { label: 'Low', value: '0' },\n  { label: 'Low-Medium', value: '1' },\n  { label: 'Medium', value: '2' },\n  { label: 'Medium-High', value: '3' },\n  { label: 'High', value: '4' },\n]\n\nconst updateAssignmentRule = async () => {\n  isLoading.value = true\n  await call('frappe.client.set_value', {\n    doctype: 'Assignment Rule',\n    name: assignmentRuleData.value.name,\n    fieldname: {\n      rule: assignmentRuleData.value.rule,\n      priority: assignmentRuleData.value.priority,\n      users: assignmentRuleData.value.users,\n      disabled: assignmentRuleData.value.disabled,\n      description: assignmentRuleData.value.description,\n      document_type: assignmentRuleData.value.documentType,\n      assignment_days: assignmentRuleData.value.assignmentDays.map((day) => ({\n        day: day,\n      })),\n      assign_condition: useNewUI.value\n        ? convertToConditions({\n            conditions: assignmentRuleData.value.assignConditionJson,\n          })\n        : assignmentRuleData.value.assignCondition,\n      unassign_condition: useNewUI.value\n        ? convertToConditions({\n            conditions: assignmentRuleData.value.unassignConditionJson,\n          })\n        : assignmentRuleData.value.unassignCondition,\n      assign_condition_json: useNewUI.value\n        ? JSON.stringify(assignmentRuleData.value.assignConditionJson)\n        : null,\n      unassign_condition_json: useNewUI.value\n        ? JSON.stringify(assignmentRuleData.value.unassignConditionJson)\n        : null,\n    },\n  }).catch((er) => {\n    const error =\n      er?.messages?.[0] ||\n      __('Some error occurred while updating assignment rule')\n    toast.error(error)\n    isLoading.value = false\n  })\n  if (\n    assignmentRuleData.value.name !==\n    assignmentRuleData.value.assignmentRuleName\n  ) {\n    await call('frappe.client.rename_doc', {\n      doctype: 'Assignment Rule',\n      old_name: assignmentRuleData.value.name,\n      new_name: assignmentRuleData.value.assignmentRuleName,\n    }).catch(async (er) => {\n      const error =\n        er?.messages?.[0] ||\n        __('Some error occurred while renaming assignment rule')\n      toast.error(error)\n      // Reset assignment rule to previous state\n      await getAssignmentRuleData.reload()\n      isLoading.value = false\n    })\n    await getAssignmentRuleData.submit({\n      doctype: 'Assignment Rule',\n      name: assignmentRuleData.value.assignmentRuleName,\n    })\n  } else {\n    getAssignmentRuleData.reload()\n  }\n  isLoading.value = false\n  toast.success(__('Assignment rule updated'))\n}\n\nwatch(\n  assignmentRuleData,\n  (newVal) => {\n    if (!initialData.value) return\n    isDirty.value = JSON.stringify(newVal) != initialData.value\n    if (isDirty.value) {\n      disableSettingModalOutsideClick.value = true\n    } else {\n      disableSettingModalOutsideClick.value = false\n    }\n  },\n  { deep: true },\n)\n\nconst beforeUnloadHandler = (event) => {\n  if (!isDirty.value) return\n  event.preventDefault()\n  event.returnValue = true\n}\n\nonMounted(() => {\n  addEventListener('beforeunload', beforeUnloadHandler)\n})\n\nonUnmounted(() => {\n  resetAssignmentRuleErrors()\n  resetAssignmentRuleData()\n  removeEventListener('beforeunload', beforeUnloadHandler)\n  disableSettingModalOutsideClick.value = false\n})\n</script>\n","<template>\n  <AssignmentRules v-if=\"step.screen === 'list'\" />\n  <AssignmentRuleView v-else-if=\"step.screen === 'view'\" />\n</template>\n\n<script setup>\nimport { ref, provide } from 'vue'\nimport AssignmentRules from './AssignmentRules.vue'\nimport AssignmentRuleView from './AssignmentRuleView.vue'\n\nconst step = ref({ screen: 'list', data: null })\n\nprovide('step', step)\nprovide('updateStep', updateStep)\n\nfunction updateStep(newStep, data) {\n  step.value = { screen: newStep, data }\n}\n</script>\n","<template>\n  <Dialog\n    v-model=\"showSettings\"\n    :options=\"{ size: '5xl' }\"\n    @close=\"activeSettingsPage = ''\"\n    :disableOutsideClickToClose=\"disableSettingModalOutsideClick\"\n  >\n    <template #body>\n      <div class=\"flex h-[calc(100vh_-_8rem)]\">\n        <div class=\"flex flex-col p-1 w-52 shrink-0 bg-surface-gray-2\">\n          <h1 class=\"px-3 pt-3 pb-2 text-lg font-semibold text-ink-gray-8\">\n            {{ __('Settings') }}\n          </h1>\n          <div class=\"flex flex-col overflow-y-auto\">\n            <template v-for=\"tab in tabs\" :key=\"tab.label\">\n              <div\n                v-if=\"!tab.hideLabel\"\n                class=\"py-[7px] px-2 my-1 flex cursor-pointer gap-1.5 text-base text-ink-gray-5 transition-all duration-300 ease-in-out\"\n              >\n                <span>{{ __(tab.label) }}</span>\n              </div>\n              <nav class=\"space-y-1 px-1\">\n                <SidebarLink\n                  v-for=\"i in tab.items\"\n                  :icon=\"i.icon\"\n                  :label=\"__(i.label)\"\n                  class=\"w-full\"\n                  :class=\"\n                    activeTab?.label == i.label\n                      ? 'bg-surface-selected shadow-sm hover:bg-surface-selected'\n                      : 'hover:bg-surface-gray-3'\n                  \"\n                  @click=\"activeSettingsPage = i.label\"\n                />\n              </nav>\n            </template>\n          </div>\n        </div>\n        <div class=\"flex flex-col flex-1 overflow-y-auto bg-surface-modal\">\n          <component :is=\"activeTab.component\" v-if=\"activeTab\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport CircleDollarSignIcon from '~icons/lucide/circle-dollar-sign'\nimport TrendingUpDownIcon from '~icons/lucide/trending-up-down'\nimport SparkleIcon from '@/components/Icons/SparkleIcon.vue'\nimport WhatsAppIcon from '@/components/Icons/WhatsAppIcon.vue'\nimport ERPNextIcon from '@/components/Icons/ERPNextIcon.vue'\nimport HelpdeskIcon from '@/components/Icons/HelpdeskIcon.vue'\nimport PhoneIcon from '@/components/Icons/PhoneIcon.vue'\nimport Email2Icon from '@/components/Icons/Email2Icon.vue'\nimport EmailTemplateIcon from '@/components/Icons/EmailTemplateIcon.vue'\nimport SettingsIcon2 from '@/components/Icons/SettingsIcon2.vue'\nimport Users from '@/components/Settings/Users.vue'\nimport InviteUserPage from '@/components/Settings/InviteUserPage.vue'\nimport ProfileSettings from '@/components/Settings/ProfileSettings.vue'\nimport WhatsAppSettings from '@/components/Settings/WhatsAppSettings.vue'\nimport ERPNextSettings from '@/components/Settings/ERPNextSettings.vue'\nimport HelpdeskSettings from '@/components/Settings/HelpdeskSettings.vue'\nimport LeadSyncSourcePage from '@/components/Settings/LeadSyncing/LeadSyncSourcePage.vue'\nimport BrandSettings from '@/components/Settings/BrandSettings.vue'\nimport HomeActions from '@/components/Settings/HomeActions.vue'\nimport ForecastingSettings from '@/components/Settings/ForecastingSettings.vue'\nimport CurrencySettings from '@/components/Settings/CurrencySettings.vue'\nimport EmailTemplatePage from '@/components/Settings/EmailTemplate/EmailTemplatePage.vue'\nimport TelephonySettings from '@/components/Settings/TelephonySettings.vue'\nimport EmailConfig from '@/components/Settings/EmailConfig.vue'\nimport SidebarLink from '@/components/SidebarLink.vue'\nimport { usersStore } from '@/stores/users'\nimport {\n  isWhatsappInstalled,\n  showSettings,\n  activeSettingsPage,\n  disableSettingModalOutsideClick,\n} from '@/composables/settings'\nimport { Dialog, Avatar } from 'frappe-ui'\nimport { ref, markRaw, computed, watch, h } from 'vue'\nimport AssignmentRulePage from './AssignmentRules/AssignmentRulePage.vue'\n\nconst { isManager, isTelephonyAgent, getUser } = usersStore()\n\nconst user = computed(() => getUser() || {})\n\nconst tabs = computed(() => {\n  let _tabs = [\n    {\n      label: __('Personal Settings'),\n      hideLabel: true,\n      items: [\n        {\n          label: __('Profile'),\n          icon: () =>\n            h(Avatar, {\n              size: 'xs',\n              label: user.value.full_name,\n              image: user.value.user_image,\n            }),\n          component: markRaw(ProfileSettings),\n        },\n      ],\n    },\n    {\n      label: __('System Configuration'),\n      items: [\n        {\n          label: __('Forecasting'),\n          component: markRaw(ForecastingSettings),\n          icon: TrendingUpDownIcon,\n        },\n        {\n          label: __('Currency & Exchange Rate'),\n          icon: CircleDollarSignIcon,\n          component: markRaw(CurrencySettings),\n        },\n        {\n          label: __('Brand Settings'),\n          icon: SparkleIcon,\n          component: markRaw(BrandSettings),\n        },\n      ],\n      condition: () => isManager(),\n    },\n    {\n      label: __('User Management'),\n      items: [\n        {\n          label: __('Users'),\n          icon: 'user',\n          component: markRaw(Users),\n          condition: () => isManager(),\n        },\n        {\n          label: __('Invite User'),\n          icon: 'user-plus',\n          component: markRaw(InviteUserPage),\n          condition: () => isManager(),\n        },\n      ],\n      condition: () => isManager(),\n    },\n    {\n      label: __('Email Settings'),\n      items: [\n        {\n          label: __('Email Accounts'),\n          icon: Email2Icon,\n          component: markRaw(EmailConfig),\n          condition: () => isManager(),\n        },\n        {\n          label: __('Email Templates'),\n          icon: EmailTemplateIcon,\n          component: markRaw(EmailTemplatePage),\n        },\n      ],\n    },\n    {\n      label: __('Automation & Rules'),\n      items: [\n        {\n          label: __('Assignment rules'),\n          icon: markRaw(h(SettingsIcon2, { class: 'rotate-90' })),\n          component: markRaw(AssignmentRulePage),\n        },\n      ],\n    },\n    {\n      label: __('Customization'),\n      items: [\n        {\n          label: __('Home Actions'),\n          component: markRaw(HomeActions),\n          icon: 'home',\n        },\n      ],\n      condition: () => isManager(),\n    },\n    {\n      label: __('Integrations', null, 'FCRM'),\n      items: [\n        {\n          label: __('Telephony'),\n          icon: PhoneIcon,\n          component: markRaw(TelephonySettings),\n          condition: () => isManager() || isTelephonyAgent(),\n        },\n        {\n          label: __('WhatsApp'),\n          icon: WhatsAppIcon,\n          component: markRaw(WhatsAppSettings),\n          condition: () => isWhatsappInstalled.value && isManager(),\n        },\n        {\n          label: __('ERPNext'),\n          icon: ERPNextIcon,\n          component: markRaw(ERPNextSettings),\n          condition: () => isManager(),\n        },\n        {\n          label: __('Helpdesk'),\n          icon: HelpdeskIcon,\n          component: markRaw(HelpdeskSettings),\n          condition: () => isManager(),\n        },\n        {\n          label: __('Lead Syncing'),\n          icon: 'refresh-cw',\n          component: markRaw(LeadSyncSourcePage),\n          condition: () => isManager(),\n        },\n      ],\n      condition: () => isManager() || isTelephonyAgent(),\n    },\n  ]\n\n  return _tabs.filter((tab) => {\n    if (tab.condition && !tab.condition()) return false\n    if (tab.items) {\n      tab.items = tab.items.filter((item) => {\n        if (item.condition && !item.condition()) return false\n        return true\n      })\n    }\n    return true\n  })\n})\n\nconst activeTab = ref(tabs.value[0].items[0])\n\nfunction setActiveTab(tabName) {\n  activeTab.value =\n    (tabName &&\n      tabs.value\n        .map((tab) => tab.items)\n        .flat()\n        .find((tab) => tab.label === tabName)) ||\n    tabs.value[0].items[0]\n}\n\nwatch(activeSettingsPage, (activePage) => setActiveTab(activePage))\n</script>\n","<template>\n  <div\n    class=\"relative flex h-full flex-col justify-between transition-all duration-300 ease-in-out\"\n    :class=\"isSidebarCollapsed ? 'w-12' : 'w-[220px]'\"\n  >\n    <div class=\"p-2\">\n      <UserDropdown :isCollapsed=\"isSidebarCollapsed\" />\n    </div>\n    <div class=\"flex-1 overflow-y-auto\">\n      <div class=\"mb-3 flex flex-col\">\n        <SidebarLink\n          id=\"notifications-btn\"\n          :label=\"__('Notifications')\"\n          :icon=\"NotificationsIcon\"\n          :isCollapsed=\"isSidebarCollapsed\"\n          @click=\"() => toggleNotificationPanel()\"\n          class=\"relative mx-2 my-0.5\"\n        >\n          <template #right>\n            <Badge\n              v-if=\"!isSidebarCollapsed && unreadNotificationsCount\"\n              :label=\"unreadNotificationsCount\"\n              variant=\"subtle\"\n            />\n            <div\n              v-else-if=\"unreadNotificationsCount\"\n              class=\"absolute -left-1.5 top-1 z-20 h-[5px] w-[5px] translate-x-6 translate-y-1 rounded-full bg-surface-gray-6 ring-1 ring-white\"\n            />\n          </template>\n        </SidebarLink>\n      </div>\n      <div v-for=\"view in allViews\" :key=\"view.label\">\n        <div\n          v-if=\"!view.hideLabel && isSidebarCollapsed && view.views?.length\"\n          class=\"mx-2 my-2 h-1 border-b\"\n        />\n        <Section\n          :label=\"view.name\"\n          :hideLabel=\"view.hideLabel\"\n          :opened=\"view.opened\"\n        >\n          <template #header=\"{ opened, hide, toggle }\">\n            <div\n              v-if=\"!hide\"\n              class=\"flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out\"\n              :class=\"\n                isSidebarCollapsed\n                  ? 'ml-0 h-0 overflow-hidden opacity-0'\n                  : 'ml-2 mt-4 h-7 w-auto opacity-100'\n              \"\n              @click=\"toggle()\"\n            >\n              <FeatherIcon\n                name=\"chevron-right\"\n                class=\"h-4 text-ink-gray-9 transition-all duration-300 ease-in-out\"\n                :class=\"{ 'rotate-90': opened }\"\n              />\n              <span>{{ __(view.name) }}</span>\n            </div>\n          </template>\n          <nav class=\"flex flex-col\">\n            <SidebarLink\n              v-for=\"link in view.views\"\n              :icon=\"link.icon\"\n              :label=\"__(link.label)\"\n              :to=\"link.to\"\n              :isCollapsed=\"isSidebarCollapsed\"\n              class=\"mx-2 my-0.5\"\n            />\n          </nav>\n        </Section>\n      </div>\n    </div>\n    <div class=\"m-2 flex flex-col gap-1\">\n      <div class=\"flex flex-col gap-2 mb-1\">\n        <SignupBanner\n          v-if=\"isDemoSite\"\n          :isSidebarCollapsed=\"isSidebarCollapsed\"\n          :afterSignup=\"() => capture('signup_from_demo_site')\"\n        />\n        <TrialBanner\n          v-if=\"isFCSite\"\n          :isSidebarCollapsed=\"isSidebarCollapsed\"\n          :afterUpgrade=\"() => capture('upgrade_plan_from_trial_banner')\"\n        />\n        <GettingStartedBanner\n          v-if=\"!isOnboardingStepsCompleted\"\n          :isSidebarCollapsed=\"isSidebarCollapsed\"\n        />\n      </div>\n      <SidebarLink\n        v-if=\"isOnboardingStepsCompleted\"\n        :label=\"__('Help')\"\n        :isCollapsed=\"isSidebarCollapsed\"\n        @click=\"\n          () => {\n            showHelpModal = minimize ? true : !showHelpModal\n            minimize = !showHelpModal\n          }\n        \"\n      >\n        <template #icon>\n          <HelpIcon class=\"h-4 w-4\" />\n        </template>\n      </SidebarLink>\n      <SidebarLink\n        :label=\"isSidebarCollapsed ? __('Expand') : __('Collapse')\"\n        :isCollapsed=\"isSidebarCollapsed\"\n        @click=\"isSidebarCollapsed = !isSidebarCollapsed\"\n        class=\"\"\n      >\n        <template #icon>\n          <span class=\"grid h-4 w-4 flex-shrink-0 place-items-center\">\n            <CollapseSidebar\n              class=\"h-4 w-4 text-ink-gray-7 duration-300 ease-in-out\"\n              :class=\"{ '[transform:rotateY(180deg)]': isSidebarCollapsed }\"\n            />\n          </span>\n        </template>\n      </SidebarLink>\n    </div>\n    <Notifications />\n    <Settings />\n    <HelpModal\n      v-if=\"showHelpModal\"\n      v-model=\"showHelpModal\"\n      v-model:articles=\"articles\"\n      :logo=\"CRMLogo\"\n      :afterSkip=\"(step) => capture('onboarding_step_skipped_' + step)\"\n      :afterSkipAll=\"() => capture('onboarding_steps_skipped')\"\n      :afterReset=\"(step) => capture('onboarding_step_reset_' + step)\"\n      :afterResetAll=\"() => capture('onboarding_steps_reset')\"\n      docsLink=\"https://docs.frappe.io/crm\"\n    />\n    <IntermediateStepModal\n      v-model=\"showIntermediateModal\"\n      :currentStep=\"currentStep\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport LucideLayoutDashboard from '~icons/lucide/layout-dashboard'\nimport CRMLogo from '@/components/Icons/CRMLogo.vue'\nimport InviteIcon from '@/components/Icons/InviteIcon.vue'\nimport ConvertIcon from '@/components/Icons/ConvertIcon.vue'\nimport CommentIcon from '@/components/Icons/CommentIcon.vue'\nimport EmailIcon from '@/components/Icons/EmailIcon.vue'\nimport StepsIcon from '@/components/Icons/StepsIcon.vue'\nimport Section from '@/components/Section.vue'\nimport PinIcon from '@/components/Icons/PinIcon.vue'\nimport UserDropdown from '@/components/UserDropdown.vue'\nimport SquareAsterisk from '@/components/Icons/SquareAsterisk.vue'\nimport LeadsIcon from '@/components/Icons/LeadsIcon.vue'\nimport DealsIcon from '@/components/Icons/DealsIcon.vue'\nimport ContactsIcon from '@/components/Icons/ContactsIcon.vue'\nimport OrganizationsIcon from '@/components/Icons/OrganizationsIcon.vue'\nimport NoteIcon from '@/components/Icons/NoteIcon.vue'\nimport TaskIcon from '@/components/Icons/TaskIcon.vue'\nimport CalendarIcon from '@/components/Icons/CalendarIcon.vue'\nimport PhoneIcon from '@/components/Icons/PhoneIcon.vue'\nimport CollapseSidebar from '@/components/Icons/CollapseSidebar.vue'\nimport NotificationsIcon from '@/components/Icons/NotificationsIcon.vue'\nimport HelpIcon from '@/components/Icons/HelpIcon.vue'\nimport SidebarLink from '@/components/SidebarLink.vue'\nimport Notifications from '@/components/Notifications.vue'\nimport Settings from '@/components/Settings/Settings.vue'\nimport { viewsStore } from '@/stores/views'\nimport {\n  unreadNotificationsCount,\n  notificationsStore,\n} from '@/stores/notifications'\nimport { usersStore } from '@/stores/users'\nimport { sessionStore } from '@/stores/session'\nimport { showSettings, activeSettingsPage } from '@/composables/settings'\nimport { showChangePasswordModal } from '@/composables/modals'\nimport { FeatherIcon, call } from 'frappe-ui'\nimport {\n  SignupBanner,\n  TrialBanner,\n  HelpModal,\n  GettingStartedBanner,\n  useOnboarding,\n  showHelpModal,\n  minimize,\n  IntermediateStepModal,\n} from 'frappe-ui/frappe'\nimport { capture } from '@/telemetry'\nimport router from '@/router'\nimport { useStorage } from '@vueuse/core'\nimport { ref, reactive, computed, h, markRaw, onMounted } from 'vue'\n\nconst { getPinnedViews, getPublicViews } = viewsStore()\nconst { toggle: toggleNotificationPanel } = notificationsStore()\n\nconst isSidebarCollapsed = useStorage('isSidebarCollapsed', false)\n\nconst isFCSite = ref(window.is_fc_site)\nconst isDemoSite = ref(window.is_demo_site)\n\nconst links = [\n  {\n    label: 'Dashboard',\n    icon: LucideLayoutDashboard,\n    to: 'Dashboard',\n  },\n  {\n    label: 'Leads',\n    icon: LeadsIcon,\n    to: 'Leads',\n  },\n  {\n    label: 'Deals',\n    icon: DealsIcon,\n    to: 'Deals',\n  },\n  {\n    label: 'Contacts',\n    icon: ContactsIcon,\n    to: 'Contacts',\n  },\n  {\n    label: 'Organizations',\n    icon: OrganizationsIcon,\n    to: 'Organizations',\n  },\n  {\n    label: 'Notes',\n    icon: NoteIcon,\n    to: 'Notes',\n  },\n  {\n    label: 'Tasks',\n    icon: TaskIcon,\n    to: 'Tasks',\n  },\n  {\n    label: 'Calendar',\n    icon: CalendarIcon,\n    to: 'Calendar',\n  },\n  {\n    label: 'Call Logs',\n    icon: PhoneIcon,\n    to: 'Call Logs',\n  },\n]\n\nconst allViews = computed(() => {\n  let _views = [\n    {\n      name: 'All Views',\n      hideLabel: true,\n      opened: true,\n      views: links.filter((link) => {\n        if (link.condition) {\n          return link.condition()\n        }\n        return true\n      }),\n    },\n  ]\n  if (getPublicViews().length) {\n    _views.push({\n      name: 'Public views',\n      opened: true,\n      views: parseView(getPublicViews()),\n    })\n  }\n\n  if (getPinnedViews().length) {\n    _views.push({\n      name: 'Pinned views',\n      opened: true,\n      views: parseView(getPinnedViews()),\n    })\n  }\n  return _views\n})\n\nfunction parseView(views) {\n  return views.map((view) => {\n    return {\n      label: view.label,\n      icon: getIcon(view.route_name, view.icon),\n      to: {\n        name: view.route_name,\n        params: { viewType: view.type || 'list' },\n        query: { view: view.name },\n      },\n    }\n  })\n}\n\nfunction getIcon(routeName, icon) {\n  if (icon) return h('div', { class: 'size-auto' }, icon)\n\n  switch (routeName) {\n    case 'Leads':\n      return LeadsIcon\n    case 'Deals':\n      return DealsIcon\n    case 'Contacts':\n      return ContactsIcon\n    case 'Organizations':\n      return OrganizationsIcon\n    case 'Notes':\n      return NoteIcon\n    case 'Call Logs':\n      return PhoneIcon\n    default:\n      return PinIcon\n  }\n}\n\n// onboarding\nconst { user } = sessionStore()\nconst { users, isManager } = usersStore()\nconst { isOnboardingStepsCompleted, setUp } = useOnboarding('frappecrm')\n\nasync function getFirstLead() {\n  let firstLead = localStorage.getItem('firstLead' + user)\n  if (firstLead) return firstLead\n  return await call('crm.api.onboarding.get_first_lead')\n}\n\nasync function getFirstDeal() {\n  let firstDeal = localStorage.getItem('firstDeal' + user)\n  if (firstDeal) return firstDeal\n  return await call('crm.api.onboarding.get_first_deal')\n}\n\nconst showIntermediateModal = ref(false)\nconst currentStep = ref({})\n\nconst steps = reactive([\n  {\n    name: 'setup_your_password',\n    title: __('Setup your password'),\n    icon: markRaw(SquareAsterisk),\n    completed: false,\n    onClick: () => {\n      minimize.value = true\n      showChangePasswordModal.value = true\n    },\n  },\n  {\n    name: 'create_first_lead',\n    title: __('Create your first lead'),\n    icon: markRaw(LeadsIcon),\n    completed: false,\n    onClick: () => {\n      minimize.value = true\n      router.push({ name: 'Leads' })\n    },\n  },\n  {\n    name: 'invite_your_team',\n    title: __('Invite your team'),\n    icon: markRaw(InviteIcon),\n    completed: false,\n    onClick: () => {\n      minimize.value = true\n      showSettings.value = true\n      activeSettingsPage.value = 'Invite User'\n    },\n    condition: () => isManager(),\n  },\n  {\n    name: 'convert_lead_to_deal',\n    title: __('Convert lead to deal'),\n    icon: markRaw(ConvertIcon),\n    completed: false,\n    dependsOn: 'create_first_lead',\n    onClick: async () => {\n      minimize.value = true\n\n      currentStep.value = {\n        title: __('Convert lead to deal'),\n        buttonLabel: __('Convert'),\n        videoURL: '/assets/crm/videos/convertToDeal.mov',\n        onClick: async () => {\n          showIntermediateModal.value = false\n          currentStep.value = {}\n\n          let lead = await getFirstLead()\n          if (lead) {\n            router.push({ name: 'Lead', params: { leadId: lead } })\n          } else {\n            router.push({ name: 'Leads' })\n          }\n        },\n      }\n      showIntermediateModal.value = true\n    },\n  },\n  {\n    name: 'create_first_task',\n    title: __('Create your first task'),\n    icon: markRaw(TaskIcon),\n    completed: false,\n    onClick: async () => {\n      minimize.value = true\n      let deal = await getFirstDeal()\n\n      if (deal) {\n        router.push({\n          name: 'Deal',\n          params: { dealId: deal },\n          hash: '#tasks',\n        })\n      } else {\n        router.push({ name: 'Tasks' })\n      }\n    },\n  },\n  {\n    name: 'create_first_note',\n    title: __('Create your first note'),\n    icon: markRaw(NoteIcon),\n    completed: false,\n    onClick: async () => {\n      minimize.value = true\n      let deal = await getFirstDeal()\n\n      if (deal) {\n        router.push({\n          name: 'Deal',\n          params: { dealId: deal },\n          hash: '#notes',\n        })\n      } else {\n        router.push({ name: 'Notes' })\n      }\n    },\n  },\n  {\n    name: 'add_first_comment',\n    title: __('Add your first comment'),\n    icon: markRaw(CommentIcon),\n    completed: false,\n    dependsOn: 'create_first_lead',\n    onClick: async () => {\n      minimize.value = true\n      let deal = await getFirstDeal()\n\n      if (deal) {\n        router.push({\n          name: 'Deal',\n          params: { dealId: deal },\n          hash: '#comments',\n        })\n      } else {\n        router.push({ name: 'Leads' })\n      }\n    },\n  },\n  {\n    name: 'send_first_email',\n    title: __('Send email'),\n    icon: markRaw(EmailIcon),\n    completed: false,\n    dependsOn: 'create_first_lead',\n    onClick: async () => {\n      minimize.value = true\n      let deal = await getFirstDeal()\n\n      if (deal) {\n        router.push({\n          name: 'Deal',\n          params: { dealId: deal },\n          hash: '#emails',\n        })\n      } else {\n        router.push({ name: 'Leads' })\n      }\n    },\n  },\n  {\n    name: 'change_deal_status',\n    title: __('Change deal status'),\n    icon: markRaw(StepsIcon),\n    completed: false,\n    dependsOn: 'convert_lead_to_deal',\n    onClick: async () => {\n      minimize.value = true\n\n      currentStep.value = {\n        title: __('Change deal status'),\n        buttonLabel: __('Change'),\n        videoURL: '/assets/crm/videos/changeDealStatus.mov',\n        onClick: async () => {\n          showIntermediateModal.value = false\n          currentStep.value = {}\n\n          let deal = await getFirstDeal()\n          if (deal) {\n            router.push({\n              name: 'Deal',\n              params: { dealId: deal },\n              hash: '#activity',\n            })\n          } else {\n            router.push({ name: 'Leads' })\n          }\n        },\n      }\n      showIntermediateModal.value = true\n    },\n  },\n])\n\nonMounted(async () => {\n  await users.promise\n\n  const filteredSteps = steps.filter((step) => {\n    if (step.condition) {\n      return step.condition()\n    }\n    return true\n  })\n\n  setUp(filteredSteps)\n})\n\n// help center\nconst articles = ref([\n  {\n    title: __('Introduction'),\n    opened: false,\n    subArticles: [\n      { name: 'introduction', title: __('Introduction') },\n      { name: 'setting-up', title: __('Setting up') },\n    ],\n  },\n  {\n    title: __('Settings'),\n    opened: false,\n    subArticles: [\n      { name: 'profile', title: __('Profile') },\n      { name: 'custom-branding', title: __('Custom branding') },\n      { name: 'home-actions', title: __('Home actions') },\n      { name: 'invite-users', title: __('Invite users') },\n    ],\n  },\n  {\n    title: __('Masters'),\n    opened: false,\n    subArticles: [\n      { name: 'lead', title: __('Lead') },\n      { name: 'deal', title: __('Deal') },\n      { name: 'contact', title: __('Contact') },\n      { name: 'organization', title: __('Organization') },\n      { name: 'note', title: __('Note') },\n      { name: 'task', title: __('Task') },\n      { name: 'call-log', title: __('Call log') },\n      { name: 'email-template', title: __('Email template') },\n    ],\n  },\n  {\n    title: __('Capturing leads'),\n    opened: false,\n    subArticles: [{ name: 'web-form', title: __('Web form') }],\n  },\n  {\n    title: __('Views'),\n    opened: false,\n    subArticles: [\n      { name: 'view', title: __('Saved view') },\n      { name: 'public-view', title: __('Public view') },\n      { name: 'pinned-view', title: __('Pinned view') },\n    ],\n  },\n  {\n    title: __('Other features'),\n    opened: false,\n    subArticles: [\n      { name: 'email-communication', title: __('Email communication') },\n      { name: 'comment', title: __('Comment') },\n      { name: 'data', title: __('Data') },\n      { name: 'service-level-agreement', title: __('Service level agreement') },\n      { name: 'assignment-rule', title: __('Assignment rule') },\n      { name: 'notification', title: __('Notification') },\n    ],\n  },\n  {\n    title: __('Customization'),\n    opened: false,\n    subArticles: [\n      { name: 'custom-fields', title: __('Custom fields') },\n      { name: 'custom-actions', title: __('Custom actions') },\n      { name: 'custom-statuses', title: __('Custom statuses') },\n      { name: 'custom-list-actions', title: __('Custom list actions') },\n      { name: 'quick-entry-layout', title: __('Quick entry layout') },\n    ],\n  },\n  {\n    title: __('Integration'),\n    opened: false,\n    subArticles: [\n      { name: 'twilio', title: __('Twilio') },\n      { name: 'exotel', title: __('Exotel') },\n      { name: 'whatsapp', title: __('WhatsApp') },\n      { name: 'erpnext', title: __('ERPNext') },\n    ],\n  },\n  {\n    title: __('Frappe CRM mobile'),\n    opened: false,\n    subArticles: [\n      { name: 'mobile-app-installation', title: __('Mobile app installation') },\n    ],\n  },\n])\n</script>\n","<template>\n  <div class=\"flex border-b pr-5\">\n    <div id=\"app-header\" class=\"flex-1\"></div>\n    <div class=\"flex items-center justify-center\">\n      <CallUI />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport CallUI from '@/components/Telephony/CallUI.vue'\n</script>\n","<template>\n  <div class=\"flex h-screen w-screen\">\n    <div class=\"h-full border-r bg-surface-menu-bar\">\n      <AppSidebar />\n    </div>\n    <div class=\"flex-1 flex flex-col h-full overflow-auto bg-surface-white\">\n      <AppHeader />\n      <slot />\n    </div>\n    <GlobalModals />\n  </div>\n</template>\n<script setup>\nimport AppSidebar from '@/components/Layouts/AppSidebar.vue'\nimport AppHeader from '@/components/Layouts/AppHeader.vue'\nimport GlobalModals from '@/components/Modals/GlobalModals.vue'\n</script>\n"],"names":["_sfc_main","Dialog","Button","_a","_hoisted_1","_createBlock","_component_Dialog","$data","$event","$props","$options","_createElementVNode","_createElementBlock","_createVNode","_component_Button","_mergeProps","props","__props","emit","__emit","rating","ref","hoveredRating","iconClasses","index","classes","emitChange","value","markRating","watch","newVal","_openBlock","_hoisted_2","_toDisplayString","_hoisted_3","_Fragment","_renderList","_cache","FeatherIcon","_normalizeClass","_sfc_render","_ctx","isDependent","step","dependsOnStep","steps","s","dependsOnTooltip","stepsCompleted","totalSteps","completedPercentage","skip","skipAll","reset","resetAll","useOnboarding","_resolveDynamicComponent","_unref","_hoisted_4","_hoisted_5","Badge","_hoisted_6","_hoisted_7","_withModifiers","Tooltip","searchInput","search","articles","_useModel","parsedArticles","computed","a","filteredSubArticles","subArticle","openDocs","openDoc","name","onMounted","_b","TextInput","_withDirectives","_hoisted_8","_hoisted_10","_hoisted_11","_vShow","syncStatus","isOnboardingStepsCompleted","show","headingTitle","showHelpCenter","options","StepsIcon","resetOnboardingSteps","item","footerItems","HelpIcon","minimize","Dropdown","MaximizeIcon","MinimizeIcon","OnboardingSteps","HelpCenter","openOnboarding","showHelpModal","_renderSlot","trialMessage","trialEndDays","showBanner","baseEndpoint","siteName","trialTitle","createResource","data","calculateTrialEndDays","trialEndDate","diffTime","upgradePlan","_createTextVNode","LightningIcon","signupNow","_component_FeatherIcon","$socket","globalStore","mark_as_read","toggle","mark_doc_as_read","notificationsStore","target","onClickOutside","visible","markAsRead","doc","capture","markAllAsRead","onBeforeUnmount","notifications","getRoute","notification","params","__","MarkAsDoneIcon","n","_component_RouterLink","WhatsAppIcon","UserAvatar","_hoisted_9","timeAgo","_hoisted_12","NotificationsIcon","_hoisted_13","users","isAdmin","isManager","usersStore","newUsers","role","description","roleOptions","addNewUser","toast","error","EmailMultiSelect","validateEmail","user","_component_FormControl","showAddExistingModal","searchRef","currentRole","roleMap","usersList","confirmRemove","getMoreOptions","e","removeUser","option","getDropdownOptions","DropdownOption","updateRole","newRole","call","activeSettingsPage","Avatar","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","AddExistingUserModal","updateOnboardingStep","invitees","userExistMessage","inviteesSet","existingEmails","existingUsersSet","existingInvitees","inviteeExistMessage","pendingInvitations","inviteByEmail","convertArrayToString","err","createListResource","updateInvitees","emails","email","FormControl","_component_ErrorMessage","getUser","profile","showChangePasswordModal","dirty","setUser","updateImage","fileUrl","FileUploader","file","validateIsImageFile","_withCtx","openFileSelector","_error","CameraIcon","ChangePasswordModal","fields","createDocumentResource","tabs","_tabs","fieldsData","_sections","field","last_tab","getRandom","last_section","Spinner","FieldLayout","ErrorMessage","SettingsPage","sources","inject","confirmDelete","sourcesList","list","source","toggleLeadSyncSourceEnabled","deleteLeadSource","i","_hoisted_19","_hoisted_20","_hoisted_21","Switch","_hoisted_22","_hoisted_23","supportedSourceTypes","LogoFacebook","selectedLog","failedLeadSyncLogList","columns","logDoc","useDocument","_d","_c","Textarea","ListView","row","column","tabList","DetailsIcon","isLocal","RefreshIcon","tabIndex","docResource","mappingFormDocResource","sourceDoc","meta","getFields","getMeta","fieldsMap","map","syncSource","updateSource","createSource","newDoc","getSourceDocResource","createOrUpdateSource","type","_","oldValue","leadFields","restrictedFields","getCRMLeadFields","_e","Tabs","tab","LucideCircleQuestionMark","formatDate","Link","Grid","FailureLogs","_g","_f","provide","updateStep","newStep","LeadSyncSourceForm","LeadSyncSources","$emit","progress","uploading","ImageUpIcon","settings","setupBrand","getSettings","updateSettings","showSettings","ImageIcon","ImageUploader","url","document","triggerOnChange","errorMessage","toggleForecasting","autoUpdateExpectedDealValue","$dialog","setCurrency","close","_component_Link","v","_hoisted_24","_hoisted_25","_hoisted_26","template","templates","createTemplate","TextEditor","val","updateTemplate","old","newEmailTemplate","nameChanged","otherFieldChanged","values","renameDoc","currentDoctype","templatesList","toggleEmailTemplate","deleteTemplate","NewEmailTemplate","EmailTemplates","EditEmailTemplate","isTelephonyAgent","twilioFields","exotelFields","twilio","exotel","twilioTabs","exotelTabs","mediumChanged","defaultCallingMedium","update","validateIfDefaultMediumIsEnabled","updateMedium","LogoGmail","LogoOutlook","LogoSendgrid","LogoSparkpost","LogoYahoo","LogoYandex","LogoFrappeMail","fixedFields","incomingOutgoingFields","popularProviderFields","customProviderFields","services","emailIcon","validateInputs","state","isCustom","reactive","selectedService","handleSelect","service","addEmailRes","createEmailAccount","EmailProviderIcon","CircleAlert","badgeTitle","_component_Badge","emailAccounts","accounts","account","emailAccount","EmailAccountCard","info","isCustomService","loading","updateAccount","updatedEmailAccount","otherFieldsChanged","isDirty","callRenameDoc","succesHandler","errorHandler","callSetValue","accountData","EmailAdd","EmailAccountList","EmailEdit","assignmentRulesList","priorityOptions","duplicateDialog","isConfirmingDelete","deleteAssignmentRule","dropdownOptions","duplicate","onPriorityChange","setAssignmentRuleValue","onToggle","key","fieldName","Select","LoadingIndicator","assignmentRule","AssignmentRuleListItem","assignmentRulesListData","goToNew","AssignmentRulesList","filterableFields","h","GroupIcon","UnGroupIcon","typeCheck","typeLink","typeNumber","typeSelect","typeString","typeDate","typeRating","toggleConjunction","updateField","resetConditionValue","getValueControl","operator","fieldData","f","fieldtype","_options","getSelectOptions","o","DateRangePicker","DatePicker","DateTimePicker","Rating","updateValue","updateOperator","event","oldOperatorValue","newOperatorValue","isSameTypeOperator","getDefaultValue","getOperators","fieldname","op","oldOperator","newOperator","textOperators","Autocomplete","CFConditions","getConjunction","conjunction","condition","turnIntoGroup","isGroupCondition","removeCondition","conditionIndex","unGroupConditions","newConditions","c","doctype","CFCondition","open","validateAssignmentRule","addCondition","validateConditions","watchDebounced","assignmentRuleData","toggleDay","isActive","dayIndex","d","assignmentRuleErrors","days","day","workDay","AssignmentScheduleItem","query","debouncedQuery","useDebounceFn","u","addAssignee","inviteAgent","Combobox","Popover","togglePopover","ComboboxInput","ComboboxOptions","ComboboxOption","active","documentType","documentRoutingOptions","removeAssignedUser","_users","AssigneeSearch","initialData","isLoading","showConfirmDialog","useNewUI","isOldSla","deskUrl","defaultAssignmentDays","skipConditionCheck","validateField","resetAssignmentRuleData","resetAssignmentRuleErrors","getAssignmentRuleData","conditionsAvailable","conditionsJsonAvailable","goBack","saveAssignmentRule","validationErrors","updateAssignmentRule","createAssignmentRule","convertToConditions","er","disableSettingModalOutsideClick","beforeUnloadHandler","onUnmounted","_hoisted_40","FormLabel","AssignmentRulesSection","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","AssignmentSchedule","AssigneeRules","ConfirmDialog","AssignmentRules","AssignmentRuleView","markRaw","ProfileSettings","ForecastingSettings","TrendingUpDownIcon","CircleDollarSignIcon","CurrencySettings","SparkleIcon","BrandSettings","Users","InviteUserPage","Email2Icon","EmailConfig","EmailTemplateIcon","EmailTemplatePage","SettingsIcon2","AssignmentRulePage","HomeActions","PhoneIcon","TelephonySettings","WhatsAppSettings","isWhatsappInstalled","ERPNextIcon","ERPNextSettings","HelpdeskIcon","HelpdeskSettings","LeadSyncSourcePage","activeTab","setActiveTab","tabName","activePage","SidebarLink","getPinnedViews","getPublicViews","viewsStore","toggleNotificationPanel","isSidebarCollapsed","useStorage","isFCSite","isDemoSite","links","LucideLayoutDashboard","LeadsIcon","DealsIcon","ContactsIcon","OrganizationsIcon","NoteIcon","TaskIcon","CalendarIcon","allViews","_views","link","parseView","views","view","getIcon","routeName","icon","PinIcon","sessionStore","setUp","getFirstLead","firstLead","getFirstDeal","firstDeal","showIntermediateModal","currentStep","SquareAsterisk","router","InviteIcon","ConvertIcon","lead","deal","CommentIcon","EmailIcon","filteredSteps","UserDropdown","unreadNotificationsCount","Section","opened","hide","SignupBanner","TrialBanner","GettingStartedBanner","CollapseSidebar","Notifications","Settings","HelpModal","CRMLogo","IntermediateStepModal","CallUI","AppSidebar","AppHeader","GlobalModals"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}