import{g as Ve,f as K,u as Je,b as Ye,d as Pe,e as ze,_ as qe}from"./modals-47f1cf8a.js";import{E as ye,a as $e,_ as De}from"./EditIcon-127a74cc.js";import{I as He}from"./IndicatorIcon-2f30d1a9.js";import{b as ue,D as xe,g as re,_ as me,u as oe,x as X,A as Ke,r as Ce}from"./index-8df5241e.js";import{O as Z,P as ee,m as G,z as I,e as A,f as a,c as $,d as y,F as le,r as te,g as m,w as V,b as h,a3 as H,aO as fe,C as R,H as ge,t as T,u as t,ai as We,X as Se,Y as _e,A as Fe,n as J,M as Qe,N as Xe,aD as pe,a as Ze,a_ as el,aZ as ll,aS as tl,aV as al,a0 as be,_ as he,k as P,J as q,l as nl,co as ve,D as we,W as ce,$ as Re,bV as ol,Q as ae,aK as sl,aU as il}from"./index-a6920b9f.js";import{L as de,_ as Le}from"./Link-a0855a11.js";import{D as ne,b as Oe,_ as Me}from"./DragVerticalIcon-3e35903f.js";const rl={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},ul={class:"w-full"},dl=["onClick"],cl={__name:"TableMultiselectInput",props:Z({doctype:{type:String,required:!0},errorMessage:{type:Function,default:v=>`${v} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:Z(["change"],["update:modelValue"]),setup(v,{emit:c}){const s=v,D=c,{getFields:N}=ue(s.doctype),S=ee(v,"modelValue"),M=G([]),L=G(null),B=G(""),O=G(""),w=I(()=>O.value?{name:["not in",b.value]}:[]),b=I(()=>(L.value="",d(),O.value?S.value.map(n=>n[O.value.fieldname]):[])),d=()=>{if(L.value="",!O.value){let n=N();O.value=n==null?void 0:n.find(f=>["Link","User"].includes(f.fieldtype)),O.value||(L.value="Table MultiSelect requires a Table with atleast one Link field")}return O.value},e=n=>{if(L.value=null,S.value.some(f=>f[O.value.fieldname]===n)){L.value="Value already exists";return}n&&(S.value.push({[O.value.fieldname]:n}),D("change",S.value),!L.value&&(B.value=""))},F=n=>{let f=S.value.filter(l=>l[O.value.fieldname]!==n);D("change",f)},g=()=>{var f;if(B.value)return;let n=(f=M.value[M.value.length-1])==null?void 0:f.$el;document.activeElement===n?(S.value.pop(),D("change",S.value),ge(()=>{S.value.length&&(n=M.value[M.value.length-1].$el,n==null||n.focus())})):n==null||n.focus()};return(n,f)=>{const l=A("FeatherIcon"),i=A("Button"),C=A("ErrorMessage");return a(),$("div",null,[y("div",rl,[(a(!0),$(le,null,te(b.value,x=>(a(),m(i,{ref_for:!0,ref_key:"valuesRef",ref:M,key:x,label:x,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:fe(H(g,["stop"]),["delete"])},{suffix:V(()=>[h(l,{class:"h-3.5",name:"x",onClick:H(p=>F(x),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),y("div",ul,[O.value?(a(),m(de,{key:0,class:"form-control flex-1 truncate cursor-text",value:B.value,filters:w.value,doctype:O.value.options,onChange:f[0]||(f[0]=x=>e(x)),hideMe:!0},{target:V(({togglePopover:x})=>[y("button",{class:"w-full h-7 cursor-text",onClick:H(x,["stop"])},null,8,dl)]),_:1},8,["value","filters","doctype"])):R("",!0)])]),L.value?(a(),m(C,{key:0,class:"mt-2 pl-2",message:L.value},null,8,["message"])):R("",!0)])}}},ml={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},pl={class:"mt-4"},vl={class:"text-base text-ink-gray-8 mb-2"},fl={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},yl={class:"flex items-center gap-2"},gl={class:"flex items-center gap-2"},_l={class:"flex flex-col gap-1 text-ink-gray-9"},bl={class:"text-ink-gray-4 text-sm"},hl={class:"flex items-center gap-2 justify-end"},kl={__name:"GridFieldsEditorModal",props:Z({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const c=v,{getFields:s,getGridViewSettings:D,saveUserSettings:N}=ue(c.doctype),S=ee(v,"modelValue"),M=G(!1),L=G(null),B=I(()=>JSON.stringify(w.value)!==JSON.stringify(O.value)),O=I(()=>{let f=s(),l=D(c.parentDoctype);return l.length?l.map(i=>{let C=f.find(x=>x.fieldname===i.fieldname);if(C)return C.columns=i.columns,n(C)}):f==null?void 0:f.filter(i=>i.in_list_view).map(i=>n(i))}),w=G(JSON.parse(JSON.stringify(O.value||[]))),b=I(()=>{var f;return(f=s())==null?void 0:f.filter(l=>!w.value.find(i=>i.fieldname===l.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(l.fieldtype))});function d(){w.value=JSON.parse(JSON.stringify(O.value||[]))}function e(f){w.value.push(n(f))}function F(f){const l=w.value.findIndex(i=>i.fieldname===f.fieldname);w.value.splice(l,1)}function g(){M.value=!0;let f=w.value.map(l=>({fieldname:l.fieldname,columns:l.columns}));if(f.length===0){L.value=__("At least one field is required");return}N(c.parentDoctype,"GridView",f,()=>{M.value=!1,S.value=!1})}function n(f){return{label:f.label,fieldname:f.fieldname,fieldtype:f.fieldtype,options:f.options,in_list_view:f.in_list_view,columns:f.columns||2}}return(f,l)=>{const i=A("Badge"),C=A("TextInput"),x=A("Button");return a(),m(t(Se),{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=p=>S.value=p)},{"body-title":V(()=>[y("h3",ml,[y("div",null,T(f.__("Edit Grid Fields Layout")),1),B.value?(a(),m(i,{key:0,label:f.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var p,W;return[y("div",pl,[y("div",vl,T(f.__("Fields Order")),1),(p=O.value)!=null&&p.length?(a(),m(t(ne),{key:0,list:w.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:V(({element:j})=>[y("div",fl,[y("div",yl,[h(Oe,{class:"h-3.5 cursor-grab"}),y("div",null,T(j.label),1)]),y("div",gl,[h(C,{variant:"outline",type:"number",modelValue:j.columns,"onUpdate:modelValue":se=>j.columns=se,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),h(x,{variant:"ghost",icon:"x",onClick:se=>F(j)},null,8,["onClick"])])])]),_:1},8,["list"])):R("",!0),(W=b.value)!=null&&W.length?(a(),m(Le,{key:1,value:"",options:b.value,onChange:l[0]||(l[0]=j=>e(j))},{target:V(({togglePopover:j})=>[h(x,{class:"w-full mt-2",label:f.__("Add Field"),iconLeft:"plus",onClick:se=>j()},null,8,["label","onClick"])]),"item-label":V(({option:j})=>[y("div",_l,[y("div",null,T(j.label),1),y("div",bl,T(`${j.fieldname} - ${j.fieldtype}`),1)])]),_:1},8,["options"])):R("",!0),L.value?(a(),m(t(We),{key:2,class:"mt-3",message:L.value},null,8,["message"])):R("",!0)])]}),actions:V(()=>[y("div",hl,[B.value?(a(),m(x,{key:0,class:"w-full",label:f.__("Reset"),onClick:d},null,8,["label"])):R("",!0),h(x,{class:"w-full",label:f.__("Save"),variant:"solid",onClick:g,loading:M.value,disabled:!B.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},xl={class:"flex flex-col gap-5.5"},Cl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},wl=["onClick"],Vl=["onDblclick"],$l={key:0,class:"flex items-center gap-2"},Dl={key:1,class:"flex gap-1 items-center"},Sl={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},Fl={class:"flex items-center justify-between"},Rl=["onDblclick"],Ll={key:1,class:"flex gap-2 items-center"},Ol={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Ml={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ul={class:"flex items-center gap-2 truncate"},Bl={class:"truncate"},Tl={class:"gap-2 w-full"},Nl={class:"flex flex-col gap-1 text-ink-gray-9"},Gl={class:"text-ink-gray-4 text-sm"},jl={class:"mt-5.5"},El={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(v){const c=v,s=G(0),D=I(()=>c.tabs.length==1&&!c.tabs[0].label?"prefix":"default"),N=["Geolocation","Attach","Attach Image","HTML","Signature"],S=I(()=>({doctype:c.doctype,restricted_fieldtypes:N,as_array:!0,only_required:c.onlyRequired})),M=_e({url:"crm.api.doc.get_fields_meta",params:S.value,cache:["fieldsMeta",c.doctype],auto:!0,transform:b=>{var F;let d=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],e=[];return(F=c.tabs)==null||F.forEach(g=>{var n;(n=g.sections)==null||n.forEach(f=>{var l;(l=f.columns)==null||l.forEach(i=>{e=e.concat(i.fields)})})}),b.filter(g=>!e.find(n=>n.fieldname===g.fieldname)&&!d.includes(g.fieldname))}});function L(){if(c.tabs.length==1&&!c.tabs[0].label){c.tabs[0].label=__("New Tab");return}c.tabs.push({label:__("New Tab"),name:"tab_"+re(),sections:[]}),s.value=c.tabs.length?c.tabs.length-1:0}function B(b,d){d&&b.fields.push(d)}function O(b){return[{label:__("Edit"),icon:"edit",onClick:()=>b.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(c.tabs.length==1){c.tabs[0].label="";return}c.tabs.splice(s.value,1),s.value=s.value?s.value-1:0}}]}function w(b,d,e){let F=d.columns[d.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>d.editingLabel=!0},{label:d.collapsible?__("Uncollapsible"):__("Collapsible"),icon:d.collapsible?"chevron-up":"chevron-down",onClick:()=>d.collapsible=!d.collapsible},{label:d.hideLabel?__("Show label"):__("Hide label"),icon:d.hideLabel?"eye":"eye-off",onClick:()=>d.hideLabel=!d.hideLabel},{label:d.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>d.hideBorder=!d.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{e.sections.splice(e.sections.indexOf(d),1)},condition:()=>d.editable!==!1},{label:__("Remove and move columns to {0} section",[b==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let g=e.sections[b==0?b+1:b-1];b==0?g.columns=d.columns.concat(g.columns):g.columns=g.columns.concat(d.columns),e.sections.splice(e.sections.indexOf(d),1)},condition:()=>d.editable!==!1&&d.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{c.tabs[s.value-1].sections.push(d),c.tabs[s.value].sections.splice(c.tabs[s.value].sections.indexOf(d),1),s.value-=1},condition:()=>c.tabs[s.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{c.tabs[s.value+1].sections.push(d),c.tabs[s.value].sections.splice(c.tabs[s.value].sections.indexOf(d),1),s.value+=1},condition:()=>c.tabs[s.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{d.columns.push({label:"",name:"column_"+re(),fields:[]})},condition:()=>d.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>d.columns.pop(),condition:()=>d.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let g=d.columns[d.columns.length-2];g.fields=g.fields.concat(F.fields),d.columns.pop()},condition:()=>d.columns.length>1&&F.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{e.sections[b+1].columns.push(F),d.columns.pop()},condition:()=>e.sections[b+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{e.sections[b-1].columns.push(F),d.columns.pop()},condition:()=>e.sections[b-1]}]}]}return Fe(()=>c.doctype,()=>M.fetch(S.value),{immediate:!0}),(b,d)=>{const e=A("Input"),F=A("Button"),g=A("FeatherIcon");return a(),$("div",xl,[y("div",Cl,[v.tabs.length&&v.tabs[s.value].label?(a(),m(t(ne),{key:0,list:v.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:d[2]||(d[2]=n=>s.value=n.newIndex)},{item:V(({element:n,index:f})=>[y("div",{class:J(["flex items-center gap-2 cursor-pointer rounded",[s.value==f?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",n.editingLabel?"p-1":"px-2 py-1"]]),onClick:l=>s.value=f},[y("div",{onDblclick:()=>n.editingLabel=!0},[n.editingLabel?(a(),$("div",Dl,[h(e,{modelValue:n.label,"onUpdate:modelValue":l=>n.label=l,onKeydown:fe(l=>n.editingLabel=!1,["enter"]),onBlur:l=>n.editingLabel=!1,onClick:d[0]||(d[0]=H(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),n.editingLabel?(a(),m(F,{key:0,icon:"check",variant:"ghost",onClick:l=>n.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",$l,T(b.__(n.label)||b.__("Untitled")),1))],40,Vl),n.label&&s.value==f?(a(),m(t(xe),{key:0,options:O(n),class:"!h-4",onClick:d[1]||(d[1]=H(()=>{},["stop"]))},{default:V(()=>[h(F,{variant:"ghost",class:"!p-1 !h-4"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])):R("",!0)],10,wl)]),_:1},8,["list"])):R("",!0),h(F,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:L,label:b.__("Add Tab")},{[D.value]:V(()=>[h(g,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(a(!0),$(le,null,te(v.tabs,(n,f)=>Qe((a(),$("div",{key:n.name},[h(t(ne),{list:n.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:V(({element:l,index:i})=>[y("div",Sl,[y("div",Fl,[y("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>l.editingLabel=!0},[l.editingLabel?(a(),$("div",Ll,[h(e,{modelValue:l.label,"onUpdate:modelValue":C=>l.label=C,onKeydown:fe(C=>l.editingLabel=!1,["enter"]),onBlur:C=>l.editingLabel=!1,onClick:d[3]||(d[3]=H(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),l.editingLabel?(a(),m(F,{key:0,icon:"check",variant:"ghost",onClick:C=>l.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",{key:0,class:J(["flex items-center gap-2",{"text-ink-gray-3":l.hideLabel||!l.label,italic:!l.label}])},[pe(T(b.__(l.label)||b.__("No label"))+" ",1),l.collapsible?(a(),m(g,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):R("",!0)],2))],40,Rl),h(t(xe),{options:w(i,l,n)},{default:V(()=>[h(F,{variant:"ghost"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])]),h(t(ne),{class:"flex gap-2",list:l.columns,group:"columns","item-key":"name"},{item:V(({element:C})=>[y("div",Ol,[h(t(ne),{list:C.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:V(({element:x})=>[y("div",Ml,[y("div",Ul,[h(Oe,{class:"h-3.5 cursor-grab"}),y("div",Bl,T(x.label),1)]),h(F,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:p=>C.fields.splice(C.fields.indexOf(x),1)},null,8,["onClick"])])]),_:2},1032,["list"]),t(M).data?(a(),m(Le,{key:0,value:"",options:t(M).data,onChange:x=>B(C,x)},{target:V(({togglePopover:x})=>[y("div",Tl,[h(F,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",label:b.__("Add Field"),iconLeft:"plus",onClick:p=>x()},null,8,["label","onClick"])])]),"item-label":V(({option:x})=>[y("div",Nl,[y("div",null,T(x.label),1),y("div",Gl,T(`${x.fieldname} - ${x.fieldtype}`),1)])]),_:1},8,["options","onChange"])):R("",!0)])]),_:1},8,["list"])])]),_:2},1032,["list"]),y("div",jl,[h(F,{class:"w-full h-8",variant:"subtle",label:b.__("Add Section"),iconLeft:"plus",onClick:d[4]||(d[4]=l=>v.tabs[s.value].sections.push({label:b.__("New Section"),name:"section_"+t(re)(),opened:!0,columns:[{name:"column_"+t(re)(),fields:[]}]}))},null,8,["label"])])])),[[Xe,s.value==f]])),128))])}}},Il={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},Al={class:"flex flex-col gap-3"},Jl={class:"flex justify-between gap-2"},Yl={class:"flex flex-row-reverse gap-2"},Pl={key:0},zl={__name:"GridRowFieldsModal",props:Z({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:Z(["reload"],["update:modelValue"]),setup(v,{emit:c}){const s=v,D=c,N=ee(v,"modelValue"),S=G(s.doctype),M=G(!1),L=G(!1),B=G(!1);function O(){return{doctype:S.value,type:"Grid Row",parent_doctype:s.parentDoctype}}const w=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",S.value,s.parentDoctype],params:O(),onSuccess(e){w.originalData=JSON.parse(JSON.stringify(e))}});Fe(()=>w==null?void 0:w.data,()=>{L.value=JSON.stringify(w==null?void 0:w.data)!==JSON.stringify(w==null?void 0:w.originalData)},{deep:!0}),Ze(()=>el(b,100)());function b(){ge(()=>{w.params=O(),w.reload()})}function d(){let e=JSON.parse(JSON.stringify(w.data));e.forEach(F=>{F.sections&&F.sections.forEach(g=>{g.columns.forEach(n=>{n.fields&&(n.fields=n.fields.map(f=>f.fieldname))})})}),M.value=!0,tl("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:S.value,type:"Grid Row",layout:JSON.stringify(e)}).then(()=>{M.value=!1,N.value=!1,al("data_fields_layout_builder",{doctype:S.value}),D("reload")})}return(e,F)=>{const g=A("Button");return a(),m(t(Se),{modelValue:N.value,"onUpdate:modelValue":F[1]||(F[1]=n=>N.value=n),options:{size:"4xl"}},{"body-title":V(()=>[y("h3",Il,[y("div",null,T(e.__("Edit Grid Row Fields Layout")),1),L.value?(a(),m(t(ll),{key:0,label:e.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var n;return[y("div",Al,[y("div",Jl,[h(g,{label:B.value?e.__("Hide preview"):e.__("Show preview"),onClick:F[0]||(F[0]=f=>B.value=!B.value)},null,8,["label"]),y("div",Yl,[h(g,{loading:M.value,label:e.__("Save"),variant:"solid",onClick:d},null,8,["loading","label"]),h(g,{label:e.__("Reset"),onClick:b},null,8,["label"])])]),(n=t(w))!=null&&n.data?(a(),$("div",Pl,[B.value?(a(),m(Be,{key:1,tabs:t(w).data,data:{},preview:!0},null,8,["tabs"])):(a(),m(El,{key:0,tabs:t(w).data,doctype:S.value},null,8,["tabs","doctype"]))])):R("",!0)])]}),_:1},8,["modelValue"])}}},ql={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},Hl={class:"mb-5 flex items-center justify-between"},Kl={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Wl={class:"flex items-center gap-1"},Ql={__name:"GridRowModal",props:Z({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(v){const c=v,{isManager:s}=be(),D=ee(v,"modelValue"),N=ee(v,"showGridRowFieldsModal"),S=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",c.doctype,c.parentDoctype],params:{doctype:c.doctype,type:"Grid Row",parent_doctype:c.parentDoctype},auto:!0});function M(){N.value=!0,ge(()=>D.value=!1)}return(L,B)=>{const O=A("Button"),w=A("Dialog");return a(),m(w,{modelValue:D.value,"onUpdate:modelValue":B[1]||(B[1]=b=>D.value=b),options:{size:"4xl"}},{body:V(()=>[y("div",ql,[y("div",Hl,[y("div",null,[y("h3",Kl,T(L.__("Editing Row {0}",[v.index+1])),1)]),y("div",Wl,[t(s)()?(a(),m(O,{key:0,tooltip:L.__("Edit fields layout"),variant:"ghost",class:"w-7",icon:ye,onClick:M},null,8,["tooltip"])):R("",!0),h(O,{icon:"x",variant:"ghost",class:"w-7",onClick:B[0]||(B[0]=b=>D.value=!1)})])]),y("div",null,[t(S).data?(a(),m(Be,{key:0,tabs:t(S).data,data:v.data,doctype:v.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):R("",!0)])])]),_:1},8,["modelValue"])}}},Xl=G(!1),Zl=G(""),et=G({}),lt=G(null);function Ue(v,c,s,D){v&&(s==null||s(),Zl.value=v,et.value=c||{},lt.value=D||null,Xl.value=!0)}const tt={class:"flex flex-col flex-1 text-base"},at={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},nt={key:1,class:"rounded border border-outline-gray-modals"},ot={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},st={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},it={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},rt=["title"],ut={key:0,class:"text-ink-red-2"},dt={class:"flex items-center justify-center w-12"},ct=["onClick"],mt={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},pt={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},vt={class:"cursor-pointer"},ft={key:3,class:"flex h-full bg-surface-white justify-center items-center"},yt={class:"edit-row flex items-center justify-center w-12"},gt={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},_t={key:2,class:"mt-2 flex flex-row gap-2"},bt={__name:"Grid",props:Z({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0},overrides:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(v){var ke;const c=v,s=P("triggerOnChange",()=>{}),D=P("triggerOnRowAdd",()=>{}),N=P("triggerOnRowRemove",()=>{}),{getGridViewSettings:S,getFields:M,getFloatWithPrecision:L,getCurrencyWithPrecision:B,getFormattedCurrency:O,getGridSettings:w}=ue(c.doctype);ue(c.parentDoctype);const{users:b,getUser:d}=be(),e=ee(v,"modelValue"),F=ee(v,"parent");q("parentDoc",F);const g=G(new Array(((ke=e.value)==null?void 0:ke.length)||[]).fill(!1)),n=nl(new Set),f=G(!1),l=G(!1),i=I(()=>w()),C=I(()=>{let r=S(c.parentDoctype),k=M();return r.length?r.map(Q=>p(k.find(Y=>Y.fieldname===Q.fieldname))):(k==null?void 0:k.filter(U=>U.in_list_view).map(U=>p(U)))||[]}),x=I(()=>{var r;return((r=M())==null?void 0:r.map(k=>p(k)))||[]});function p(r){var U,Q;return r.fieldtype==="Link"&&r.options!=="User"&&(r.create||(r.create=(Y,ie,u,z)=>{const o=_=>{_&&E(_.name,ie,u)};Ue(ie.options,Y,z,o)})),r.fieldtype==="Link"&&r.options==="User"&&(r.fieldtype="User",r.link_filters=JSON.stringify({...r.link_filters?JSON.parse(r.link_filters):{},name:["in",(U=b.data.crmUsers)==null?void 0:U.map(Y=>Y.name)]})),{...{...r,filters:r.link_filters&&JSON.parse(r.link_filters),placeholder:r.placeholder||r.label},...(Q=c.overrides.fields)==null?void 0:Q.find(Y=>Y.fieldname===r.fieldname)}}const W=I(()=>{var k;if(!((k=C.value)!=null&&k.length))return"1fr";let r=S(c.parentDoctype);return r.length?r.map(U=>`minmax(0, ${U.columns||2}fr)`).join(" "):C.value.map(()=>"minmax(0, 2fr)").join(" ")}),j=I(()=>{var r;return(r=e.value)!=null&&r.length?e.value.length===n.size:!1}),se=I(()=>n.size>0),Te=r=>{var k;r?(k=e.value)==null||k.forEach(U=>n.add(U.name)):n.clear()},Ne=r=>{n.has(r.name)?n.delete(r.name):n.add(r.name)},Ge=()=>{var k;const r={};(k=x.value)==null||k.forEach(U=>{U.fieldtype==="Check"?r[U.fieldname]=!1:r[U.fieldname]="",U.default&&(r[U.fieldname]=Ie(U.default,U.fieldtype))}),r.name=re(10),g.value.push(!1),r.__islocal=!0,r.idx=e.value.length+1,r.doctype=c.doctype,r.parentfield=c.parentFieldname,r.parenttype=c.parentDoctype,e.value.push(r),D(r)},je=()=>{e.value=e.value.filter(r=>!n.has(r.name)),N(n,e.value),g.value.pop(),n.clear()},Ee=()=>{e.value.forEach((r,k)=>{r.idx=k+1})};function E(r,k,U){s(k.fieldname,r,U)}function Ie(r,k){if(["Float","Currency","Percent"].includes(k))return X(r);if(k==="Check"){if(["1","true","True"].includes(r))return!0;if(["0","false","False"].includes(r))return!1}else{if(k==="Int")return parseInt(r);if(r==="Today"&&k==="Date")return ae().format("YYYY-MM-DD");if(["Now","now"].includes(r)&&k==="Datetime")return ae().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(r)&&k==="Time")return ae().format("HH:mm:ss");if(k==="Date")return ae(r).format("YYYY-MM-DD");if(k==="Datetime")return ae(r).format("YYYY-MM-DD HH:mm:ss");if(k==="Time")return ae(r).format("HH:mm:ss")}return r}return(r,k)=>{var Q,Y,ie;const U=A("Button");return a(),$("div",tt,[v.label?(a(),$("div",at,T(r.__(v.label)),1)):R("",!0),(Q=C.value)!=null&&Q.length?(a(),$("div",nt,[y("div",ot,[y("div",st,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:j.value,onClick:k[0]||(k[0]=H(u=>Te(u.target.checked),["stop"]))},null,8,["modelValue"])]),y("div",it,T(r.__("No")),1),y("div",{class:"grid w-full truncate",style:we({gridTemplateColumns:W.value})},[(a(!0),$(le,null,te(C.value,u=>(a(),$("div",{class:J(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(u.fieldtype)?"text-right":""]),key:u.fieldname,title:u.label},[pe(T(r.__(u.label))+" ",1),u.reqd||u.mandatory_depends_on&&u.mandatory_via_depends_on?(a(),$("span",ut,"*")):R("",!0)],10,rt))),128))],4),y("div",dt,[h(U,{tooltip:r.__("Edit grid fields"),class:"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5",variant:"outline",icon:"settings",onClick:k[1]||(k[1]=u=>f.value=!0)},null,8,["tooltip"])])]),(Y=e.value)!=null&&Y.length?(a(),m(t(ne),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":k[3]||(k[3]=u=>e.value=u),delay:t(Ke)()?200:0,group:"rows","item-key":"name",onEnd:Ee},{item:V(({element:u,index:z})=>[y("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:H(()=>{i.value.editable_grid||(g.value[z]=!0)},["stop"])},[y("div",mt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:n.has(u.name),onClick:H(o=>Ne(u),["stop"])},null,8,["modelValue","onClick"])]),y("div",pt,T(z+1),1),y("div",{class:"grid w-full h-9.5",style:we({gridTemplateColumns:W.value})},[(a(!0),$(le,null,te(C.value,o=>(a(),$("div",{class:"border-r border-outline-gray-modals h-full",key:o.fieldname},[o.read_only&&!["Int","Float","Currency","Percent","Check"].includes(o.fieldtype)?(a(),m(t(ce),{key:0,type:"text",placeholder:o.placeholder,modelValue:u[o.fieldname],"onUpdate:modelValue":_=>u[o.fieldname]=_,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(o.fieldtype)?(a(),m(de,{key:1,class:"text-sm text-ink-gray-8",value:u[o.fieldname],doctype:o.fieldtype=="Link"?o.options:u[o.options],filters:o.filters,onChange:_=>E(_,o,u),onCreate:(_,Ae)=>o.create(r.v,o,u,Ae)},null,8,["value","doctype","filters","onChange","onCreate"])):o.fieldtype==="User"?(a(),m(de,{key:2,class:"form-control",value:t(d)(u[o.fieldname]).full_name,doctype:o.options,filters:o.filters,onChange:_=>E(_,o,u),placeholder:o.placeholder,hideMe:!0},{prefix:V(()=>[h(me,{class:"mr-2",user:u[o.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":V(({option:_})=>[h(me,{class:"mr-2",user:_.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:_})=>[h(t(Re),{text:_.value},{default:V(()=>[y("div",vt,T(t(d)(_.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):o.fieldtype==="Check"?(a(),$("div",ft,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:u[o.fieldname],"onUpdate:modelValue":_=>u[o.fieldname]=_,disabled:!i.value.editable_grid,onChange:_=>E(_.target.checked,o,u)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):o.fieldtype==="Time"?(a(),m(t($e),{key:4,value:u[o.fieldname],variant:"outline",format:t(oe)("","",!1,!0,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:_=>E(_,o,u)},null,8,["value","format","onChange"])):o.fieldtype==="Date"?(a(),m(t(De),{key:5,value:u[o.fieldname],variant:"outline",format:t(oe)("","",!0,!1,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:_=>E(_,o,u)},null,8,["value","format","onChange"])):o.fieldtype==="Datetime"?(a(),m(t(Me),{key:6,value:u[o.fieldname],variant:"outline",format:t(oe)("","",!0,!0,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:_=>E(_,o,u)},null,8,["value","format","onChange"])):["Small Text","Text","Long Text","Code"].includes(o.fieldtype)?(a(),m(t(ce),{key:7,rows:"1",type:"textarea",variant:"outline",value:u[o.fieldname],onChange:_=>E(_.target.value,o,u)},null,8,["value","onChange"])):o.fieldtype==="Select"?(a(),m(t(ce),{key:8,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:u[o.fieldname],"onUpdate:modelValue":_=>u[o.fieldname]=_,options:o.options,onChange:_=>E(_.target.value,o,u)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):o.fieldtype==="Password"?(a(),m(Ve,{key:9,variant:"outline",value:u[o.fieldname],disabled:!!o.read_only,onChange:_=>E(_.target.value,o,u)},null,8,["value","disabled","onChange"])):o.fieldtype==="Int"?(a(),m(K,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:u[o.fieldname]||"0",disabled:!!o.read_only,onChange:_=>E(_.target.value,o,u)},null,8,["value","disabled","onChange"])):o.fieldtype==="Percent"?(a(),m(K,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(o.fieldname,u),formattedValue:(u[o.fieldname]||"0")+"%",disabled:!!o.read_only,onChange:_=>E(t(X)(_.target.value),o,u)},null,8,["value","formattedValue","disabled","onChange"])):o.fieldtype==="Float"?(a(),m(K,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(o.fieldname,u),formattedValue:u[o.fieldname],disabled:!!o.read_only,onChange:_=>E(t(X)(_.target.value),o,u)},null,8,["value","formattedValue","disabled","onChange"])):o.fieldtype==="Currency"?(a(),m(K,{key:13,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(B)(o.fieldname,u),formattedValue:t(O)(o.fieldname,u,F.value),disabled:!!o.read_only,onChange:_=>E(t(X)(_.target.value),o,u)},null,8,["value","formattedValue","disabled","onChange"])):o.fieldtype==="Autocomplete"?(a(),m(t(ol),{key:14,class:"text-sm text-ink-gray-8",modelValue:u[o.fieldname],"onUpdate:modelValue":_=>u[o.fieldname]=typeof _=="object"?_.value:_,onChange:_=>E(typeof _=="object"?_.value:_,o,u),options:o.options,placeholder:o.placeholder,disabled:!!o.read_only},null,8,["modelValue","onUpdate:modelValue","onChange","options","placeholder","disabled"])):(a(),m(t(ce),{key:15,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:u[o.fieldname],"onUpdate:modelValue":_=>u[o.fieldname]=_,options:o.options,onChange:_=>E(_.target.value,o,u)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),y("div",yt,[h(U,{tooltip:r.__("Edit row"),class:"rounded border-0 !text-ink-gray-7",variant:"outline",icon:ye,onClick:o=>g.value[z]=!0},null,8,["tooltip","onClick"])]),g.value[z]?(a(),m(Ql,{key:0,modelValue:g.value[z],"onUpdate:modelValue":o=>g.value[z]=o,showGridRowFieldsModal:l.value,"onUpdate:showGridRowFieldsModal":k[2]||(k[2]=o=>l.value=o),index:z,data:u,doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):R("",!0)],8,ct)]),_:1},8,["modelValue","delay"])):(a(),$("div",gt,T(r.__("No Data")),1))])):R("",!0),(ie=C.value)!=null&&ie.length?(a(),$("div",_t,[se.value?(a(),m(U,{key:0,label:r.__("Delete"),variant:"solid",theme:"red",onClick:je},null,8,["label"])):R("",!0),h(U,{label:r.__("Add Row"),onClick:Ge},null,8,["label"])])):R("",!0),l.value?(a(),m(zl,{key:3,modelValue:l.value,"onUpdate:modelValue":k[4]||(k[4]=u=>l.value=u),doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0),f.value?(a(),m(kl,{key:4,modelValue:f.value,"onUpdate:modelValue":k[5]||(k[5]=u=>f.value=u),doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0)])}}},ht=he(bt,[["__scopeId","data-v-bef45932"]]);const kt={key:0,class:"field"},xt={key:0,class:"mb-2 text-sm text-ink-gray-5"},Ct={key:0,class:"text-ink-red-2"},wt={key:4,class:"flex items-center gap-2"},Vt={key:0,class:"text-ink-red-3"},$t={key:5,class:"flex gap-1"},Dt={class:"cursor-pointer"},St={__name:"Field",props:{field:Object},setup(v){const c=v,s=P("data"),D=P("doctype"),N=P("preview"),S=P("isGridRow"),{getFormattedPercent:M,getFormattedFloat:L,getFormattedCurrency:B}=ue(D),{users:O,getUser:w}=be();let b,d;if(S)b=P("triggerOnChange",()=>{}),d=P("parentDoc");else{const{triggerOnChange:l,triggerOnRowAdd:i,triggerOnRowRemove:C}=Je(D,s.value.name);b=l,q("triggerOnChange",b),q("triggerOnRowAdd",i),q("triggerOnRowRemove",C)}const e=I(()=>{var C;let l=c.field;l.fieldtype=="Select"&&typeof l.options=="string"&&(l.options=l.options.split(`
`).map(x=>({label:x,value:x})),l.options[0].value!==""&&l.options.unshift({label:"",value:""})),l.fieldtype==="Link"&&l.options==="User"&&(l.fieldtype="User",l.link_filters=JSON.stringify({...l.link_filters?JSON.parse(l.link_filters):{},name:["in",(C=O.data.crmUsers)==null?void 0:C.map(x=>x.name)]})),l.fieldtype==="Link"&&l.options!=="User"&&(l.create||(l.create=(x,p)=>{const W=j=>{j&&n(j.name,l)};Ue(l.options,x,p,W)}));let i={...l,filters:l.link_filters&&JSON.parse(l.link_filters),placeholder:l.placeholder||l.label,display_via_depends_on:Ce(l.depends_on,s.value),mandatory_via_depends_on:Ce(l.mandatory_depends_on,s.value)};return i.visible=F(i),i});function F(l){var x;if(N.value)return!0;const i=Number(((x=window.sysdefaults)==null?void 0:x.hide_empty_read_only_fields)??1),C=l.read_only&&(s.value[l.fieldname]||!i);return(l.fieldtype=="Check"||C||!l.read_only)&&(!l.depends_on||l.display_via_depends_on)&&!l.hidden}const g=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.fieldtype)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);function n(l,i){S?b(i.fieldname,l,s.value):b(i.fieldname,l)}function f(l,i){return i.fieldtype==="Duration"?l||0:l}return(l,i)=>{const C=A("FormControl"),x=A("Button");return e.value.visible?(a(),$("div",kt,[e.value.fieldtype!="Check"?(a(),$("div",xt,[pe(T(l.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(a(),$("span",Ct,"*")):R("",!0)])):R("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(a(),m(C,{key:1,type:"text",placeholder:g(e.value),modelValue:t(s)[e.value.fieldname],"onUpdate:modelValue":i[0]||(i[0]=p=>t(s)[e.value.fieldname]=p),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(a(),m(ht,{key:2,modelValue:t(s)[e.value.fieldname],"onUpdate:modelValue":i[1]||(i[1]=p=>t(s)[e.value.fieldname]=p),parent:t(s),"onUpdate:parent":i[2]||(i[2]=p=>sl(s)?s.value=p:null),doctype:e.value.options,parentDoctype:t(D),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(a(),m(C,{key:3,type:"select",class:J(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:t(s)[e.value.fieldname],"onUpdate:modelValue":i[3]||(i[3]=p=>t(s)[e.value.fieldname]=p),onChange:i[4]||(i[4]=p=>n(p.target.value,e.value)),placeholder:g(e.value),description:e.value.description},il({_:2},[e.value.prefix?{name:"prefix",fn:V(()=>[h(He,{class:J(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(a(),$("div",wt,[h(C,{class:"form-control",type:"checkbox",modelValue:t(s)[e.value.fieldname],"onUpdate:modelValue":i[5]||(i[5]=p=>t(s)[e.value.fieldname]=p),onChange:i[6]||(i[6]=p=>n(p.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),y("label",{class:"text-sm text-ink-gray-5",onClick:i[7]||(i[7]=()=>{e.value.read_only||(t(s)[e.value.fieldname]=!t(s)[e.value.fieldname])})},[pe(T(l.__(e.value.label))+" ",1),e.value.mandatory?(a(),$("span",Vt,"*")):R("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(a(),$("div",$t,[h(de,{class:"form-control flex-1 truncate",value:t(s)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:t(s)[e.value.options],filters:e.value.filters,onChange:i[8]||(i[8]=p=>n(p,e.value)),placeholder:g(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),t(s)[e.value.fieldname]&&e.value.edit?(a(),m(x,{key:0,class:"shrink-0",label:l.__("Edit"),iconLeft:ye,onClick:i[9]||(i[9]=p=>e.value.edit(t(s)[e.value.fieldname]))},null,8,["label"])):R("",!0)])):e.value.fieldtype==="Table MultiSelect"?(a(),m(cl,{key:6,modelValue:t(s)[e.value.fieldname],"onUpdate:modelValue":i[10]||(i[10]=p=>t(s)[e.value.fieldname]=p),doctype:e.value.options,onChange:i[11]||(i[11]=p=>n(p,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(a(),m(de,{key:7,class:"form-control",value:t(s)[e.value.fieldname]&&t(w)(t(s)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:i[12]||(i[12]=p=>n(p,e.value)),placeholder:g(e.value),hideMe:!0},{prefix:V(()=>[t(s)[e.value.fieldname]?(a(),m(me,{key:0,class:"mr-2",user:t(s)[e.value.fieldname],size:"sm"},null,8,["user"])):R("",!0)]),"item-prefix":V(({option:p})=>[h(me,{class:"mr-2",user:p.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:p})=>[h(t(Re),{text:p.value},{default:V(()=>[y("div",Dt,T(t(w)(p.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Time"?(a(),m(t($e),{key:8,value:t(s)[e.value.fieldname],format:t(oe)("","",!1,!0,!1),placeholder:g(e.value),"input-class":"border-none",onChange:i[13]||(i[13]=p=>n(p,e.value))},null,8,["value","format","placeholder"])):e.value.fieldtype==="Datetime"?(a(),m(t(Me),{key:9,value:t(s)[e.value.fieldname],format:t(oe)("","",!0,!0,!1),placeholder:g(e.value),"input-class":"border-none",onChange:i[14]||(i[14]=p=>n(p,e.value))},null,8,["value","format","placeholder"])):e.value.fieldtype==="Date"?(a(),m(t(De),{key:10,value:t(s)[e.value.fieldname],format:t(oe)("","",!0,!1,!1),placeholder:g(e.value),"input-class":"border-none",onChange:i[15]||(i[15]=p=>n(p,e.value))},null,8,["value","format","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(a(),m(C,{key:11,type:"textarea",value:t(s)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:i[16]||(i[16]=p=>n(p.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(a(),m(Ve,{key:12,value:t(s)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:i[17]||(i[17]=p=>n(p.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(a(),m(K,{key:13,type:"text",placeholder:g(e.value),value:t(s)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:i[18]||(i[18]=p=>n(p.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(a(),m(K,{key:14,type:"text",value:t(M)(e.value.fieldname,t(s)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[19]||(i[19]=p=>n(t(X)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(a(),m(K,{key:15,type:"text",value:t(L)(e.value.fieldname,t(s)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[20]||(i[20]=p=>n(t(X)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(a(),m(K,{key:16,type:"text",value:t(B)(e.value.fieldname,t(s),t(d)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[21]||(i[21]=p=>n(t(X)(p.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(a(),m(C,{key:17,type:"text",placeholder:g(e.value),value:f(t(s)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[22]||(i[22]=p=>n(p.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):R("",!0)}}},Ft=he(St,[["__scopeId","data-v-7f5c3b7f"]]),Rt={class:"column flex flex-col gap-4 w-full"},Lt={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Ot={__name:"Column",props:{column:Object},setup(v){return(c,s)=>(a(),$("div",Rt,[v.column.label&&!v.column.hideLabel?(a(),$("div",Lt,T(v.column.label),1)):R("",!0),(a(!0),$(le,null,te(v.column.fields,D=>(a(),m(Ft,{key:D.fieldname,field:D,"data-name":D.fieldname},null,8,["field","data-name"]))),128))]))}},Mt={__name:"Section",props:{section:Object},setup(v){const c=P("hasTabs");return(s,D)=>v.section.hidden?R("",!0):(a(),$("div",{key:0,class:J(["section",[v.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[h(Ye,{class:J(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":t(c)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":t(c)}],label:v.section.label,hideLabel:v.section.hideLabel||!v.section.label,opened:v.section.opened,collapsible:v.section.collapsible,collapseIconPosition:"right"},{default:V(()=>[(a(!0),$(le,null,te(v.section.columns,N=>(a(),m(Ot,{key:N.name,class:J({"mt-6":v.section.label&&!v.section.hideLabel}),column:N,"data-name":N.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Ut={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(v){const c=v,s=G(0),D=I(()=>c.tabs.length>1||c.tabs.length==1&&c.tabs[0].label);return q("data",I(()=>c.data)),q("hasTabs",D),q("doctype",c.doctype),q("preview",c.preview),q("isGridRow",c.isGridRow),(N,S)=>(a(),$("div",{class:J(["flex flex-col",{"border border-outline-gray-1 rounded-lg":D.value,"border-outline-gray-modals":D.value}])},[h(t(qe),{as:"div",modelValue:s.value,"onUpdate:modelValue":S[0]||(S[0]=M=>s.value=M),tabs:v.tabs},{default:V(()=>[h(t(Pe),{class:J(D.value?"border-outline-gray-modals":"hidden")},null,8,["class"]),h(t(ze),null,{default:V(({tab:M})=>[y("div",{class:J(["sections overflow-hidden",{"my-4 sm:my-5":D.value}])},[(a(!0),$(le,null,te(M.sections,L=>(a(),m(Mt,{key:L.name,section:L,"data-name":L.name},null,8,["section","data-name"]))),128))],2)]),_:1})]),_:1},8,["modelValue","tabs"])],2))}},Be=he(Ut,[["__scopeId","data-v-0a2ef829"]]);export{Be as F,ht as G,El as _,Zl as a,et as b,Ue as c,lt as d,Xl as s};
//# sourceMappingURL=FieldLayout-baadb8ff.js.map
