import{cs as I,_ as d,b8 as F,e as B,f as o,c as i,d as n,F as y,r as E,b,w as z,g as _,a8 as M,t as $,M as O,C as x,N,n as L,L as D,aW as U,ct as A,cu as C,cv as j,cw as P,cx as q,l as J,z as m,j as G,m as X,cy as K,D as W,A as V,a as Q,cz as Y,cA as Z,cB as ee,cC as te,cD as ne,cE as oe,cF as le,cG as ie,cH as re,cI as se,cJ as ae,cK as ce,cL as de,cM as ue,cN as he,cO as fe,cP as ge,cQ as ve,cR as pe,cS as me,cT as _e,cU as we,cV as He,cW as be,cX as xe,cY as Ae,cZ as Ce,c_ as Me,c$ as ze,o as Be,J as ke,d0 as ye,B as R,u as $e,b3 as Le}from"./index-a6920b9f.js";function Te(e){const t=e.view.state.selection,{$from:u}=t;if(u.parentOffset>0||!t.empty)return!1;let g=e.view.state.doc.resolve(u.pos-1).nodeBefore;if(g||(g=e.state.doc.resolve(u.before()-1).nodeBefore),console.log(g),g&&["bulletList","orderedList","listItem"].includes(g.type.name))return e.chain().command(({tr:r})=>{const c=u.parent.content,l=g.type.name==="listItem";console.log(l),r.delete(u.before()-(l?1:0),u.after());const s=u.pos-4;r.insert(s,c),r.setSelection(I.near(r.doc.resolve(s)))}).run(),!0;if(e.can().liftListItem("listItem"))return e.commands.liftListItem("listItem")}const Ve={name:"TipTapMenu",props:["buttons"],inject:["editor"],components:{Popover:F},methods:{onButtonClick(e){e.action(this.editor)}}},Re={class:"inline-flex bg-surface-white px-1 py-1"},Ee={class:"inline-flex items-center gap-1"},De={key:0,class:"h-4 w-[2px] border-l"},Se={key:1,class:"shrink-0"},Ie=["onClick","set"],Fe={key:1},Oe={class:"p-1.5 mt-2 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},Ne=["onClick"],Ue={key:1,class:"whitespace-nowrap text-ink-gray-7"},je=["onClick","title"],Pe={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function qe(e,t,u,g,r,c){const l=B("Popover");return o(),i("div",Re,[n("div",Ee,[(o(!0),i(y,null,E(u.buttons,s=>(o(),i(y,{key:s.label},[s.type==="separator"?(o(),i("div",De)):s.map?(o(),i("div",Se,[b(l,null,{target:z(({togglePopover:h})=>[n("button",{class:"rounded px-2 py-1 text-base font-medium text-ink-gray-8 transition-colors hover:bg-surface-gray-2",onClick:h,set:e.activeBtn=s.find(a=>a.isActive(c.editor))||s[0]},[e.activeBtn.icon?(o(),_(M(e.activeBtn.icon),{key:0,class:"h-4 w-4"})):(o(),i("span",Fe,$(e.activeBtn.label),1))],8,Ie)]),body:z(({close:h})=>[n("ul",Oe,[(o(!0),i(y,null,E(s,a=>O((o(),i("li",null,[n("button",{class:"w-full h-7 rounded px-2 text-base flex items-center gap-2 hover:bg-surface-gray-3",onClick:()=>{c.onButtonClick(a),h()}},[a.icon?(o(),_(M(a.icon),{key:0,class:"size-4 flex-shrink-0 text-ink-gray-6"})):x("",!0),a.label?(o(),i("span",Ue,$(a.label),1)):x("",!0)],8,Ne)],512)),[[N,a.isDisabled?!a.isDisabled(c.editor):!0]])),256))])]),_:2},1024)])):(o(),_(M(s.component||"div"),D({key:2,ref_for:!0},{editor:c.editor}),{default:z(h=>[n("button",{class:L(["flex rounded p-1 text-ink-gray-8 transition-colors",[s.isActive(c.editor)||h!=null&&h.isActive?"bg-surface-gray-3":"hover:bg-surface-gray-2",s.class]]),onClick:a=>h!=null&&h.onClick?h.onClick(s):c.onButtonClick(s),title:s.label},[s.icon?(o(),_(M(s.icon),{key:0,class:"h-4 w-4"})):(o(),i("span",Pe,$(s.text),1))],10,je)]),_:2},1040))],64))),128))])])}const S=d(Ve,[["render",qe]]),Je={},Ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Xe(e,t){return o(),i("svg",Ge,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z",fill:"currentColor"},null,-1)])])}const Ke=d(Je,[["render",Xe]]),We={},Qe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ye(e,t){return o(),i("svg",Qe,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z",fill:"currentColor"},null,-1)])])}const Ze=d(We,[["render",Ye]]),et={},tt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function nt(e,t){return o(),i("svg",tt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const ot=d(et,[["render",nt]]),lt={},it={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function rt(e,t){return o(),i("svg",it,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm9-12v8h1.5v2H22v2h-2v-2h-5.5v-1.34l5-8.66H22zm-2 3.133L17.19 16H20v-4.867z",fill:"currentColor"},null,-1)])])}const st=d(lt,[["render",rt]]),at={},ct={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function dt(e,t){return o(),i("svg",ct,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M22 8v2h-4.323l-.464 2.636c.33-.089.678-.136 1.037-.136 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.827 0-3.367-1.224-3.846-2.897l1.923-.551c.24.836 1.01 1.448 1.923 1.448 1.105 0 2-.895 2-2s-.895-2-2-2c-.63 0-1.193.292-1.56.748l-1.81-.904L16 8h6zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z",fill:"currentColor"},null,-1)])])}const ut=d(at,[["render",dt]]),ht={},ft={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function gt(e,t){return o(),i("svg",ft,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M21.097 8l-2.598 4.5c2.21 0 4.001 1.79 4.001 4s-1.79 4-4 4-4-1.79-4-4c0-.736.199-1.426.546-2.019L18.788 8h2.309zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 10.5c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2z",fill:"currentColor"},null,-1)])])}const vt=d(ht,[["render",gt]]),pt={},mt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function _t(e,t){return o(),i("svg",mt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M13 6v15h-2V6H5V4h14v2z",fill:"currentColor"},null,-1)])])}const wt=d(pt,[["render",_t]]),Ht={},bt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function xt(e,t){return o(),i("svg",bt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z",fill:"currentColor"},null,-1)])])}const At=d(Ht,[["render",xt]]),Ct={},Mt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function zt(e,t){return o(),i("svg",Mt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z",fill:"currentColor"},null,-1)])])}const Bt=d(Ct,[["render",zt]]),kt={},yt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function $t(e,t){return o(),i("svg",yt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z",fill:"currentColor"},null,-1)])])}const Lt=d(kt,[["render",$t]]),Tt={},Vt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Rt(e,t){return o(),i("svg",Vt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z",fill:"currentColor"},null,-1)])])}const Et=d(Tt,[["render",Rt]]),Dt={},St={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function It(e,t){return o(),i("svg",St,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z",fill:"currentColor"},null,-1)])])}const Ft=d(Dt,[["render",It]]),Ot={},Nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Ut(e,t){return o(),i("svg",Nt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z",fill:"currentColor"},null,-1)])])}const jt=d(Ot,[["render",Ut]]),Pt={},qt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Jt(e,t){return o(),i("svg",qt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z",fill:"currentColor"},null,-1)])])}const Gt=d(Pt,[["render",Jt]]),Xt={},Kt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Wt(e,t){return o(),i("svg",Kt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M15.246 14H8.754l-1.6 4H5l6-15h2l6 15h-2.154l-1.6-4zm-.8-2L12 5.885 9.554 12h4.892zM3 20h18v2H3v-2z",fill:"currentColor"},null,-1)])])}const Qt=d(Xt,[["render",Wt]]),Yt={},Zt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function en(e,t){return o(),i("svg",Zt,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const tn=d(Yt,[["render",en]]),nn={},on={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function ln(e,t){return o(),i("svg",on,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"currentColor"},null,-1)])])}const rn=d(nn,[["render",ln]]),sn={},an={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-list-checks-icon lucide-list-checks"};function cn(e,t){return o(),i("svg",an,[...t[0]||(t[0]=[U('<path d="m3 17 2 2 4-4"></path><path d="m3 7 2 2 4-4"></path><path d="M13 6h8"></path><path d="M13 12h8"></path><path d="M13 18h8"></path>',5)])])}const dn=d(sn,[["render",cn]]),un={},hn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function fn(e,t){return o(),i("svg",hn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z",fill:"currentColor"},null,-1)])])}const gn=d(un,[["render",fn]]),vn={},pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function mn(e,t){return o(),i("svg",pn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M16.95 8.464l1.414-1.414 4.95 4.95-4.95 4.95-1.414-1.414L20.485 12 16.95 8.464zm-9.9 0L3.515 12l3.535 3.536-1.414 1.414L.686 12l4.95-4.95L7.05 8.464z",fill:"currentColor"},null,-1)])])}const _n=d(vn,[["render",mn]]),wn={},Hn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function bn(e,t){return o(),i("svg",Hn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z",fill:"currentColor"},null,-1)])])}const xn=d(wn,[["render",bn]]),An={},Cn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Mn(e,t){return o(),i("svg",Cn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M21 15v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2zm.008-12c.548 0 .992.445.992.993V13h-2V5H4v13.999L14 9l3 3v2.829l-3-3L6.827 19H14v2H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016zM8 7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z",fill:"currentColor"},null,-1)])])}const zn=d(An,[["render",Mn]]),Bn={},kn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function yn(e,t){return o(),i("svg",kn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0H24V24H0z"},null,-1),n("path",{d:"M16 4c.552 0 1 .448 1 1v4.2l5.213-3.65c.226-.158.538-.103.697.124.058.084.09.184.09.286v12.08c0 .276-.224.5-.5.5-.103 0-.203-.032-.287-.09L17 14.8V19c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1V5c0-.552.448-1 1-1h14zm-1 2H3v12h12V6zM8 8h2v3h3v2H9.999L10 16H8l-.001-3H5v-2h3V8zm13 .841l-4 2.8v.718l4 2.8V8.84z",fill:"currentColor"},null,-1)])])}const $n=d(Bn,[["render",yn]]),Ln={},Tn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Vn(e,t){return o(),i("svg",Tn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z",fill:"currentColor"},null,-1)])])}const Rn=d(Ln,[["render",Vn]]),En={},Dn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Sn(e,t){return o(),i("svg",Dn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M18.172 7H11a6 6 0 1 0 0 12h9v2h-9a8 8 0 1 1 0-16h7.172l-2.536-2.536L17.05 1.05 22 6l-4.95 4.95-1.414-1.414L18.172 7z",fill:"currentColor"},null,-1)])])}const In=d(En,[["render",Sn]]),Fn={},On={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function Nn(e,t){return o(),i("svg",On,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M2 11h2v2H2v-2zm4 0h12v2H6v-2zm14 0h2v2h-2v-2z",fill:"currentColor"},null,-1)])])}const Un=d(Fn,[["render",Nn]]),jn={},Pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"};function qn(e,t){return o(),i("svg",Pn,[...t[0]||(t[0]=[n("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),n("path",{d:"M13 10v4h6v-4h-6zm-2 0H5v4h6v-4zm2 9h6v-3h-6v3zm-2 0v-3H5v3h6zm2-14v3h6V5h-6zm-2 0H5v3h6V5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z",fill:"currentColor"},null,-1)])])}const Jn=d(jn,[["render",qn]]),Gn={Paragraph:{label:"Paragraph",icon:wt,action:e=>e.chain().focus().setParagraph().run(),isActive:e=>e.isActive("paragraph")},"Heading 1":{label:"Heading 1",text:"H1",icon:Ke,action:e=>e.chain().focus().toggleHeading({level:1}).run(),isActive:e=>e.isActive("heading",{level:1})},"Heading 2":{label:"Heading 2",text:"H2",icon:Ze,action:e=>e.chain().focus().toggleHeading({level:2}).run(),isActive:e=>e.isActive("heading",{level:2})},"Heading 3":{label:"Heading 3",text:"H3",icon:ot,action:e=>e.chain().focus().toggleHeading({level:3}).run(),isActive:e=>e.isActive("heading",{level:3})},"Heading 4":{label:"Heading 4",text:"H4",icon:st,action:e=>e.chain().focus().toggleHeading({level:4}).run(),isActive:e=>e.isActive("heading",{level:4})},"Heading 5":{label:"Heading 5",text:"H5",icon:ut,action:e=>e.chain().focus().toggleHeading({level:5}).run(),isActive:e=>e.isActive("heading",{level:5})},"Heading 6":{label:"Heading 6",text:"H6",icon:vt,action:e=>e.chain().focus().toggleHeading({level:6}).run(),isActive:e=>e.isActive("heading",{level:6})},Bold:{label:"Bold",icon:At,action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold")},Italic:{label:"Italic",icon:Bt,action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic")},Underline:{label:"Underline",icon:Lt,action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline")},Strikethrough:{label:"Strikethrough",icon:Et,action:e=>e.chain().focus().toggleStrike().run(),isActive:e=>e.isActive("strike")},"Bullet List":{label:"Bullet List",icon:rn,action:e=>e.chain().focus().toggleBulletList().run(),isActive:e=>e.isActive("bulletList")},"Numbered List":{label:"Numbered List",icon:tn,action:e=>e.chain().focus().toggleOrderedList().run(),isActive:e=>e.isActive("orderedList")},"Task List":{label:"Task List",icon:dn,action:e=>e.chain().focus().toggleTaskList().run(),isActive:e=>e.isActive("taskList")},"Align Center":{label:"Align Center",icon:Ft,action:e=>e.chain().focus().setTextAlign("center").run(),isActive:e=>e.isActive({textAlign:"center"})},"Align Left":{label:"Align Left",icon:jt,action:e=>e.chain().focus().setTextAlign("left").run(),isActive:e=>e.isActive({textAlign:"left"})},"Align Right":{label:"Align Right",icon:Gt,action:e=>e.chain().focus().setTextAlign("right").run(),isActive:e=>e.isActive({textAlign:"right"})},FontColor:{label:"Font Color",icon:Qt,isActive:e=>e.isActive("textStyle")||e.isActive("highlight"),component:A(()=>C(()=>import("./FontColor-735cbe2f.js"),["assets/FontColor-735cbe2f.js","assets/index-a6920b9f.js","assets/index-6ee0bfe3.css"]))},Blockquote:{label:"Blockquote",icon:gn,action:e=>e.chain().focus().toggleBlockquote().run(),isActive:e=>e.isActive("blockquote")},Code:{label:"Code",icon:_n,action:e=>e.chain().focus().toggleCodeBlock().run(),isActive:e=>e.isActive("codeBlock")},"Horizontal Rule":{label:"Horizontal Rule",icon:Un,action:e=>e.chain().focus().setHorizontalRule().run(),isActive:e=>!1},Link:{label:"Link",icon:xn,isActive:e=>e.isActive("link"),component:A(()=>C(()=>import("./InsertLink-445a3e5a.js"),["assets/InsertLink-445a3e5a.js","assets/index-a6920b9f.js","assets/index-6ee0bfe3.css"]))},Image:{label:"Image",icon:zn,isActive:e=>!1,component:A(()=>C(()=>import("./InsertImage-3d73592f.js"),["assets/InsertImage-3d73592f.js","assets/index-a6920b9f.js","assets/index-6ee0bfe3.css"]))},Video:{label:"Video",icon:$n,isActive:e=>!1,component:A(()=>C(()=>import("./InsertVideo-1ec3f27c.js"),["assets/InsertVideo-1ec3f27c.js","assets/index-a6920b9f.js","assets/index-6ee0bfe3.css"]))},Iframe:{label:"Embed",icon:j,isActive:e=>e.isActive("iframe"),component:A(()=>C(()=>import("./InsertIframe-395b1e24.js"),["assets/InsertIframe-395b1e24.js","assets/index-a6920b9f.js","assets/index-6ee0bfe3.css"]))},Undo:{label:"Undo",icon:Rn,action:e=>e.chain().focus().undo().run(),isActive:e=>!1},Redo:{label:"Redo",icon:In,action:e=>e.chain().focus().redo().run(),isActive:e=>!1},InsertTable:{label:"Insert Table",icon:Jn,action:e=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),isActive:e=>!1},AddColumnBefore:{label:"Add Column Before",action:e=>e.chain().focus().addColumnBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnBefore()},AddColumnAfter:{label:"Add Column After",action:e=>e.chain().focus().addColumnAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addColumnAfter()},DeleteColumn:{label:"Delete Column",action:e=>e.chain().focus().deleteColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteColumn()},AddRowBefore:{label:"Add Row Before",action:e=>e.chain().focus().addRowBefore().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowBefore()},AddRowAfter:{label:"Add Row After",action:e=>e.chain().focus().addRowAfter().run(),isActive:e=>!1,isDisabled:e=>!e.can().addRowAfter()},DeleteRow:{label:"Delete Row",action:e=>e.chain().focus().deleteRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteRow()},DeleteTable:{label:"Delete Table",action:e=>e.chain().focus().deleteTable().run(),isActive:e=>!1,isDisabled:e=>!e.can().deleteTable()},MergeCells:{label:"Merge Cells",action:e=>e.chain().focus().mergeCells().run(),isActive:e=>!1,isDisabled:e=>!e.can().mergeCells()},SplitCell:{label:"Split Cell",action:e=>e.chain().focus().splitCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().splitCell()},ToggleHeaderColumn:{label:"Toggle Header Column",action:e=>e.chain().focus().toggleHeaderColumn().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderColumn()},ToggleHeaderRow:{label:"Toggle Header Row",action:e=>e.chain().focus().toggleHeaderRow().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderRow()},ToggleHeaderCell:{label:"Toggle Header Cell",action:e=>e.chain().focus().toggleHeaderCell().run(),isActive:e=>!1,isDisabled:e=>!e.can().toggleHeaderCell()},Separator:{type:"separator"}};function T(e){return e instanceof Array?e.map(T):typeof e=="object"?e:Gn[e]}const Xn={name:"TextEditorFixedMenu",props:["buttons"],components:{Menu:S},inject:["editor"],computed:{fixedMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=[["Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Paragraph","Separator","Bold","Italic","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","FontColor","Separator","Image","Video","Iframe","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"],e.map(T)}}};function Kn(e,t,u,g,r,c){const l=B("Menu");return c.fixedMenuButtons?(o(),_(l,{key:0,buttons:c.fixedMenuButtons},null,8,["buttons"])):x("",!0)}const Wn=d(Xn,[["render",Kn]]),Qn={name:"TextEditorBubbleMenu",props:["buttons","options"],components:{BubbleMenu:P,Menu:S},inject:["editor"],computed:{bubbleMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Separator","Bold","Italic","Strikethrough","FontColor","Link","Separator","Bullet List","Numbered List","Task List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Blockquote","Code",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"]],e.map(T)}}};function Yn(e,t,u,g,r,c){const l=B("Menu"),s=B("BubbleMenu");return c.bubbleMenuButtons?(o(),_(s,D({key:0,class:"bubble-menu rounded-md shadow-sm","tippy-options":{duration:100},editor:c.editor},u.options),{default:z(()=>[b(l,{class:"rounded-md border-gray-100 shadow-lg",buttons:c.bubbleMenuButtons},null,8,["buttons"])]),_:1},16,["editor"])):x("",!0)}const Zn=d(Qn,[["render",Yn]]),eo={name:"TextEditorFloatingMenu",props:["buttons"],components:{FloatingMenu:q},inject:["editor"],computed:{floatingMenuButtons(){if(!this.buttons)return!1;let e;return Array.isArray(this.buttons)?e=this.buttons:e=["Paragraph","Heading 2","Heading 3","Bullet List","Numbered List","Task List","Blockquote","Code","Horizontal Rule"],e.map(T)}}},to=["onClick","title"],no={key:1,class:"inline-block h-4 min-w-[1rem] text-sm leading-4"};function oo(e,t,u,g,r,c){const l=B("FloatingMenu");return c.floatingMenuButtons?(o(),_(l,{key:0,"tippy-options":{duration:100},editor:c.editor,class:"flex"},{default:z(()=>[(o(!0),i(y,null,E(c.floatingMenuButtons,s=>(o(),i("button",{key:s.label,class:L(["flex rounded p-1 text-ink-gray-8 transition-colors",s.isActive(c.editor)?"bg-surface-gray-2":"hover:bg-surface-gray-2"]),onClick:()=>s.action(c.editor),title:s.label},[s.icon?(o(),_(M(s.icon),{key:0,class:"h-4 w-4"})):(o(),i("span",no,$(s.text),1))],10,to))),128))]),_:1},8,["editor"])):x("",!0)}const lo=d(eo,[["render",oo]]);function io(){const e=J({uploading:!1,progress:0,uploaded:0,total:0,error:null,result:null}),t=()=>{e.uploading=!1,e.progress=0,e.uploaded=0,e.total=0,e.error=null,e.result=null},u=m(()=>e.uploading),g=m(()=>e.progress),r=m(()=>e.error),c=m(()=>e.result);return{upload:(l,s={})=>ro(l,s,e,t),reset:t,state:e,isUploading:u,progress:g,error:r,result:c}}async function ro(e,t={},u,g){return g(),u.uploading=!0,new Promise((r,c)=>{const l=new XMLHttpRequest;l.upload.addEventListener("loadstart",()=>{u.uploading=!0,u.error=null}),l.upload.addEventListener("progress",a=>{a.lengthComputable&&(u.uploaded=a.loaded,u.total=a.total,u.progress=Math.round(a.loaded/a.total*100))}),l.upload.addEventListener("load",()=>{u.progress=100}),l.addEventListener("error",a=>{u.uploading=!1,u.error="Upload failed",c("Upload failed")}),l.onreadystatechange=()=>{if(l.readyState==XMLHttpRequest.DONE){let a;if(l.status===200){let v=null;try{v=JSON.parse(l.responseText)}catch{v=l.responseText}const w=v.message||v;u.result=w,r(w)}else if(l.status===403)a=JSON.parse(l.responseText);else try{a=JSON.parse(l.responseText)}catch{a="Upload failed"}if(a){let v,w=[[a.exc_type,a._error_message].filter(Boolean).join(" ")];if(a.exc){v=a.exc;try{v=JSON.parse(v)[0],console.log(v)}catch{}}let H=new Error(w.join(`
`)),f=a._server_messages?JSON.parse(a._server_messages):[];f=f.map(p=>{try{return JSON.parse(p).message}catch{return p}}).filter(Boolean),f.length||(f=a._error_message?[a._error_message]:["Internal Server Error"]),H.message=f.join(`
`),u.error=H,c(H)}u.uploading=!1}};const s=t.upload_endpoint||"/api/method/upload_file";l.open("POST",s,!0),l.setRequestHeader("Accept","application/json"),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&l.setRequestHeader("X-Frappe-CSRF-Token",window.csrf_token);const h=new FormData;if(e&&h.append("file",e,e.name),h.append("is_private",t.private?"1":"0"),h.append("folder",t.folder||"Home"),t.file_url&&h.append("file_url",t.file_url),t.doctype&&h.append("doctype",t.doctype),t.docname&&h.append("docname",t.docname),t.fieldname&&h.append("fieldname",t.fieldname),t.method&&h.append("method",t.method),t.type&&h.append("type",t.type),t.optimize&&(h.append("optimize","1"),t.max_width&&h.append("max_width",t.max_width.toString()),t.max_height&&h.append("max_height",t.max_height.toString())),t.params)for(let[a,v]of Object.entries(t.params))h.append(a,v);l.send(h)})}const ao=G({inheritAttrs:!1,__name:"TextEditor",props:{content:{default:null},placeholder:{type:[String,Function],default:""},editorClass:{default:""},editable:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!1},bubbleMenu:{type:[Boolean,Array],default:!1},bubbleMenuOptions:{default:()=>({})},fixedMenu:{type:[Boolean,Array],default:!1},floatingMenu:{type:[Boolean,Array],default:!1},extensions:{default:()=>[]},starterkitOptions:{default:()=>({})},mentions:{default:null},tags:{default:()=>[]},uploadFunction:{},uploadArgs:{}},emits:["change","focus","blur","transaction"],setup(e,{expose:t,emit:u}){function g(f){return io().upload(f,r.uploadArgs||{})}const r=e,c=u,l=X(null),s=K(),h=m(()=>L(s.class)),a=m(()=>W(s.style)),v=m(()=>Object.fromEntries(Object.entries(s).filter(([f])=>f!=="class"&&f!=="style"))),w=m(()=>({attributes:{class:L(["prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2",r.editorClass])}}));V(()=>r.content,f=>{l.value&&l.value.getHTML()!==f&&l.value.commands.setContent(f)}),V(()=>r.editable,f=>{l.value&&l.value.setEditable(f)}),V(w,f=>{l.value&&l.value.setOptions({editorProps:f})},{deep:!0}),Q(()=>{var f;l.value=new Y({content:r.content||null,editorProps:w.value,editable:r.editable,autofocus:r.autofocus,extensions:[Z.configure({...r.starterkitOptions,code:!1,codeBlock:!1,heading:!1}).extend({addKeyboardShortcuts(){return{Backspace:()=>Te(this.editor)}}}),ee.configure({...typeof((f=r.starterkitOptions)==null?void 0:f.heading)=="object"&&r.starterkitOptions.heading!==null?r.starterkitOptions.heading:{}}),te.configure({resizable:!0}),ne,oe.configure({nested:!0}),le,ie,re,se,ae.configure({types:["heading","paragraph"]}),ce,de,ue,he,fe,ge.configure({uploadFunction:r.uploadFunction||g}),ve.configure({uploadFunction:r.uploadFunction||g}),pe,me.configure({uploadFunction:r.uploadFunction||g}),_e,we.configure({openOnClick:!1}),He.configure({placeholder:typeof r.placeholder=="function"?r.placeholder:()=>r.placeholder}),r.mentions&&be.configure(Array.isArray(r.mentions)?{mentions:r.mentions}:{mentions:r.mentions.mentions,component:r.mentions.component}),xe,Ae,Ce,Me.configure({tags:()=>r.tags}),ze.configure({enabled:!0,uploadFunction:r.uploadFunction||g}),...r.extensions||[]],onUpdate:({editor:p})=>{c("change",p.getHTML())},onTransaction:({editor:p})=>{c("transaction",p)},onFocus:({editor:p,event:k})=>{c("focus",k)},onBlur:({editor:p,event:k})=>{c("blur",k)}})}),Be(()=>{l.value&&(l.value.destroy(),l.value=null)}),ke("editor",m(()=>l.value));const H=ye("rootRef");return t({editor:l,rootRef:H}),(f,p)=>l.value?(o(),i("div",D({key:0,class:["relative w-full",h.value],style:a.value},v.value,{ref_key:"rootRef",ref:H}),[b(Zn,{buttons:e.bubbleMenu,options:e.bubbleMenuOptions},null,8,["buttons","options"]),b(Wn,{class:"w-full overflow-x-auto rounded-t-lg border border-outline-gray-modals",buttons:e.fixedMenu},null,8,["buttons"]),b(lo,{buttons:e.floatingMenu},null,8,["buttons"]),R(f.$slots,"top",{editor:l.value}),R(f.$slots,"editor",{editor:l.value},()=>[b($e(Le),{editor:l.value},null,8,["editor"])]),R(f.$slots,"bottom",{editor:l.value})],16)):x("",!0)}});export{Zn as T,ao as _};
//# sourceMappingURL=TextEditor.vue_vue_type_script_setup_true_lang-0d82d5b6.js.map
