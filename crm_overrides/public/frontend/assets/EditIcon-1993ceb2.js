import{j as Ie,K as Re,m as C,Q as U,A as ne,z as R,f as v,g as be,w as z,B as de,b as F,aU as Be,T as ke,U as Ce,af as De,a3 as K,n as ce,aO as fe,u as M,aP as Ne,d as D,c as b,t as B,aj as q,C as _e,F as ae,r as le,b8 as Fe,cn as Se,H as ge,M as ze,N as He,_ as Le}from"./index-f67ab40e.js";import{g as Ye,m as Me,a as Te,b as Ae}from"./Link-ecdb2b5a.js";const Ee={class:"flex items-center justify-between p-2 pb-0 gap-1"},Ue={key:0},qe={key:1},Ke={key:2},We={class:"flex items-center"},Ze={class:"p-2"},je={key:0,role:"grid","aria-label":"Calendar dates"},Qe={class:"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1"},Ge=["aria-selected","aria-label","onClick"],Je={key:1,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select month"},Xe=["aria-selected","onClick"],Oe={key:2,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select year"},Pe=["aria-selected","onClick"],et={key:0,class:"flex items-center justify-between gap-1 p-2 border-t"},tt={class:"flex gap-1"},Ve="YYYY-MM-DD",ct=Ie({__name:"DatePicker",props:{value:{default:""},modelValue:{default:""},placement:{default:"bottom-start"},format:{},variant:{default:"subtle"},readonly:{type:Boolean,default:!1},placeholder:{default:"Select date"},inputClass:{},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},label:{},clearable:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(T,{emit:W}){const u=T,x=W,{autoClose:H}=Re(u),d=C("date"),i=C(U().year()),c=C(U().month()),m=C(""),I=C(u.modelValue||u.value||"");function Z(n){if(!n)return null;const s=String(n).trim();if(!s)return null;if(u.format){const h=U(s,u.format,!0);if(h.isValid())return h}const o=U(s);if(o.isValid())return o;const f=Ae(s);if(f){const h=U(f);if(h.isValid())return h}return null}function j(n){if(!n){if(u.clearable)m.value="";else{const o=Se();i.value=o.year(),c.value=o.month(),m.value=o.format(Ve)}return}const s=Z(n);if(!s){m.value="";return}i.value=s.year(),c.value=s.month(),m.value=s.format(Ve)}j(I.value);function L(){j(u.modelValue||u.value)}ne(()=>[u.modelValue,u.value],([n,s])=>{j(n||s)});const Y=R(()=>u.format?g(m.value,u.format):m.value);function g(n,s){const o=U(n);return o.isValid()?o.format(s):n}const y=C(Y.value),V=C(!1);ne(Y,n=>{V.value||(y.value=n)});function Q(n,s=!0){s&&H.value&&n&&n()}function ue(){m.value&&(m.value="",x("update:modelValue",""),x("change",""),I.value="",y.value="")}function G(n=!1,s){const o=y.value.trim();if(!o){u.clearable?(ue(),Q(s,n)):(N(Se()),Q(s,n));return}const f=Z(o);f&&(N(f),Q(s,n))}const A=C(null);function J(n){var o;const s=n.relatedTarget;s&&((o=A.value)!=null&&o.contains(s))||(G(),V.value=!1)}function _(n){G(!0,n),V.value=!1}function se(n,s){V.value=!0,n||s()}const E=R(()=>Ye(i.value,c.value,m.value));function N(n){const s=U(n);if(!s.isValid())return;const o=m.value;m.value=s.format(Ve),i.value=s.year(),c.value=s.month(),m.value!==I.value&&(x("update:modelValue",m.value),m.value!==o&&x("change",m.value),I.value=m.value),V.value||(y.value=u.format?g(m.value,u.format):m.value),d.value="date"}function ve(n){c.value=n,d.value="date"}function xe(n){i.value=n,d.value="month"}function X(){if(d.value==="date"){const n=Te(i.value,c.value).subtract(1,"month");i.value=n.year(),c.value=n.month()}else d.value==="month"?i.value-=1:i.value-=12}function O(){if(d.value==="date"){const n=Te(i.value,c.value).add(1,"month");i.value=n.year(),c.value=n.month()}else d.value==="month"?i.value+=1:i.value+=12}function re(n,s){N(n),H.value&&s(),V.value=!1}function P(n=0,s){re(Se().add(n,"day"),s)}function me(n){P(0,n)}function ee(n){P(1,n)}function he(n){ue(),Q(n),V.value=!1,d.value="date"}function pe(){d.value==="date"?d.value="month":d.value==="month"?d.value="year":d.value="date"}function $e(){d.value="date",V.value&&(G(),V.value=!1)}const oe=R(()=>i.value-i.value%12),we=R(()=>Array.from({length:12},(n,s)=>oe.value+s));return(n,s)=>(v(),be(M(Fe),{class:"inline-block",placement:T.placement,onOpen:L,onClose:$e},{target:z(({togglePopover:o,isOpen:f})=>[de(n.$slots,"target",ke(Ce({togglePopover:o,isOpen:f,displayLabel:Y.value,inputValue:y.value})),()=>[F(M(Ne),{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=h=>y.value=h),type:"text",class:ce(["cursor-text w-full",u.inputClass]),label:u.label,variant:u.variant,placeholder:u.placeholder,disabled:u.disabled,readonly:u.readonly||!u.allowCustom,onFocus:h=>se(f,o),onClick:h=>se(f,o),onBlur:J,onKeydown:fe(K(h=>_(o),["prevent"]),["enter"])},Be({suffix:z(()=>[de(n.$slots,"suffix",ke(Ce({togglePopover:o,isOpen:f,displayLabel:Y.value,inputValue:y.value})),()=>[F(De,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:K(o,["prevent"])},null,8,["onMousedown"])])]),_:2},[n.$slots.prefix?{name:"prefix",fn:z(()=>[de(n.$slots,"prefix",ke(Ce({togglePopover:o,isOpen:f,displayLabel:Y.value,inputValue:y.value})))]),key:"0"}:void 0]),1032,["modelValue","class","label","variant","placeholder","disabled","readonly","onFocus","onClick","onKeydown"])])]),body:z(({togglePopover:o})=>[D("div",{ref_key:"popoverContentRef",ref:A,class:"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2"},[D("div",Ee,[F(M(q),{variant:"ghost",size:"sm",class:"text-sm font-medium text-ink-gray-7",onClick:pe},{default:z(()=>[d.value==="date"?(v(),b("span",Ue,B(M(Me)[c.value])+" "+B(i.value),1)):d.value==="month"?(v(),b("span",qe,B(i.value),1)):(v(),b("span",Ke,B(oe.value)+" - "+B(oe.value+11),1))]),_:1}),D("div",We,[F(M(q),{variant:"ghost",icon:"chevron-left",class:"size-7",onClick:X}),T.clearable?_e("",!0):(v(),be(M(q),{key:0,variant:"ghost",class:"text-xs",label:"Today",onClick:()=>me(o)},null,8,["onClick"])),F(M(q),{variant:"ghost",icon:"chevron-right",class:"size-7",onClick:O})])]),D("div",Ze,[d.value==="date"?(v(),b("div",je,[D("div",Qe,[(v(),b(ae,null,le(["S","M","T","W","T","F","S"],f=>D("div",{key:f,class:"flex h-6 w-8 items-center justify-center"},B(f),1)),64))]),(v(!0),b(ae,null,le(E.value,(f,h)=>(v(),b("div",{key:h,class:"flex",role:"row"},[(v(!0),b(ae,null,le(f,S=>(v(),b("button",{type:"button",key:S.key,class:ce(["flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2",[S.inMonth?"text-ink-gray-8":"text-ink-gray-3",S.isToday?"font-extrabold text-ink-gray-9":"",S.isSelected?"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":"hover:bg-surface-gray-2"]]),role:"gridcell","aria-selected":S.isSelected?"true":"false","aria-label":S.date.format("YYYY-MM-DD")+(S.isToday?" (Today)":""),onClick:ye=>re(S.date,o)},B(S.date.date()),11,Ge))),128))]))),128))])):d.value==="month"?(v(),b("div",Je,[(v(!0),b(ae,null,le(M(Me),(f,h)=>(v(),b("button",{type:"button",key:f,class:ce(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":h===c.value}]),"aria-selected":h===c.value?"true":"false",onClick:S=>ve(h)},B(f.slice(0,3)),11,Xe))),128))])):(v(),b("div",Oe,[(v(!0),b(ae,null,le(we.value,f=>(v(),b("button",{type:"button",key:f,class:ce(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":f===i.value}]),"aria-selected":f===i.value?"true":"false",onClick:h=>xe(f)},B(f),11,Pe))),128))]))]),u.clearable?(v(),b("div",et,[D("div",tt,[F(M(q),{variant:"outline",label:"Today",onClick:()=>me(o)},null,8,["onClick"]),F(M(q),{variant:"outline",label:"Tomorrow",onClick:()=>ee(o)},null,8,["onClick"])]),m.value?(v(),be(M(q),{key:0,size:"sm",variant:"outline",label:"Clear",onClick:()=>he(o)},null,8,["onClick"])):_e("",!0)])):_e("",!0)],512)]),_:3},8,["placement"]))}}),at=["aria-activedescendant"],lt=["data-value","data-index","onClick","onMouseenter","id","aria-selected"],nt={class:"truncate"},ft=Ie({__name:"TimePicker",props:{value:{default:""},modelValue:{default:""},interval:{default:15},options:{default:()=>[]},placement:{default:"bottom-start"},placeholder:{default:"Select time"},variant:{default:"subtle"},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},use12Hour:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},scrollMode:{default:"center"},minTime:{default:""},maxTime:{default:""}},emits:["update:modelValue","change","input-invalid","invalid-change","open","close"],setup(T,{emit:W}){const u=T,x=W,H=C(null),d=C(!1),i=C(!1),c=C(-1),m=C(!1),I=C(!1);let Z=!1,j=!1;const L=C(null),Y=u.modelValue||u.value||"",g=C(Y),y=C("");y.value=E(g.value);const V=Math.random().toString(36).slice(2,9),Q=R(()=>c.value>-1?ue(c.value):void 0);function ue(e){return`tp-${V}-${e}`}function G(e){if(!e||!/^\d{2}:\d{2}(:\d{2})?$/.test(e))return null;const[t,a]=e.split(":").map(l=>parseInt(l));return t>23||a>59?null:t*60+a}const A=R(()=>G(u.minTime)),J=R(()=>G(u.maxTime)),_=R(()=>{var t;if((t=u.options)!=null&&t.length)return u.options.map(a=>{const l=se(a.value);return{value:l,label:a.label||E(l)}});const e=[];for(let a=0;a<1440;a+=u.interval){if(A.value!=null&&a<A.value||J.value!=null&&a>J.value)continue;const l=Math.floor(a/60).toString().padStart(2,"0"),r=(a%60).toString().padStart(2,"0"),p=`${l}:${r}`;e.push({value:p,label:E(p)})}return e});ne(()=>[u.modelValue,u.value],([e,t])=>{const a=e||t||"";a&&a!==g.value?(g.value=se(a),y.value=E(g.value)):a||(g.value="",y.value="")});function se(e){if(!e)return"";if(/^\d{2}:\d{2}$/.test(e)||/^\d{2}:\d{2}:\d{2}$/.test(e))return e;const t=N(e);return t.valid?t.ss?`${t.hh24}:${t.mm}:${t.ss}`:`${t.hh24}:${t.mm}`:""}function E(e){if(!e)return"";const t=e.split(":"),a=parseInt(t[0]),l=parseInt(t[1]),r=t[2],p=`${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}${r?`:${r}`:""}`;if(!u.use12Hour)return p;const k=a<12;return`${a%12===0?12:a%12}:${l.toString().padStart(2,"0")}${r?`:${r}`:""} ${k?"am":"pm"}`}function N(e){if(!e)return{valid:!1};let t=e.trim().toLowerCase();t=t.replace(/\./g,""),t=t.replace(/(\d)(am|pm)$/,"$1 $2");const a=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2}))?\s*([ap]m)?$/,l=t.match(a);if(!l)return{valid:!1};let[,r,p,k,$]=l,w=parseInt(r);if(isNaN(w)||w<0||w>23)return{valid:!1};if(k&&!p)return{valid:!1};let ie=p!=null&&p!==""?parseInt(p):0;if(isNaN(ie)||ie<0||ie>59)return{valid:!1};let te;if(k&&(te=parseInt(k),isNaN(te)||te<0||te>59))return{valid:!1};if($){if(w<1||w>12)return{valid:!1};w===12&&$==="am"?w=0:w<12&&$==="pm"&&(w+=12)}return{valid:!0,hh24:w.toString().padStart(2,"0"),mm:ie.toString().padStart(2,"0"),ss:te!=null?te.toString().padStart(2,"0"):void 0,total:w*60+ie}}function ve(e,t){if(!t.length)return-1;const a=t.map(k=>{const[$,w]=k.value.split(":").map(Number);return $*60+w});let l=0,r=a.length-1;for(;l<=r;){const k=l+r>>1,$=a[k];if($===e)return k;$<e?l=k+1:r=k-1}const p=[];return l<a.length&&p.push(l),l-1>=0&&p.push(l-1),p.length?p.sort((k,$)=>Math.abs(a[k]-e)-Math.abs(a[$]-e))[0]:-1}function xe(e){return A.value!=null&&e<A.value||J.value!=null&&e>J.value}function X(e,t=!1){const a=g.value;g.value=e,y.value=E(e),(t||!d.value)&&x("update:modelValue",e),t&&e!==a&&x("change",e),ye(!1)}function O(){const e=y.value,t=N(e);if(!e){const l=g.value;g.value="",d.value||x("update:modelValue",""),l&&l!==""&&x("change",""),ye(!1);return}if(!t.valid||xe(t.total)){x("input-invalid",e),ye(!0);return}const a=t.ss?`${t.hh24}:${t.mm}:${t.ss}`:`${t.hh24}:${t.mm}`;if(!u.allowCustom&&!_.value.some(l=>{const r=a.length===8?a.slice(0,5):a;return l.value===r})){const l=ve(t.total,_.value);if(l>-1){const r=_.value[l].value,p=a.length===8&&r.length===5?`${r}${a.slice(5)}`:r;X(p,!0);return}}X(a,!0)}function re(e,t=!1){const a=g.value;X(e,!0),t&&a===g.value&&x("change",g.value),u.autoClose&&(i.value=!1)}const P=R(()=>{const e=_.value;if(!e.length)return{selected:null,nearest:null};const t=N(y.value),a=I.value&&t.valid?t.ss?`${t.hh24}:${t.mm}:${t.ss}`:`${t.hh24}:${t.mm}`:g.value||null;if(!a)return{selected:null,nearest:null};const l=a&&a.length===8?a.slice(0,5):a,r=e.find($=>$.value===l)||null;if(r)return{selected:r,nearest:null};const p=N(a);if(!p.valid)return{selected:null,nearest:null};const k=ve(p.total,e);return{selected:null,nearest:k>-1?e[k]:null}});function me(e,t){if(t===c.value)return"bg-surface-gray-3 text-ink-gray-8";const{selected:a,nearest:l}=P.value;return I.value&&!a?l&&l.value===e.value?"text-ink-gray-7 italic bg-surface-gray-2":"text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8":a&&a.value===e.value?"bg-surface-gray-3 text-ink-gray-8":l&&l.value===e.value?"text-ink-gray-7 italic bg-surface-gray-2":"text-ink-gray-6 hover:bg-surface-gray-2 hover:text-ink-gray-8"}ne(()=>_.value,()=>ee());function ee(){ge(()=>{if(!H.value||!i.value)return;let e=null;if(c.value>-1)e=H.value.querySelector(`[data-index="${c.value}"]`);else{const{selected:t,nearest:a}=P.value,l=t||a;l&&(e=H.value.querySelector(`[data-value="${l.value}"]`))}e&&e.scrollIntoView({block:u.scrollMode==="center"?"center":u.scrollMode==="start"?"start":"nearest"})})}ne(i,e=>{e?(x("open"),he(),ee()):x("close")}),ne(()=>y.value,()=>{Z||(i.value&&ee(),I.value=!0,c.value=-1)});function he(){const{selected:e,nearest:t}=P.value,a=e||t;if(!a){c.value=-1;return}const l=_.value.findIndex(r=>r.value===a.value);c.value=l}function pe(e){const t=_.value;if(!t.length)return;c.value===-1?he():c.value=(c.value+e+t.length)%t.length;const a=t[c.value];if(a){Z=!0;const l=g.value.length===8&&a.value.length===5?`${a.value}${g.value.slice(5)}`:a.value;X(l,!1),ge(()=>{Z=!1})}I.value=!1,ee()}function $e(e,t){t?pe(1):e()}function oe(e,t){t?pe(-1):e()}function we(){if(!i.value){O(),h();return}const e=N(y.value),t=e.valid?e.ss?`${e.hh24}:${e.mm}:${e.ss}`:`${e.hh24}:${e.mm}`:null,a=t?_.value.some(l=>{const r=t.length===8?t.slice(0,5):t;return l.value===r}):!1;if(e.valid&&(!a||I.value)){O(),u.autoClose&&(i.value=!1),h();return}if(c.value>-1){const l=_.value[c.value];l&&re(l.value,!0)}else O(),u.autoClose&&(i.value=!1);h()}function n(e,t){e||t(),u.allowCustom&&f()}function s(){d.value=!0,u.allowCustom&&!m.value&&f()}function o(){if(i.value){d.value=!1;return}O(),d.value=!1}function f(){ge(()=>{var t,a;const e=((t=L.value)==null?void 0:t.el)||L.value;if(e&&e.querySelector){const l=e.querySelector("input")||e;(a=l==null?void 0:l.select)==null||a.call(l)}else e!=null&&e.select&&e.select();m.value=!0})}function h(){ge(()=>{var t,a;const e=((t=L.value)==null?void 0:t.el)||L.value;if(e&&e.querySelector){const l=e.querySelector("input")||e;(a=l==null?void 0:l.blur)==null||a.call(l)}else e!=null&&e.blur&&e.blur();d.value=!1})}function S(){i.value&&(i.value=!1),h()}function ye(e){j!==e&&(j=e,x("invalid-change",e))}return(e,t)=>(v(),be(Fe,{show:i.value,"onUpdate:show":t[1]||(t[1]=a=>i.value=a),transition:"default",placement:T.placement},{target:z(({togglePopover:a,isOpen:l})=>[F(Ne,{ref_key:"inputRef",ref:L,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=r=>y.value=r),variant:T.variant,type:"text",class:"text-sm w-full cursor-text",placeholder:T.placeholder,disabled:T.disabled,readonly:!u.allowCustom,onFocus:s,onClick:r=>n(l,a),onKeydown:[fe(K(we,["prevent"]),["enter"]),fe(K(r=>$e(a,l),["prevent"]),["down"]),fe(K(r=>oe(a,l),["prevent"]),["up"]),fe(K(S,["prevent"]),["esc"])],onBlur:o},Be({suffix:z(()=>[de(e.$slots,"suffix",ke(Ce({togglePopover:a,isOpen:l})),()=>[F(De,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:K(a,["prevent"])},null,8,["onMousedown"])])]),_:2},[e.$slots.prefix?{name:"prefix",fn:z(()=>[de(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["modelValue","variant","placeholder","disabled","readonly","onClick","onKeydown"])]),body:z(({isOpen:a})=>[ze(D("div",{ref_key:"panelRef",ref:H,class:"mt-2 max-h-48 w-44 overflow-y-auto rounded-lg bg-surface-modal p-1 text-base shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",role:"listbox","aria-activedescendant":Q.value},[(v(!0),b(ae,null,le(_.value,(l,r)=>(v(),b("button",{key:l.value,"data-value":l.value,"data-index":r,type:"button",class:ce(["group flex h-7 w-full items-center rounded px-2 text-left",me(l,r)]),onClick:p=>re(l.value),onMouseenter:p=>c.value=r,role:"option",id:ue(r),"aria-selected":g.value===l.value},[D("span",nt,B(l.label),1)],42,lt))),128))],8,at),[[He,a]])]),_:3},8,["show","placement"]))}}),ut={},st={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function rt(T,W){return v(),b("svg",st,[...W[0]||(W[0]=[D("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1)])])}const dt=Le(ut,[["render",rt]]);export{dt as E,ct as _,ft as a};
//# sourceMappingURL=EditIcon-1993ceb2.js.map
